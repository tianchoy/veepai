{"version":3,"file":"changePassword.js","sources":["pages/mine/userInfo/changePassword/changePassword.uvue","pages/mine/userInfo/changePassword/changePassword.uvue?type=page"],"sourcesContent":["<template>\r\n\t<view class=\"container\">\r\n\t\t<view class=\"content\">\r\n\t\t\t<fui-input label=\"旧密码\" placeholder=\"请输入原密码\" type=\"password\" :modelValue=\"oldPassword\"\r\n\t\t\t\t@input=\"updateOldPassword\"></fui-input>\r\n\t\t\t<fui-input label=\"新密码\" placeholder=\"请输入新密码\" type=\"password\" :modelValue=\"newPassword\"\r\n\t\t\t\t@input=\"updateNewPassword\"></fui-input>\r\n\t\t\t<fui-input label=\"确认新密码\" placeholder=\"再次输入新密码\" type=\"password\" :modelValue=\"confirmPassword\"\r\n\t\t\t\t@input=\"updateConfirmPassword\"></fui-input>\r\n\t\t</view>\r\n\t\t<view v-if=\"errorMsg\">\r\n\t\t\t<text class=\"error-msg\">{{errorMsg}}</text>\r\n\t\t</view>\r\n\t\t<view class=\"tips\">\r\n\t\t\t<text class=\"tips-word\">密码8-16位,需包含英文字母、数字、特殊字符中两类及以上</text>\r\n\t\t</view>\r\n\t\t<view>\r\n\t\t\t<fui-button color=\"#fff\" :disabled=\"btnDisabled\" text=\"提交\" background=\"#1296db\" height=\"80rpx\"\r\n\t\t\t\t@onclick=\"submit\"></fui-button>\r\n\t\t</view>\r\n\t</view>\r\n</template>\r\n\r\n<script setup lang=\"uts\">\r\n\timport { ref } from 'vue'\r\n\r\n\tconst oldPassword = ref<string>('')\r\n\tconst newPassword = ref<string>('')\r\n\tconst confirmPassword = ref<string>('')\r\n\tconst btnDisabled = ref<boolean>(true)\r\n\tconst errorMsg = ref<string>('') // 错误提示信息\r\n\r\n\t// 增强密码规则：必须包含两类及以上字符\r\n\tconst passwordReg = /^(?:(?=.*[a-zA-Z])(?=.*\\d)|(?=.*[a-zA-Z])(?=.*[^a-zA-Z\\d])|(?=.*\\d)(?=.*[^a-zA-Z\\d])).{8,16}$/\r\n\r\n\t// 验证密码格式\r\n\tfunction verPassword(psw : string) : boolean {\r\n\t\treturn passwordReg.test(psw)\r\n\t}\r\n\r\n\t// 更新按钮状态\r\n\tconst updateBtnState = () => {\r\n\t\tconst allFieldsFilled = oldPassword.value.length > 0 &&\r\n\t\t\tnewPassword.value.length > 0 &&\r\n\t\t\tconfirmPassword.value.length > 0\r\n\r\n\t\tconst passwordsMatch = newPassword.value === confirmPassword.value\r\n\t\tconst newPwdValid = verPassword(newPassword.value)\r\n\r\n\t\tbtnDisabled.value = !(allFieldsFilled && newPwdValid && passwordsMatch)\r\n\t}\r\n\r\n\t// 更新旧密码\r\n\tconst updateOldPassword = (e : string) => {\r\n\t\toldPassword.value = e\r\n\t\tupdateBtnState()\r\n\t}\r\n\r\n\t// 更新新密码\r\n\tconst updateNewPassword = (e : string) => {\r\n\t\tnewPassword.value = e\r\n\t\terrorMsg.value = ''\r\n\r\n\t\tif (e.length > 0 && !verPassword(e)) {\r\n\t\t\terrorMsg.value = '密码格式不符合要求'\r\n\t\t} else if (confirmPassword.value.length > 0 && e != confirmPassword.value) {\r\n\t\t\terrorMsg.value = '两次输入的密码不一致'\r\n\t\t}\r\n\r\n\t\tupdateBtnState()\r\n\t}\r\n\r\n\t// 更新确认密码\r\n\tconst updateConfirmPassword = (e : string) => {\r\n\t\tconfirmPassword.value = e\r\n\t\terrorMsg.value = ''\r\n\r\n\t\tif (e.length > 0) {\r\n\t\t\tif (!verPassword(e)) {\r\n\t\t\t\terrorMsg.value = '确认密码格式不符合要求'\r\n\t\t\t} else if (e != newPassword.value) {\r\n\t\t\t\terrorMsg.value = '两次输入的密码不一致'\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tupdateBtnState()\r\n\t}\r\n\r\n\t// 提交表单\r\n\tconst submit = () => {\r\n\t\tif (!verPassword(newPassword.value)) {\r\n\t\t\tuni.showToast({\r\n\t\t\t\ttitle: '密码格式错误',\r\n\t\t\t\ticon: 'none'\r\n\t\t\t})\r\n\t\t\treturn\r\n\t\t}\r\n\t\tif (newPassword.value != confirmPassword.value) {\r\n\t\t\tuni.showToast({\r\n\t\t\t\ttitle: '两次密码不一致',\r\n\t\t\t\ticon: 'none'\r\n\t\t\t})\r\n\t\t\treturn\r\n\t\t}\r\n\t\tuni.showToast({\r\n\t\t\ttitle: '提交成功',\r\n\t\t\ticon: 'none'\r\n\t\t})\r\n\t}\r\n</script>\r\n\r\n<style lang=\"scss\">\r\n\t.container {\r\n\t\theight: 100%;\r\n\t\tbackground-color: #f5f5f5;\r\n\t\tpadding: 50rpx 20rpx;\r\n\r\n\t\t.fui-input__label-size {\r\n\t\t\tfont-size: 26rpx !important;\r\n\t\t}\r\n\r\n\t\t.content {\r\n\t\t\tbackground-color: #fff;\r\n\t\t\tborder-radius: 20rpx;\r\n\t\t\tpadding: 20rpx;\r\n\t\t}\r\n\r\n\t\t.tips {\r\n\t\t\tmargin: 40rpx 0;\r\n\r\n\t\t\t.tips-word {\r\n\t\t\t\tfont-size: 30rpx;\r\n\t\t\t\tcolor: #999;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t.error-msg {\r\n\t\t\tmargin-top: 10rpx;\r\n\t\t\tcolor: #e64340;\r\n\t\t\tfont-size: 24rpx;\r\n\t\t}\r\n\t}\r\n</style>","import MiniProgramPage from '/Users/xyhc/Documents/veepai_uniappx/pages/mine/userInfo/changePassword/changePassword.uvue'\nwx.createPage(MiniProgramPage)"],"names":["ref","uni","MiniProgramPage"],"mappings":";;;;;;;;;;;;;;;AA0BC,UAAM,cAAcA,kBAAY,EAAE;AAClC,UAAM,cAAcA,kBAAY,EAAE;AAClC,UAAM,kBAAkBA,kBAAY,EAAE;AACtC,UAAM,cAAcA,kBAAa,IAAI;AACrC,UAAM,WAAWA,kBAAY,EAAE;AAG/B,UAAM,cAAc;AAGpB,aAAS,YAAY,KAAY;AAChC,aAAO,YAAY,KAAK,GAAG;AAAA,IAC3B;AAGD,UAAM,iBAAiB,MAAA;AACtB,YAAM,kBAAkB,YAAY,MAAM,SAAS,KAClD,YAAY,MAAM,SAAS,KAC3B,gBAAgB,MAAM,SAAS;AAEhC,YAAM,iBAAiB,YAAY,UAAU,gBAAgB;AAC7D,YAAM,cAAc,YAAY,YAAY,KAAK;AAEjD,kBAAY,QAAQ,EAAE,mBAAmB,eAAe;AAAA,IACzD;AAGA,UAAM,oBAAoB,CAAC,MAAU;AACpC,kBAAY,QAAQ;AACpB;IACD;AAGA,UAAM,oBAAoB,CAAC,MAAU;AACpC,kBAAY,QAAQ;AACpB,eAAS,QAAQ;AAEjB,UAAI,EAAE,SAAS,KAAK,CAAC,YAAY,CAAC,GAAG;AACpC,iBAAS,QAAQ;AAAA,MACjB,WAAU,gBAAgB,MAAM,SAAS,KAAK,KAAK,gBAAgB,OAAO;AAC1E,iBAAS,QAAQ;AAAA,MACjB;AAED;IACD;AAGA,UAAM,wBAAwB,CAAC,MAAU;AACxC,sBAAgB,QAAQ;AACxB,eAAS,QAAQ;AAEjB,UAAI,EAAE,SAAS,GAAG;AACjB,YAAI,CAAC,YAAY,CAAC,GAAG;AACpB,mBAAS,QAAQ;AAAA,QACjB,WAAU,KAAK,YAAY,OAAO;AAClC,mBAAS,QAAQ;AAAA,QACjB;AAAA,MACD;AAED;IACD;AAGA,UAAM,SAAS,MAAA;AACd,UAAI,CAAC,YAAY,YAAY,KAAK,GAAG;AACpCC,sBAAAA,MAAI,UAAU;AAAA,UACb,OAAO;AAAA,UACP,MAAM;AAAA,QACN,CAAA;AACD,eAAM;AAAA,MACN;AACD,UAAI,YAAY,SAAS,gBAAgB,OAAO;AAC/CA,sBAAAA,MAAI,UAAU;AAAA,UACb,OAAO;AAAA,UACP,MAAM;AAAA,QACN,CAAA;AACD,eAAM;AAAA,MACN;AACDA,oBAAAA,MAAI,UAAU;AAAA,QACb,OAAO;AAAA,QACP,MAAM;AAAA,MACN,CAAA;AAAA,IACF;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC3GD,GAAG,WAAWC,SAAe;"}