{"version":3,"file":"deviceReplay.js","sources":["pages/index/deviceReplay.uvue","pages/index/deviceReplay.uvue?type=page"],"sourcesContent":["<template>\r\n\t<view class=\"container\">\r\n\t\t<view class=\"video-container\">\r\n\t\t\t<video id=\"myVideo\" :src=\"videoSrc\" :controls=\"true\" class=\"video-player\" @timeupdate=\"onTimeUpdate\"\r\n\t\t\t\t@play=\"onPlay\" @pause=\"onPause\" @seeked=\"onSeeked\" :autoplay=\"true\" @loadedmetadata=\"onVideoLoaded\"></video>\r\n\t\t</view>\r\n\t\t<view class=\"time-ruler-container\">\r\n\t\t\t<scroll-view class=\"time-ruler-scroll\" scroll-x :scroll-left=\"timeScrollLeft\" scroll-with-animation\r\n\t\t\t\t@scroll=\"onTimeScroll\">\r\n\t\t\t\t<view class=\"time-ruler\" :style=\"{ width: rulerWidth + 'px' }\" @touchstart=\"onTouchStart\"\r\n\t\t\t\t\t@touchmove=\"onTouchMove\" @touchend=\"onTouchEnd\">\r\n\t\t\t\t\t<view v-for=\"(mark, index) in timeMarks\" :key=\"'mark-' + index\" :class=\"['time-mark', mark.type]\"\r\n\t\t\t\t\t\t:style=\"{ left: mark.position + 'px' }\" @click=\"seekToPosition(mark.time)\">\r\n\t\t\t\t\t\t<text v-if=\"mark.type === 'major'\" class=\"mark-label\"></text>\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view v-for=\"(event, index) in filteredEvents\" :key=\"'event-'+index\" \r\n\t\t\t\t\t\tclass=\"event-marker\"\r\n\t\t\t\t\t\t:style=\"{ left: getEventPosition(event) + 'px' }\"\r\n\t\t\t\t\t\t@click.stop=\"seekToEvent(event)\">\r\n\t\t\t\t\t\t<view :class=\"['event-dot', event.type]\"></view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"playhead\" :style=\"{ left: playheadPosition + 'px'}\"></view>\r\n\t\t\t\t</view>\r\n\t\t\t</scroll-view>\r\n\t\t</view>\r\n\t\t<view class=\"date-list\">\r\n\t\t\t<view v-for=\"(date, index) in dateList\" :key=\"index\"\r\n\t\t\t\t:class=\"['date-item', activeDate === date ? 'active' : '']\" @click=\"selectDate(date)\">\r\n\t\t\t\t{{ date }}\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t\t<view class=\"filter-bar\">\r\n\t\t\t<view v-for=\"filter in filters\" :key=\"filter.value\"\r\n\t\t\t\t:class=\"['filter-item', activeFilter === filter.value ? 'active' : '']\"\r\n\t\t\t\t@click=\"selectFilter(filter.value as string)\">\r\n\t\t\t\t{{ filter.label }}\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t</view>\r\n</template>\r\n\r\n<script setup lang=\"uts\">\r\n\timport { ref, computed, onMounted, getCurrentInstance } from 'vue'\r\n\r\n\tclass EventType {\r\n\t\tdate : string;\r\n\t\ttime : string;\r\n\t\ttype : string;\r\n\r\n\t\tconstructor(date : string, time : string, type : string) {\r\n\t\t\tthis.date = date;\r\n\t\t\tthis.time = time;\r\n\t\t\tthis.type = type;\r\n\t\t}\r\n\t}\r\n\r\n\t// 计算时间刻度\r\n\ttype TimeMark = {\r\n\t\ttime : number\r\n\t\tposition : number\r\n\t\ttype : string\r\n\t}\r\n\t// 响应式状态\r\n\tconst currentDate = ref('2024-10-21')\r\n\tconst currentTime = ref('00:00:00')\r\n\tconst activeDate = ref('10-21')\r\n\tconst activeFilter = ref('all')\r\n\tconst videoSrc = ref('/static/video/video.mp4')\r\n\tconst videoContext = ref<VideoContext | null>(null)\r\n\tconst isSeeking = ref(false)\r\n\tconst timeScrollLeft = ref(0)\r\n\tconst playheadPosition = ref(0)\r\n\tconst videoDuration = ref(0)\r\n\tconst lastSyncTime = ref(0)\r\n\tconst isDragging = ref(false)\r\n\tconst startX = ref(0)\r\n\tconst startScrollLeft = ref(0)\r\n\tconst lastDragTime = ref(0)\r\n\tconst manualScrollPosition = ref(0)\r\n\tconst draggedTimeInSeconds = ref(0)\r\n\r\n\r\n\t// 常量配置\r\n\tconst dateList = ['10-21', '10-22', '10-23', '10-24', '10-25', '10-26']\r\n\tconst filters = [\r\n\t\t{ label: '只看报警', value: 'alarm' },\r\n\t\t{ label: '移动侦测', value: 'motion' },\r\n\t\t{ label: '人形侦测', value: 'human' },\r\n\t\t{ label: '全部', value: 'all' }\r\n\t]\r\n\r\n\t// 模拟事件数据\r\n\tconst events = ref<EventType[]>([\r\n\t\t{ date: '10-21', time: '00:00:10', type: 'alarm' },\r\n\t\t{ date: '10-21', time: '00:00:30', type: 'motion' },\r\n\t\t{ date: '10-21', time: '00:01:45', type: 'human' },\r\n\t\t{ date: '10-21', time: '00:01:20', type: 'alarm' }\r\n\t])\r\n\r\n\t// 计算属性\r\n\tconst rulerWidth = computed(() => {\r\n\t\tconst systemInfo = uni.getSystemInfoSync()\r\n\t\treturn systemInfo.windowWidth\r\n\t})\r\n\r\n\r\n\t// 时间字符串转秒数\r\n\tconst convertTimeToSeconds = (timeStr : string) => {\r\n\t\tconst parts = timeStr.split(':')\r\n\t\tconst h = parseInt(parts[0])\r\n\t\tconst m = parseInt(parts[1])\r\n\t\tconst s = parts.length > 2 ? parseInt(parts[2]) : 0\r\n\t\treturn h * 3600 + m * 60 + s\r\n\t}\r\n\r\n\tconst timeMarks = computed<TimeMark[]>(() => {\r\n\t\tconst marks = [] as TimeMark[]\r\n\t\tconst duration = videoDuration.value\r\n\t\tif (duration == 0) return marks\r\n\r\n\t\tlet majorInterval : number\r\n\t\tif (duration <= 60) { \r\n\t\t\tmajorInterval = 10\r\n\t\t} else if (duration <= 300) {\r\n\t\t\tmajorInterval = 30\r\n\t\t} else if (duration <= 1800) {\r\n\t\t\tmajorInterval = 60\r\n\t\t} else if (duration <= 3600) {\r\n\t\t\tmajorInterval = 300\r\n\t\t} else if (duration <= 7200) { \r\n\t\t\tmajorInterval = 600\r\n\t\t} else {\r\n\t\t\tmajorInterval = 1800\r\n\t\t}\r\n\r\n\t\tconst minorInterval = majorInterval / 10\r\n\r\n\t\tconst pixelsPerSecond = rulerWidth.value / duration\r\n\r\n\t\tfor (let time = 0; time <= duration; time += minorInterval) {\r\n\t\t\tconst isMajor = (time % majorInterval) == 0\r\n\t\t\tmarks.push({\r\n\t\t\t\ttime,\r\n\t\t\t\tposition: time * pixelsPerSecond + 3,\r\n\t\t\t\ttype: isMajor ? 'major' : 'minor'\r\n\t\t\t})\r\n\t\t}\r\n\r\n\t\treturn marks\r\n\t})\r\n\r\n\tconst onVideoLoaded = (e: UTSJSONObject) => {\r\n\t\tvideoDuration.value = e['duration'] as number\r\n\t\tuni.__f__('log','at pages/index/deviceReplay.uvue:155','视频加载完成，时长:', videoDuration.value)\r\n\t}\r\n\r\n\r\n\t// 格式化刻度时间\r\n\tconst formatMarkTime = (seconds : number) => {\r\n\t\tconst hrs = Math.floor(seconds / 3600)\r\n\t\tconst mins = Math.floor((seconds % 3600) / 60)\r\n\t\tconst secs = Math.floor(seconds % 60)\r\n\r\n\t\tif (hrs > 0) {\r\n\t\t\treturn `${hrs}:${mins.toString().padStart(2, '0')}:${secs.toString().padStart(2, '0')}`\r\n\t\t}\r\n\t\treturn `${mins}:${secs.toString().padStart(2, '0')}`\r\n\t}\r\n\r\n\tconst filteredEvents = computed<EventType[]>(() => {\r\n\t\tif (activeFilter.value === 'all') return events.value\r\n\t\treturn events.value.filter((e) => e.type === activeFilter.value)\r\n\t})\r\n\r\n\t// 初始化视频上下文\r\n\tconst initVideoContext = () => {\r\n\t\ttry {\r\n\t\t\tvideoContext.value = uni.createVideoContext('myVideo');\r\n\t\t\tuni.__f__('log','at pages/index/deviceReplay.uvue:180','视频上下文初始化成功', videoContext.value);\r\n\t\t} catch (error) {\r\n\t\t\tuni.__f__('error','at pages/index/deviceReplay.uvue:182','创建视频上下文失败:', error);\r\n\t\t}\r\n\t}\r\n\t// 加载视频数据\r\n\tconst loadVideoData = (date : String) => {\r\n\t\tuni.__f__('log','at pages/index/deviceReplay.uvue:187','加载日期数据:', date)\r\n\t}\r\n\r\n\r\n\t// 选择日期\r\n\tconst selectDate = (date : string) => {\r\n\t\tactiveDate.value = date\r\n\t\tcurrentDate.value = `2024-${date}`\r\n\t\tloadVideoData(date)\r\n\t}\r\n\r\n\t// 格式化时间显示\r\n\tconst formatTime = (seconds : number) => {\r\n\t\tconst hrs = Math.floor(seconds / 3600)\r\n\t\tconst mins = Math.floor((seconds % 3600) / 60)\r\n\t\tconst secs = Math.floor(seconds % 60)\r\n\t\treturn `${hrs.toString().padStart(2, '0')}:${mins.toString().padStart(2, '0')}:${secs.toString().padStart(2, '0')}`\r\n\t}\r\n\r\n\r\n\t// 更新播放头位置\r\n\tconst updatePlayheadPosition = (currentTimeInSeconds : number) => {\r\n\t\tconst pixelsPerSecond = rulerWidth.value / videoDuration.value\r\n\t\tplayheadPosition.value = currentTimeInSeconds * pixelsPerSecond\r\n\t\tconst systemInfo = uni.getSystemInfoSync()\r\n\t\tconst scrollViewWidth = systemInfo.windowWidth\r\n\t\tconst halfWidth = scrollViewWidth / 2\r\n\t\tconst targetScrollLeft = playheadPosition.value - halfWidth\r\n\r\n\t\tconst maxScrollLeft = rulerWidth.value - scrollViewWidth\r\n\t\ttimeScrollLeft.value = Math.max(0, Math.min(maxScrollLeft, targetScrollLeft))\r\n\t}\r\n\r\n\t// 视频时间更新 \r\n\tconst onTimeUpdate = (e : UniVideoTimeUpdateEvent) => {\r\n\t\tif (isSeeking.value || isDragging.value) return\r\n\r\n\t\tconst currentTimeInSeconds = e.detail.currentTime\r\n\t\tcurrentTime.value = formatTime(currentTimeInSeconds)\r\n\t\tvideoDuration.value = e.detail.duration;\r\n\t\t// 节流处理\r\n\t\tconst now = Date.now()\r\n\t\tif (now - lastSyncTime.value < 200) return\r\n\t\tlastSyncTime.value = now\r\n\r\n\t\tupdatePlayheadPosition(currentTimeInSeconds - 1)\r\n\t}\r\n\r\n\tconst seekToSeconds = (timeInSeconds: number) => {\r\n\t\tuni.__f__('log','at pages/index/deviceReplay.uvue:236','尝试跳转到:', timeInSeconds, '秒')\r\n\t\tif (videoContext.value != null) {\r\n\t\t\tvideoContext.value.pause()\r\n\t\t\tvideoContext.value.seek(timeInSeconds)\r\n\t\t\tsetTimeout(() => {\r\n\t\t\t\tvideoContext.value?.play()\r\n\t\t\t\tuni.__f__('log','at pages/index/deviceReplay.uvue:242','跳转完成，应开始播放')\r\n\t\t\t}, 100)\r\n\t\t}\r\n\t}\r\n\r\n\t// 获取事件位置\r\n\tconst getEventPosition = (event: EventType) => {\r\n\t\tconst seconds = convertTimeToSeconds(event.time)\r\n\t\tconst duration = videoDuration.value != 0 ? videoDuration.value : 300 // 默认5分钟\r\n\t\tconst pixelsPerSecond = rulerWidth.value / duration\r\n\t\treturn seconds * pixelsPerSecond\r\n\t}\r\n\r\n\t// 跳转到事件时间点\r\n\tconst seekToEvent = (event: EventType) => {\r\n\t\tconst seconds = convertTimeToSeconds(event.time)\r\n\t\tuni.__f__('log','at pages/index/deviceReplay.uvue:258','点击事件时间点：', seconds, '秒', '当前视频时长:', videoDuration.value)\r\n\t\t\r\n\t\tif (videoContext.value == null) {\r\n\t\t\tuni.__f__('error','at pages/index/deviceReplay.uvue:261','视频上下文未初始化')\r\n\t\t\treturn\r\n\t\t}\r\n\t\t\r\n\t\tisSeeking.value = true\r\n\t\tcurrentTime.value = formatTime(seconds)\r\n\t\tplayheadPosition.value = getEventPosition(event)\r\n\t\t\r\n\t\t// 先暂停再跳转\r\n\t\tvideoContext.value.pause()\r\n\t\tvideoContext.value.seek(seconds)\r\n\t\t\r\n\t\t// 小延迟后播放确保跳转完成\r\n\t\tsetTimeout(() => {\r\n\t\t\tvideoContext.value?.play()\r\n\t\t\tisSeeking.value = false\r\n\t\t\tuni.__f__('log','at pages/index/deviceReplay.uvue:277','应已跳转到指定位置并开始播放')\r\n\t\t}, 150)\r\n\t}\r\n\r\n\r\n\t// 跳转到指定时间\r\n\tconst seekToTime = (hour : number, minute : number) => {\r\n\t\tconst timeInSeconds = hour * 3600 + minute * 60\r\n\t\tseekToSeconds(timeInSeconds)\r\n\t}\r\n\t// 跳转到指定位置(秒)\r\n\tconst seekToPosition = (seconds : number) => {\r\n\t\tseekToSeconds(seconds)\r\n\t}\r\n\r\n\t// 跳转完成\r\n\tconst onSeeked = () => {\r\n\t\tisSeeking.value = false\r\n\t}\r\n\r\n\t// 时间轴触摸开始\r\n\tconst onTouchStart = (e : TouchEvent) => {\r\n\t\tisDragging.value = true\r\n\t\tstartX.value = e.touches[0].pageX\r\n\t\tstartScrollLeft.value = startX.value\r\n\t\tlastDragTime.value = Date.now()\r\n\r\n\t\tisSeeking.value = true\r\n\t\tif (videoContext.value != null) {\r\n\t\t\tvideoContext.value.pause()\r\n\t\t}\r\n\t}\r\n\r\n\t// 时间轴触摸移动\r\n\tconst onTouchMove = (e : TouchEvent) => {\r\n\t\tif (!isDragging.value) return\r\n\r\n\t\tconst deltaX = e.touches[0].pageX - startX.value\r\n\t\tconst newScrollLeft = startScrollLeft.value - deltaX\r\n\r\n\t\tconst systemInfo = uni.getSystemInfoSync()\r\n\t\tconst scrollViewWidth = systemInfo.windowWidth\r\n\r\n\t\tconst maxScrollLeft = rulerWidth.value - scrollViewWidth\r\n\t\ttimeScrollLeft.value = Math.max(0, Math.min(maxScrollLeft, newScrollLeft))\r\n\r\n\t\t// 计算当前时间位置（基于触摸点位置）\r\n\t\tconst touchX = e.touches[0].pageX\r\n\t\tconst rulerStartX = touchX - startX.value + startScrollLeft.value\r\n\t\tconst pixelsPerSecond = rulerWidth.value / videoDuration.value\r\n\t\tconst timeInSeconds = rulerStartX / pixelsPerSecond\r\n\r\n\t\t// 更新显示\r\n\t\tcurrentTime.value = formatTime(timeInSeconds)\r\n\t\tplayheadPosition.value = timeInSeconds * pixelsPerSecond\r\n\t\tmanualScrollPosition.value = timeInSeconds * pixelsPerSecond\r\n\r\n\t\t// 实时跳转视频(节流处理)\r\n\t\tconst now = Date.now()\r\n\t\tif (now - lastDragTime.value > 100) {\r\n\t\t\tif (videoContext.value != null) {\r\n\t\t\t\tuni.__f__('log','at pages/index/deviceReplay.uvue:338','尝试跳转视频到:', timeInSeconds, '秒');\r\n\t\t\t\tdraggedTimeInSeconds.value = timeInSeconds\r\n\t\t\t\tvideoContext.value.seek(timeInSeconds)\r\n\t\t\t}\r\n\t\t\tlastDragTime.value = now\r\n\t\t}\r\n\t}\r\n\r\n\t// 时间轴触摸结束\r\n\tconst onTouchEnd = () => {\r\n\t\tif (!isDragging.value) return\r\n\r\n\t\t// 计算最终时间位置\r\n\t\tconst systemInfo = uni.getSystemInfoSync()\r\n\t\tconst scrollViewWidth = systemInfo.windowWidth\r\n\t\tconst pixelsPerSecond = rulerWidth.value / videoDuration.value;\r\n\t\tconst timeInSeconds = (timeScrollLeft.value + scrollViewWidth / 2) / pixelsPerSecond;\r\n\r\n\t\tif (videoContext.value != null) {\r\n\t\t\tuni.__f__('log','at pages/index/deviceReplay.uvue:357','尝试跳转视频到最终时间:', draggedTimeInSeconds.value, '秒');\r\n\t\t\tvideoContext.value.seek(draggedTimeInSeconds.value)\r\n\t\t\tvideoContext.value.play()\r\n\t\t}\r\n\r\n\t\tplayheadPosition.value = timeInSeconds * pixelsPerSecond\r\n\t\tcurrentTime.value = formatTime(timeInSeconds)\r\n\t\t// manualScrollPosition.value = timeInSeconds * 2\r\n\r\n\t\tisDragging.value = false\r\n\t\tisSeeking.value = false\r\n\t}\r\n\r\n\t// 定义滚动事件detail类型\r\n\ttype TimeScrollDetail = {\r\n\t\tscrollLeft : number\r\n\t}\r\n\t// 定义滚动事件类型\r\n\ttype TimeScrollEvent = {\r\n\t\tdetail : TimeScrollDetail\r\n\t}\r\n\t// 时间轴滚动事件\r\n\tconst onTimeScroll = (e : TimeScrollEvent) => {\r\n\t\tif (!isDragging.value) {\r\n\t\t\ttimeScrollLeft.value = e.detail.scrollLeft\r\n\t\t}\r\n\t}\r\n\r\n\t// 选择筛选条件\r\n\tconst selectFilter = (filter : string) => {\r\n\t\tactiveFilter.value = filter\r\n\t}\r\n\r\n\t// 检查指定时间是否有事件\r\n\tconst hasEvent = (hour : number, minute : number) => {\r\n\t\tconst timeStr = `${hour.toString().padStart(2, '0')}:${minute.toString().padStart(2, '0')}`\r\n\t\tconst events = filteredEvents.value\r\n\t\tfor (let i = 0; i < events.length; i++) {\r\n\t\t\tconst event = events[i]\r\n\t\t\tif (event.date === activeDate.value && event.time.startsWith(timeStr)) {\r\n\t\t\t\treturn true\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn false\r\n\t}\r\n\r\n\t// 获取事件类型\r\n\tconst getEventType = (hour : number, minute : number) => {\r\n\t\tconst timeStr = `${hour.toString().padStart(2, '0')}:${minute.toString().padStart(2, '0')}`\r\n\t\tconst eventsList = events.value\r\n\t\tfor (let i = 0; i < eventsList.length; i++) {\r\n\t\t\tconst event = eventsList[i]\r\n\t\t\tif (event.date === activeDate.value && event.time.startsWith(timeStr)) {\r\n\t\t\t\treturn event.type\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn ''\r\n\t}\r\n\r\n\t// 格式化小时显示\r\n\tconst formatHour = (hour : number) => {\r\n\t\treturn `${hour.toString().padStart(2, '0')}:00`\r\n\t}\r\n\r\n\t// 播放/暂停事件\r\n\tconst onPlay = () => {\r\n\t\tuni.__f__('log','at pages/index/deviceReplay.uvue:423','视频开始播放')\r\n\r\n\t}\r\n\r\n\tconst onPause = () => {\r\n\t\tuni.__f__('log','at pages/index/deviceReplay.uvue:428','视频暂停')\r\n\t}\r\n\r\n\t// 组件生命周期\r\n\tonMounted(() => {\r\n\t\tinitVideoContext();\r\n\t\tif (videoContext.value == null) {\r\n\t\t\tuni.__f__('error','at pages/index/deviceReplay.uvue:435','视频上下文初始化失败，请检查');\r\n\t\t}\r\n\t});\r\n</script>\r\n\r\n<style>\r\n\t.container {\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: column;\r\n\t\theight: 100%;\r\n\t\tbackground-color: #f5f5f5;\r\n\t}\r\n\r\n\r\n\t.date-list {\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: row;\r\n\t\tpadding: 20rpx;\r\n\t}\r\n\r\n\t.date-item {\r\n\t\tpadding: 8px 16px;\r\n\t\tmargin: 0 5px;\r\n\t\tborder-radius: 16px;\r\n\t\tbackground-color: #555;\r\n\t\tcolor: white;\r\n\t\tfont-size: 14px;\r\n\t\ttransition: all 0.2s;\r\n\t}\r\n\r\n\t.date-item.active {\r\n\t\tbackground-color: #007aff;\r\n\t\tcolor: #fff;\r\n\t}\r\n\r\n\t.video-container {\r\n\t\twidth: 100%;\r\n\t\theight: 250px;\r\n\t\tbackground-color: #000;\r\n\t\tposition: relative;\r\n\t}\r\n\r\n\t.video-player {\r\n\t\twidth: 100%;\r\n\t\theight: 100%;\r\n\t}\r\n\r\n\t.time-ruler-container {\r\n\t\twidth: 100%;\r\n\t\tpadding: 10px 0;\r\n\t\tbackground-color: #fff;\r\n\t\tposition: relative;\r\n\t\tz-index: 5;\r\n\t}\r\n\r\n\t.time-ruler-scroll {\r\n\t\twidth: 100%;\r\n\t\theight: 70px;\r\n\t\twhite-space: nowrap;\r\n\t}\r\n\r\n\t.playhead {\r\n\t\tposition: absolute;\r\n\t\ttop: 0;\r\n\t\twidth: 2px;\r\n\t\theight: 100%;\r\n\t\tbackground-color: #007aff;\r\n\t\tz-index: 10;\r\n\t\tpointer-events: none;\r\n\t}\r\n\r\n\t.filter-bar {\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: space-around;\r\n\t\tflex-direction: row;\r\n\t\tpadding: 12px 5px;\r\n\t\tbackground-color: #fff;\r\n\t\tz-index: 20;\r\n\t}\r\n\r\n\t.filter-item {\r\n\t\tpadding: 8px 12px;\r\n\t\tborder-radius: 16px;\r\n\t\tbackground-color: #555;\r\n\t\tcolor: white;\r\n\t\tfont-size: 12px;\r\n\t\ttransition: all 0.2s;\r\n\t\tflex: 1;\r\n\t\tmargin: 0 5px;\r\n\t\ttext-align: center;\r\n\t}\r\n\r\n\t.filter-item.active {\r\n\t\tbackground-color: #007aff;\r\n\t\tfont-weight: bold;\r\n\t\ttransform: scale(1.05);\r\n\t}\r\n\r\n\t.time-ruler {\r\n\t\tdisplay: flex;\r\n\t\theight: 100%;\r\n\t\tposition: relative;\r\n\t\twidth: 100%;\r\n\t\tborder-bottom: 1rpx solid #ccc;\r\n\t}\r\n\r\n\t.time-mark {\r\n\t\tposition: absolute;\r\n\t\tbottom: 0;\r\n\t\ttransform: translateX(-50%);\r\n\t\tpointer-events: auto;\r\n\t}\r\n\r\n\t.time-mark.major {\r\n\t\theight: 20px;\r\n\t\tbackground-color: #333;\r\n\t\twidth: 2px;\r\n\t}\r\n\r\n\t.time-mark.minor {\r\n\t\theight: 10px;\r\n\t\tbackground-color: #999;\r\n\t\twidth: 1px;\r\n\t}\r\n\r\n\r\n\r\n\t.event-marker {\r\n\t\tposition: absolute;\r\n\t\tbottom: 25px;\r\n\t\ttransform: translateX(-50%);\r\n\t\tz-index: 5;\r\n\t}\r\n\r\n\t.event-dot {\r\n\t\twidth: 10px;\r\n\t\theight: 10px;\r\n\t\tborder-radius: 50%;\r\n\t}\r\n\r\n\t.event-dot.alarm {\r\n\t\tbackground-color: #ff3b30;\r\n\t}\r\n\r\n\t.event-dot.motion {\r\n\t\tbackground-color: #ff9500;\r\n\t}\r\n\r\n\t.event-dot.human {\r\n\t\tbackground-color: #34c759;\r\n\t}\r\n</style>","import MiniProgramPage from '/Users/xyhc/Documents/veepai_uniappx/pages/index/deviceReplay.uvue'\nwx.createPage(MiniProgramPage)"],"names":["ref","computed","uni","onMounted","MiniProgramPage"],"mappings":";;MA0DM,iBAAQ,IAAA,QAAA;AAAA;;;;;;;;;;;;;;;;;;;;;;MAwTR,yBAAgB,IAAA,QAAA;AAAA;;;;;;;;;;;;;;;;;;MAIhB,wBAAe,IAAA,QAAA;AAAA;;;;;;;;;;;;;;;;;;;;;AAtTpB,UAAM,cAAcA,kBAAI,YAAY;AACpC,UAAM,cAAcA,kBAAI,UAAU;AAClC,UAAM,aAAaA,kBAAI,OAAO;AAC9B,UAAM,eAAeA,kBAAI,KAAK;AAC9B,UAAM,WAAWA,kBAAI,yBAAyB;AAC9C,UAAM,eAAeA,kBAAyB,IAAI;AAClD,UAAM,YAAYA,kBAAI,KAAK;AAC3B,UAAM,iBAAiBA,kBAAI,CAAC;AAC5B,UAAM,mBAAmBA,kBAAI,CAAC;AAC9B,UAAM,gBAAgBA,kBAAI,CAAC;AAC3B,UAAM,eAAeA,kBAAI,CAAC;AAC1B,UAAM,aAAaA,kBAAI,KAAK;AAC5B,UAAM,SAASA,kBAAI,CAAC;AACpB,UAAM,kBAAkBA,kBAAI,CAAC;AAC7B,UAAM,eAAeA,kBAAI,CAAC;AAC1B,UAAM,uBAAuBA,kBAAI,CAAC;AAClC,UAAM,uBAAuBA,kBAAI,CAAC;AAIlC,UAAM,WAAW,CAAC,SAAS,SAAS,SAAS,SAAS,SAAS,OAAO;AACtE,UAAM,UAAU;AAAA,MACf,IAAA,cAAA,EAAE,OAAO,QAAQ,OAAO,QAAO,CAAE;AAAA,MACjC,IAAA,cAAA,EAAE,OAAO,QAAQ,OAAO,SAAQ,CAAE;AAAA,MAClC,IAAA,cAAA,EAAE,OAAO,QAAQ,OAAO,QAAO,CAAE;AAAA,MACjC,IAAA,cAAA,EAAE,OAAO,MAAM,OAAO,MAAK,CAAE;AAAA;AAI9B,UAAM,SAASA,cAAAA,IAAiB;AAAA,MAC/B,EAAE,MAAM,SAAS,MAAM,YAAY,MAAM,QAAS;AAAA,MAClD,EAAE,MAAM,SAAS,MAAM,YAAY,MAAM,SAAU;AAAA,MACnD,EAAE,MAAM,SAAS,MAAM,YAAY,MAAM,QAAS;AAAA,MAClD,EAAE,MAAM,SAAS,MAAM,YAAY,MAAM,QAAS;AAAA,IAClD,CAAA;AAGD,UAAM,aAAaC,cAAAA,SAAS,MAAA;AAC3B,YAAM,aAAaC,oBAAI;AACvB,aAAO,WAAW;AAAA,IACnB,CAAC;AAID,UAAM,uBAAuB,CAAC,YAAgB;AAC7C,YAAM,QAAQ,QAAQ,MAAM,GAAG;AAC/B,YAAM,IAAI,SAAS,MAAM,CAAC,CAAC;AAC3B,YAAM,IAAI,SAAS,MAAM,CAAC,CAAC;AAC3B,YAAM,IAAI,MAAM,SAAS,IAAI,SAAS,MAAM,CAAC,CAAC,IAAI;AAClD,aAAO,IAAI,OAAO,IAAI,KAAK;AAAA,IAC5B;AAEA,UAAM,YAAYD,cAAAA,SAAqB,MAAA;AACtC,YAAM,QAAQ,CAAA;AACd,YAAM,WAAW,cAAc;AAC/B,UAAI,YAAY;AAAG,eAAO;AAE1B,UAAI;AACJ,UAAI,YAAY,IAAI;AACnB,wBAAgB;AAAA,MAChB,WAAU,YAAY,KAAK;AAC3B,wBAAgB;AAAA,MAChB,WAAU,YAAY,MAAM;AAC5B,wBAAgB;AAAA,MAChB,WAAU,YAAY,MAAM;AAC5B,wBAAgB;AAAA,MAChB,WAAU,YAAY,MAAM;AAC5B,wBAAgB;AAAA,MAChB,OAAM;AACN,wBAAgB;AAAA,MAChB;AAED,YAAM,gBAAgB,gBAAgB;AAEtC,YAAM,kBAAkB,WAAW,QAAQ;AAE3C,eAAS,OAAO,GAAG,QAAQ,UAAU,QAAQ,eAAe;AAC3D,cAAM,UAAW,OAAO,iBAAkB;AAC1C,cAAM,KAAK,IAAA,SAAA;AAAA,UACV;AAAA,UACA,UAAU,OAAO,kBAAkB;AAAA,UACnC,MAAM,UAAU,UAAU;AAAA,QAC1B,CAAA,CAAA;AAAA,MACD;AAED,aAAO;AAAA,IACR,CAAC;AAED,UAAM,gBAAgB,CAAC,MAAgB;AACtC,oBAAc,QAAQ,EAAE,UAAU;AAClCC,oBAAG,MAAC,MAAM,OAAM,wCAAuC,cAAc,cAAc,KAAK;AAAA,IACzF;AAeA,UAAM,iBAAiBD,cAAAA,SAAsB,MAAA;AAC5C,UAAI,aAAa,UAAU;AAAO,eAAO,OAAO;AAChD,aAAO,OAAO,MAAM,OAAO,CAAC,MAAM;AAAA,eAAA,EAAE,SAAS,aAAa;AAAA,MAAK,CAAA;AAAA,IAChE,CAAC;AAGD,UAAM,mBAAmB,MAAA;AACxB,UAAI;AACH,qBAAa,QAAQC,cAAAA,MAAI,mBAAmB,SAAS;AACrDA,sBAAG,MAAC,MAAM,OAAM,wCAAuC,cAAc,aAAa,KAAK;AAAA,MACvF,SAAQ,OAAO;AACfA,sBAAG,MAAC,MAAM,SAAQ,wCAAuC,cAAc,KAAK;AAAA,MAC5E;AAAA,IACF;AAEA,UAAM,gBAAgB,CAAC,SAAa;AACnCA,oBAAG,MAAC,MAAM,OAAM,wCAAuC,WAAW,IAAI;AAAA,IACvE;AAIA,UAAM,aAAa,CAAC,SAAa;AAChC,iBAAW,QAAQ;AACnB,kBAAY,QAAQ,QAAQ,IAAI;AAChC,oBAAc,IAAI;AAAA,IACnB;AAGA,UAAM,aAAa,CAAC,YAAgB;AACnC,YAAM,MAAM,KAAK,MAAM,UAAU,IAAI;AACrC,YAAM,OAAO,KAAK,MAAO,UAAU,OAAQ,EAAE;AAC7C,YAAM,OAAO,KAAK,MAAM,UAAU,EAAE;AACpC,aAAO,GAAG,IAAI,SAAQ,EAAG,SAAS,GAAG,GAAG,CAAC,IAAI,KAAK,SAAU,EAAC,SAAS,GAAG,GAAG,CAAC,IAAI,KAAK,WAAW,SAAS,GAAG,GAAG,CAAC;AAAA,IAClH;AAIA,UAAM,yBAAyB,CAAC,yBAA6B;AAC5D,YAAM,kBAAkB,WAAW,QAAQ,cAAc;AACzD,uBAAiB,QAAQ,uBAAuB;AAChD,YAAM,aAAaA,oBAAI;AACvB,YAAM,kBAAkB,WAAW;AACnC,YAAM,YAAY,kBAAkB;AACpC,YAAM,mBAAmB,iBAAiB,QAAQ;AAElD,YAAM,gBAAgB,WAAW,QAAQ;AACzC,qBAAe,QAAQ,KAAK,IAAI,GAAG,KAAK,IAAI,eAAe,gBAAgB,CAAC;AAAA,IAC7E;AAGA,UAAM,eAAe,CAAC,MAA2B;AAChD,UAAI,UAAU,SAAS,WAAW;AAAO,eAAM;AAE/C,YAAM,uBAAuB,EAAE,OAAO;AACtC,kBAAY,QAAQ,WAAW,oBAAoB;AACnD,oBAAc,QAAQ,EAAE,OAAO;AAE/B,YAAM,MAAM,KAAK;AACjB,UAAI,MAAM,aAAa,QAAQ;AAAK,eAAM;AAC1C,mBAAa,QAAQ;AAErB,6BAAuB,uBAAuB,CAAC;AAAA,IAChD;AAEA,UAAM,gBAAgB,CAAC,kBAAqB;AAC3CA,oBAAG,MAAC,MAAM,OAAM,wCAAuC,UAAU,eAAe,GAAG;AACnF,UAAI,aAAa,SAAS,MAAM;AAC/B,qBAAa,MAAM;AACnB,qBAAa,MAAM,KAAK,aAAa;AACrC,mBAAW,MAAA;;AACV,WAAA,KAAA,aAAa,WAAO,QAAA,OAAA,SAAA,OAAA,GAAA;AACpBA,wBAAAA,MAAI,MAAM,OAAM,wCAAuC,YAAY;AAAA,QACnE,GAAE,GAAG;AAAA,MACN;AAAA,IACF;AAGA,UAAM,mBAAmB,CAAC,UAAgB;AACzC,YAAM,UAAU,qBAAqB,MAAM,IAAI;AAC/C,YAAM,WAAW,cAAc,SAAS,IAAI,cAAc,QAAQ;AAClE,YAAM,kBAAkB,WAAW,QAAQ;AAC3C,aAAO,UAAU;AAAA,IAClB;AAGA,UAAM,cAAc,CAAC,UAAgB;AACpC,YAAM,UAAU,qBAAqB,MAAM,IAAI;AAC/CA,oBAAAA,MAAI,MAAM,OAAM,wCAAuC,YAAY,SAAS,KAAK,WAAW,cAAc,KAAK;AAE/G,UAAI,aAAa,SAAS,MAAM;AAC/BA,sBAAAA,MAAI,MAAM,SAAQ,wCAAuC,WAAW;AACpE,eAAM;AAAA,MACN;AAED,gBAAU,QAAQ;AAClB,kBAAY,QAAQ,WAAW,OAAO;AACtC,uBAAiB,QAAQ,iBAAiB,KAAK;AAG/C,mBAAa,MAAM;AACnB,mBAAa,MAAM,KAAK,OAAO;AAG/B,iBAAW,MAAA;;AACV,SAAA,KAAA,aAAa,WAAO,QAAA,OAAA,SAAA,OAAA,GAAA;AACpB,kBAAU,QAAQ;AAClBA,sBAAAA,MAAI,MAAM,OAAM,wCAAuC,gBAAgB;AAAA,MACvE,GAAE,GAAG;AAAA,IACP;AASA,UAAM,iBAAiB,CAAC,YAAgB;AACvC,oBAAc,OAAO;AAAA,IACtB;AAGA,UAAM,WAAW,MAAA;AAChB,gBAAU,QAAQ;AAAA,IACnB;AAGA,UAAM,eAAe,CAAC,MAAc;AACnC,iBAAW,QAAQ;AACnB,aAAO,QAAQ,EAAE,QAAQ,CAAC,EAAE;AAC5B,sBAAgB,QAAQ,OAAO;AAC/B,mBAAa,QAAQ,KAAK;AAE1B,gBAAU,QAAQ;AAClB,UAAI,aAAa,SAAS,MAAM;AAC/B,qBAAa,MAAM;MACnB;AAAA,IACF;AAGA,UAAM,cAAc,CAAC,MAAc;AAClC,UAAI,CAAC,WAAW;AAAO,eAAM;AAE7B,YAAM,SAAS,EAAE,QAAQ,CAAC,EAAE,QAAQ,OAAO;AAC3C,YAAM,gBAAgB,gBAAgB,QAAQ;AAE9C,YAAM,aAAaA,oBAAI;AACvB,YAAM,kBAAkB,WAAW;AAEnC,YAAM,gBAAgB,WAAW,QAAQ;AACzC,qBAAe,QAAQ,KAAK,IAAI,GAAG,KAAK,IAAI,eAAe,aAAa,CAAC;AAGzE,YAAM,SAAS,EAAE,QAAQ,CAAC,EAAE;AAC5B,YAAM,cAAc,SAAS,OAAO,QAAQ,gBAAgB;AAC5D,YAAM,kBAAkB,WAAW,QAAQ,cAAc;AACzD,YAAM,gBAAgB,cAAc;AAGpC,kBAAY,QAAQ,WAAW,aAAa;AAC5C,uBAAiB,QAAQ,gBAAgB;AACzC,2BAAqB,QAAQ,gBAAgB;AAG7C,YAAM,MAAM,KAAK;AACjB,UAAI,MAAM,aAAa,QAAQ,KAAK;AACnC,YAAI,aAAa,SAAS,MAAM;AAC/BA,wBAAG,MAAC,MAAM,OAAM,wCAAuC,YAAY,eAAe,GAAG;AACrF,+BAAqB,QAAQ;AAC7B,uBAAa,MAAM,KAAK,aAAa;AAAA,QACrC;AACD,qBAAa,QAAQ;AAAA,MACrB;AAAA,IACF;AAGA,UAAM,aAAa,MAAA;AAClB,UAAI,CAAC,WAAW;AAAO,eAAM;AAG7B,YAAM,aAAaA,oBAAI;AACvB,YAAM,kBAAkB,WAAW;AACnC,YAAM,kBAAkB,WAAW,QAAQ,cAAc;AACzD,YAAM,iBAAiB,eAAe,QAAQ,kBAAkB,KAAK;AAErE,UAAI,aAAa,SAAS,MAAM;AAC/BA,4BAAI,MAAM,OAAM,wCAAuC,gBAAgB,qBAAqB,OAAO,GAAG;AACtG,qBAAa,MAAM,KAAK,qBAAqB,KAAK;AAClD,qBAAa,MAAM;MACnB;AAED,uBAAiB,QAAQ,gBAAgB;AACzC,kBAAY,QAAQ,WAAW,aAAa;AAG5C,iBAAW,QAAQ;AACnB,gBAAU,QAAQ;AAAA,IACnB;AAWA,UAAM,eAAe,CAAC,MAAmB;AACxC,UAAI,CAAC,WAAW,OAAO;AACtB,uBAAe,QAAQ,EAAE,OAAO;AAAA,MAChC;AAAA,IACF;AAGA,UAAM,eAAe,CAAC,WAAe;AACpC,mBAAa,QAAQ;AAAA,IACtB;AAkCA,UAAM,SAAS,MAAA;AACdA,oBAAAA,MAAI,MAAM,OAAM,wCAAuC,QAAQ;AAAA,IAEhE;AAEA,UAAM,UAAU,MAAA;AACfA,oBAAAA,MAAI,MAAM,OAAM,wCAAuC,MAAM;AAAA,IAC9D;AAGAC,kBAAAA,UAAU,MAAA;AACT;AACA,UAAI,aAAa,SAAS,MAAM;AAC/BD,sBAAAA,MAAI,MAAM,SAAQ,wCAAuC,gBAAgB;AAAA,MACzE;AAAA,IACF,CAAC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACnbF,GAAG,WAAWE,SAAe;"}