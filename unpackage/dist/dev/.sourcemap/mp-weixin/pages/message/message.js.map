{"version":3,"file":"message.js","sources":["pages/message/message.uvue","pages/message/message.uvue?type=page"],"sourcesContent":["<template>\r\n\t<view class=\"container\">\r\n\t\t<view class=\"data-strip\">\r\n\t\t\t<view class=\"rili\"><l-date-strip :format=\"customFormat\" :minDate=\"minDate\" :maxDate=\"maxDate\" height=\"70\"\r\n\t\t\t\t\tshape=\"circle\"></l-date-strip></view>\r\n\t\t\t<image class=\"down\" @click=\"ShowCalendar\" src=\"/static/down.png\" />\r\n\t\t</view>\r\n\t\t<view class=\"content-box\">\r\n\t\t\t<view class=\"sub-nav\">\r\n\t\t\t\t<view class=\"today\">\r\n\t\t\t\t\t<text>{{today}}</text>\r\n\t\t\t\t\t<image class=\"down\" src=\"/static/down.png\" />\r\n\t\t\t\t\t<text> | </text>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"select\">\r\n\t\t\t\t\t<text v-for=\"(tab, index) in tabs\" :key=\"index\" class=\"select-item\"\r\n\t\t\t\t\t\t:class=\"{ active: activeTab === index }\" @click=\"changeTab(index)\">\r\n\t\t\t\t\t\t{{ tab.label }}\r\n\t\t\t\t\t</text>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t\t<view class=\"tab-content\">\r\n\t\t\t\t<view v-for=\"(event, index) in getFilteredEvents()\" :key=\"index\" class=\"tab-pane\"\r\n\t\t\t\t\t@click=\"msgDetail(event)\">\r\n\t\t\t\t\t<view class=\"item-content\">\r\n\t\t\t\t\t\t<image class=\"item-icon\" mode=\"aspectFit\"\r\n\t\t\t\t\t\t\t:src=\"event.type === 'human' ? '/static/people.png' : '/static/mobile.png'\" />\r\n\t\t\t\t\t\t<view class=\"info\">\r\n\t\t\t\t\t\t\t<text>{{ event.type === 'human' ? '人形侦测' : '移动侦测' }}</text>\r\n\t\t\t\t\t\t\t<text>{{ event.time }}</text>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<image class=\"item-img\" mode=\"aspectFit\" src=\"/static/vedio.png\" />\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t\t<fui-bottom-popup :visible=\"showCalendar\" @close=\"hideCalendar\">\r\n\t\t\t<view class=\"calendar-box\">\r\n\t\t\t\t<l-daily-punch :signedDates=\"checkIns\" @select=\"select\" @panelChange=\"change\"\r\n\t\t\t\t\t:dayHeight=\"60\"></l-daily-punch>\r\n\t\t\t\t<button class=\"btn-chanel-box\" @click=\"hideCalendar\">\r\n\t\t\t\t\t取消\r\n\t\t\t\t</button>\r\n\t\t\t</view>\r\n\t\t</fui-bottom-popup>\r\n\r\n\t</view>\r\n</template>\r\n\r\n<script lang=\"uts\" setup>\r\n\timport { ref, onMounted, computed } from 'vue'\r\n\timport { dayuts } from '@/uni_modules/lime-dayuts';\r\n\timport { LDay, LYearMonth } from '@/uni_modules/lime-daily-punch'\r\n\timport { DateStriPDay } from '@/uni_modules/lime-date-strip';\r\n\tconst checkIns = ref(['2025-07-07', '2025-07-08', '2025-07-09'])\r\n\tconst today = ref(dayuts().format('MM-DD'))\r\n\tconst showCalendar = ref<boolean>(false)\r\n\r\n\tconst activeTab = ref(0)\r\n\tconst minDate : number = new Date(2022, 0, 10).getTime()\r\n\tconst maxDate : number = new Date(2025, 7, 12).getTime()\r\n\r\n\tconst customFormat = (day : DateStriPDay) : DateStriPDay => {\r\n\t\tconst { date } = day;\r\n\t\tconst year = date.getFullYear();\r\n\t\tconst month = date.getMonth() + 1;\r\n\t\tconst curDate = date.getDate();\r\n\r\n\t\tday.prefix = '' //不显示星期\r\n\r\n\t\tconst map = new Map<number, string>([\r\n\t\t\t[1, '初一'],\r\n\t\t\t[2, '初二'],\r\n\t\t\t[3, '初三'],\r\n\t\t\t[14, '情人节'],\r\n\t\t\t[15, '元宵节'],\r\n\t\t])\r\n\t\tif (map.has(curDate)) {\r\n\t\t\tday.suffix = 'true';\r\n\t\t}\r\n\r\n\t\treturn day;\r\n\t};\r\n\r\n\t//构造函数的方式来定义event时间类型\r\n\tclass SecurityEvent {\r\n\t\tid : number;\r\n\t\ttype : string;\r\n\t\ttime : string;\r\n\t\tlocation : string;\r\n\r\n\t\tconstructor(id : number, type : string, time : string, location : string) {\r\n\t\t\tthis.id = id;\r\n\t\t\tthis.type = type;\r\n\t\t\tthis.time = time;\r\n\t\t\tthis.location = location;\r\n\t\t}\r\n\t}\r\n\r\n\t//定义tab标签的类型\r\n\tclass Tab {\r\n\t\tlabel : string;\r\n\t\ttype : string;\r\n\r\n\t\tconstructor(label : string, type : string) {\r\n\t\t\tthis.label = label;\r\n\t\t\tthis.type = type;\r\n\t\t}\r\n\t}\r\n\r\n\tconst tabs = ref<Tab[]>([\r\n\t\t{ label: '全部类型', type: 'all' },\r\n\t\t{ label: '人形侦测', type: 'human' },\r\n\t\t{ label: '移动侦测', type: 'motion' }\r\n\t])\r\n\r\n\tconst events = ref<SecurityEvent[]>([\r\n\t\tnew SecurityEvent(1, 'human', '15:29', '前门走廊'),\r\n\t\tnew SecurityEvent(2, 'motion', '14:45', '车库入口'),\r\n\t\tnew SecurityEvent(3, 'human', '13:20', '后花园'),\r\n\t\tnew SecurityEvent(4, 'motion', '11:05', '侧门通道')\r\n\t])\r\n\r\n\t//执行筛选数据的方法\r\n\tconst getFilteredEvents = () : SecurityEvent[] => {\r\n\t\tif (activeTab.value == 0) return [...events.value];\r\n\t\tconst selectedType = tabs.value[activeTab.value].type;\r\n\t\treturn events.value.filter(event => event.type === selectedType);\r\n\t}\r\n\r\n\t//切换tab\r\n\tconst changeTab = (index : number) => {\r\n\t\tactiveTab.value = index\r\n\t}\r\n\r\n\t//选择日期\r\n\tconst select = (day : LDay) => {\r\n\t\ttoday.value = dayuts(day.fullDate).format('MM-DD')\r\n\t\tuni.__f__('log','at pages/message/message.uvue:139',today.value)\r\n\t\tif (day.isToday) {\r\n\t\t\tuni.__f__('log','at pages/message/message.uvue:141','今天')\r\n\t\t}\r\n\t\tshowCalendar.value = false\r\n\t}\r\n\r\n\tconst msgDetail = (e : SecurityEvent) => {\r\n\t\tuni.navigateTo({\r\n\t\t\turl: '/pages/message/messageDetail/messageDetail?id=' + e.id\r\n\t\t})\r\n\t}\r\n\r\n\tconst change = (res : LYearMonth) => {\r\n\t\tuni.__f__('log','at pages/message/message.uvue:153','res', res)\r\n\t}\r\n\r\n\tconst ShowCalendar = () => {\r\n\t\tshowCalendar.value = !showCalendar.value\r\n\t}\r\n\r\n\tconst hideCalendar = () => {\r\n\t\tshowCalendar.value = false\r\n\t}\r\n</script>\r\n\r\n\r\n\r\n<style lang=\"scss\" scoped>\r\n\t.container {\r\n\t\twidth: 100%;\r\n\t\theight: 100%;\r\n\t\tposition: relative;\r\n\t\tbackground-color: #f3f3f3;\r\n\r\n\t\t.data-strip {\r\n\t\t\twidth: 100%;\r\n\t\t\tdisplay: flex;\r\n\t\t\tflex-direction: row;\r\n\t\t\talign-items: center;\r\n\t\t\tbackground-color: #fff;\r\n\t\t\tpadding-right: 20rpx;\r\n\r\n\t\t\t.rili {\r\n\t\t\t\tflex: 4;\r\n\t\t\t}\r\n\r\n\t\t\t.down {\r\n\t\t\t\twidth: 32rpx;\r\n\t\t\t\theight: 32rpx;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\r\n\t\t.content-box {\r\n\t\t\tpadding: 30rpx 20rpx;\r\n\r\n\t\t\t.sub-nav {\r\n\t\t\t\tdisplay: flex;\r\n\t\t\t\tflex-direction: row;\r\n\t\t\t\talign-items: center;\r\n\r\n\t\t\t\t.today {\r\n\t\t\t\t\twidth: 120rpx;\r\n\t\t\t\t\t@extend .sub-nav;\r\n\t\t\t\t\talign-items: center;\r\n\r\n\t\t\t\t\t.down {\r\n\t\t\t\t\t\twidth: 25rpx;\r\n\t\t\t\t\t\theight: 25rpx;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\t.select {\r\n\t\t\t\t\t@extend .sub-nav;\r\n\t\t\t\t\tmargin-left: 10rpx;\r\n\r\n\t\t\t\t\t.select-item {\r\n\t\t\t\t\t\tflex: 1;\r\n\t\t\t\t\t\tbackground-color: #fff;\r\n\t\t\t\t\t\tcolor: #333;\r\n\t\t\t\t\t\tpadding: 10rpx 20rpx;\r\n\t\t\t\t\t\tborder-radius: 5rpx;\r\n\t\t\t\t\t\tmargin: 0 5rpx;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t.active {\r\n\t\t\t\t\t\tcolor: #fff;\r\n\t\t\t\t\t\tbackground-color: #1296db;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t.tab-content {\r\n\t\t\t\tdisplay: flex;\r\n\t\t\t\tflex-direction: column;\r\n\t\t\t\talign-items: center;\r\n\t\t\t\tmargin-top: 20rpx;\r\n\r\n\t\t\t\t.tab-pane {\r\n\t\t\t\t\tdisplay: flex;\r\n\t\t\t\t\tflex-direction: row;\r\n\t\t\t\t\talign-items: center;\r\n\t\t\t\t\tjustify-content: space-between;\r\n\t\t\t\t\tbackground-color: #fff;\r\n\t\t\t\t\tborder-radius: 20rpx;\r\n\t\t\t\t\tpadding: 20rpx;\r\n\t\t\t\t\twidth: 100%;\r\n\t\t\t\t\tmargin-bottom: 30rpx;\r\n\r\n\t\t\t\t\t.item-content {\r\n\t\t\t\t\t\tdisplay: flex;\r\n\t\t\t\t\t\tflex-direction: row;\r\n\t\t\t\t\t\talign-items: center;\r\n\r\n\t\t\t\t\t\t.item-icon {\r\n\t\t\t\t\t\t\twidth: 60rpx;\r\n\t\t\t\t\t\t\theight: 60rpx;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t.info {\r\n\t\t\t\t\t\t\tmargin-left: 20rpx;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t.item-img {\r\n\t\t\t\t\t\twidth: 100rpx;\r\n\t\t\t\t\t\theight: 60rpx\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\r\n\t\t}\r\n\r\n\t\t.calendar-box {\r\n\t\t\twidth: 100%;\r\n\t\t\tbackground-color: #fff;\r\n\r\n\t\t\t.btn-chanel-box {\r\n\t\t\t\tposition: absolute;\r\n\t\t\t\twidth: 85%;\r\n\t\t\t\tbottom: 45rpx;\r\n\t\t\t\tleft: 60rpx;\r\n\t\t\t\tborder-radius: 50rpx;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n</style>","import MiniProgramPage from '/Users/xyhc/Documents/veepai_uniappx/pages/message/message.uvue'\nwx.createPage(MiniProgramPage)"],"names":["ref","dayuts","uni"],"mappings":";;;;;;;;;;;;;;;;;;;;;AAsDC,UAAM,WAAWA,cAAAA,IAAI,CAAC,cAAc,cAAc,YAAY,CAAC;AAC/D,UAAM,QAAQA,cAAAA,IAAIC,oCAAAA,OAAQ,EAAC,OAAO,OAAO,CAAC;AAC1C,UAAM,eAAeD,kBAAa,KAAK;AAEvC,UAAM,YAAYA,kBAAI,CAAC;AACvB,UAAM,UAAmB,IAAI,KAAK,MAAM,GAAG,EAAE,EAAE;AAC/C,UAAM,UAAmB,IAAI,KAAK,MAAM,GAAG,EAAE,EAAE;AAE/C,UAAM,eAAe,CAAC,QAAkB;AAC/B,YAAA,OAAS,IAAG;AACP,WAAK,YAAc;AAClB,WAAK,SAAQ,IAAK;AAChC,YAAM,UAAU,KAAK;AAErB,UAAI,SAAS;AAEb,YAAM,MAAM,oBAAI,IAAoB;AAAA,QACnC,CAAC,GAAG,IAAI;AAAA,QACR,CAAC,GAAG,IAAI;AAAA,QACR,CAAC,GAAG,IAAI;AAAA,QACR,CAAC,IAAI,KAAK;AAAA,QACV,CAAC,IAAI,KAAK;AAAA,MACV,CAAA;AACD,UAAI,IAAI,IAAI,OAAO,GAAG;AACrB,YAAI,SAAS;AAAA,MACb;AAED,aAAO;AAAA,IACR;AAAA,IAGA,MAAM,cAAa;AAAA,MAMlB,YAAY,IAAa,MAAe,MAAe,UAAiB;AACvE,aAAK,KAAK;AACV,aAAK,OAAO;AACZ,aAAK,OAAO;AACZ,aAAK,WAAW;AAAA,MAChB;AAAA,IACD;AAaD,UAAM,OAAOA,cAAAA,IAAW;AAAA,MACvB,EAAE,OAAO,QAAQ,MAAM,MAAO;AAAA,MAC9B,EAAE,OAAO,QAAQ,MAAM,QAAS;AAAA,MAChC,EAAE,OAAO,QAAQ,MAAM,SAAU;AAAA,IACjC,CAAA;AAED,UAAM,SAASA,cAAAA,IAAqB;AAAA,MACnC,IAAI,cAAc,GAAG,SAAS,SAAS,MAAM;AAAA,MAC7C,IAAI,cAAc,GAAG,UAAU,SAAS,MAAM;AAAA,MAC9C,IAAI,cAAc,GAAG,SAAS,SAAS,KAAK;AAAA,MAC5C,IAAI,cAAc,GAAG,UAAU,SAAS,MAAM;AAAA,IAC9C,CAAA;AAGD,UAAM,oBAAoB,MAAA;AACzB,UAAI,UAAU,SAAS;AAAG,eAAO,CAAC,GAAG,OAAO,KAAK;AACjD,YAAM,eAAe,KAAK,MAAM,UAAU,KAAK,EAAE;AACjD,aAAO,OAAO,MAAM,OAAO,WAAK;AAAI,eAAA,MAAM,SAAS;AAAA,MAAf,CAA2B;AAAA,IAChE;AAGA,UAAM,YAAY,CAAC,UAAc;AAChC,gBAAU,QAAQ;AAAA,IACnB;AAGA,UAAM,SAAS,CAAC,QAAU;AACzB,YAAM,QAAQC,2CAAO,IAAI,QAAQ,EAAE,OAAO,OAAO;AACjDC,oBAAG,MAAC,MAAM,OAAM,qCAAoC,MAAM,KAAK;AAC/D,UAAI,IAAI,SAAS;AAChBA,sBAAAA,MAAI,MAAM,OAAM,qCAAoC,IAAI;AAAA,MACxD;AACD,mBAAa,QAAQ;AAAA,IACtB;AAEA,UAAM,YAAY,CAAC,MAAiB;AACnCA,oBAAAA,MAAI,WAAW;AAAA,QACd,KAAK,mDAAmD,EAAE;AAAA,MAC1D,CAAA;AAAA,IACF;AAEA,UAAM,SAAS,CAAC,QAAgB;AAC/BA,oBAAG,MAAC,MAAM,OAAM,qCAAoC,OAAO,GAAG;AAAA,IAC/D;AAEA,UAAM,eAAe,MAAA;AACpB,mBAAa,QAAQ,CAAC,aAAa;AAAA,IACpC;AAEA,UAAM,eAAe,MAAA;AACpB,mBAAa,QAAQ;AAAA,IACtB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AChKD,GAAG,WAAW,eAAe;"}