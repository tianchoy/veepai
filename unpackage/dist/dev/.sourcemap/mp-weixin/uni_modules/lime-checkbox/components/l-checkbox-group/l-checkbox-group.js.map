{"version":3,"file":"l-checkbox-group.js","sources":["uni_modules/lime-checkbox/components/l-checkbox-group/l-checkbox-group.uvue","/Users/xyhc/Documents/veepai_uniappx/uni_modules/lime-checkbox/components/l-checkbox-group/l-checkbox-group.uvue?type=component"],"sourcesContent":["<template>\r\n\t<view class=\"l-checkbox-group\" :class=\"'l-checkbox-group--'+ direction\">\r\n\t\t<slot />\r\n\t</view>\r\n</template>\r\n<script lang=\"uts\" setup>\r\n\t/**\r\n\t * CheckboxGroup 复选框组容器\r\n\t * @description 用于管理多个 Checkbox 组件，支持整体禁用、最大选择和布局控制\r\n\t * <br> 插件类型：LCheckboxGroupComponentPublicInstance \r\n\t * @tutorial https://ext.dcloud.net.cn/plugin?name=lime-checkbox-group\r\n\t * \r\n\t * @property {Boolean} disabled 是否禁用组件\r\n\t * @property {Boolean} readonly 是否只读组件\r\n\t * @property {Number} max 支持最多选中的数量\r\n\t * @property {String|Number} name 唯一标识\r\n\t * @property {String|Number} value 选中值\r\n\t * @property {'small' | 'medium' | 'large'} size 组件统一尺寸\r\n\t * @value small\r\n\t * @value medium\r\n\t * @value large\r\n\t * @property {String} direction 布局方向\r\n\t * @value horizontal 水平\r\n\t * @value vertical 垂直\r\n\t * @property {String} icon = [square|round|circle]  形状\r\n\t * @value circle\ticon 圆形\r\n\t * @value line\t    icon 线\r\n\t * @value rectangle\ticon 方形\r\n\t * @value dot\ticon 点状\r\n\t * @property {string} fontSize 文本统一字号\r\n\t * @property {string} iconSize 图标统一尺寸\r\n\t * @property {string} checkedColor 选中状态主题色\r\n\t * @property {string} iconBgColor 图标背景色\r\n\t * @property {string} iconBorderColor 图标边框色\r\n\t * @property {string} iconDisabledColor 禁用图标颜色\r\n\t * @property {string} iconDisabledBgColor 禁用背景色\r\n\t * @event {Function} change \r\n\t */\r\n\t\r\n\timport { CheckboxGroupProps } from './type';\r\n\timport { CheckboxChangeOptions } from '../l-checkbox/type';\r\n\timport { setCheckAllStatus } from './utils';\r\n\t\r\n\tconst emit = defineEmits(['update:value', 'update:modelValue', 'change']);\r\n\tconst props = withDefaults(defineProps<CheckboxGroupProps>(), {\r\n\t\tdisabled: false,\r\n\t\treadonly: false,\r\n\t\tsize: 'medium',\r\n\t\tdirection: 'horizontal',\r\n\t\ticon: 'rectangle'\r\n\t})\r\n\t\r\n\tconst _innerValue = ref(props.defaultValue ?? [])\r\n\tconst innerValue = computed({\r\n\t\tset(value: any[]){\r\n\t\t\t_innerValue.value = value\r\n\t\t\temit('change', value)\r\n\t\t\temit('update:value', value)\r\n\t\t\temit('update:modelValue', value)\r\n\t\t},\r\n\t\tget(): any[]{\r\n\t\t\treturn props.value ?? props.modelValue ?? _innerValue.value\r\n\t\t},\r\n\t} as WritableComputedOptions<any[]>)\r\n\t\r\n\tconst checkedSet = computed(():Set<any>=>{\r\n\t\tconst set = new Set<any>()\r\n\t\tif (Array.isArray(innerValue.value)) {\r\n\t\t\tinnerValue.value.forEach(item => {\r\n\t\t\t\tset.add(item)\r\n\t\t\t})\r\n\t\t}\r\n\t\treturn set\r\n\t});\r\n\tconst children = reactive<LCheckboxComponentPublicInstance[]>([]);\r\n\t// @ts-ignore\r\n\tconst checkAllStatus = setCheckAllStatus(children, innerValue, checkedSet);\r\n\tconst maxExceeded = computed(():boolean => {\r\n\t\treturn props.max != null && innerValue.value.length == props.max;\r\n\t});\r\n\r\n\tconst manageChildInList = (child: LCheckboxComponentPublicInstance, shouldAdd: boolean) => {\r\n\t\tconst index = children.indexOf(child);\r\n\t\tif(shouldAdd) {\r\n\t\t\tif(index != -1) return\r\n\t\t\tchildren.push(child)\r\n\t\t} else {\r\n\t\t\tif(index == -1) return\r\n\t\t\tchildren.splice(index, 1);\r\n\t\t}\r\n\t}\r\n\tconst handleCheckboxChange = (item: CheckboxChangeOptions) => {\r\n\t\tconst currentValue = item.value;\r\n\t\tif(Array.isArray(innerValue.value)) {\r\n\t\t\tif(currentValue == null) return;\r\n\t\t\tconst val = [...innerValue.value];\r\n\t\t\tif (item.checked) {\r\n\t\t\t\tval.push(currentValue);\r\n\t\t\t} else {\r\n\t\t\t\tconst i = val.indexOf(currentValue);\r\n\t\t\t\tval.splice(i, 1);\r\n\t\t\t}\r\n\t\t\tinnerValue.value = val\r\n\t\t} else {\r\n\t\t\tuni.__f__('warn','at uni_modules/lime-checkbox/components/l-checkbox-group/l-checkbox-group.uvue:105',`CheckboxGroup Warn: \\`value\\` must be an array, instead of ${typeof innerValue.value}`);\r\n\t\t}\r\n\t}\r\n\tconst getAllCheckboxValue = () : any[] => {\r\n\t\tconst arr:any[] = []\r\n\t\tfor (let i = 0, len = children.length; i < len; i++) {\r\n\t\t\tconst item = children[i];\r\n\t\t\tconst value = item.value ?? item.name //?? item.$.uid;\r\n\t\t\tif (item.checkAll) continue;\r\n\t\t\tif (value == null) continue;\r\n\t\t\tif(arr.includes(value)) continue;\r\n\t\t\tarr.push(value)\r\n\t\t\tif (maxExceeded.value) break;\r\n\t\t}\r\n\t\treturn arr\r\n\t};\r\n\tconst toggleAllCheckboxValues = () : any[] => {\r\n\t\tconst arr:any[] = []\r\n\t\t\r\n\t\tfor (let i = 0, len = children.length; i < len; i++) {\r\n\t\t\tconst item = children[i];\r\n\t\t\tconst value = item.value ?? item.name;\r\n\t\t\t\r\n\t\t\tif (item.checkAll) continue;\r\n\t\t\tif (value == null) continue;\r\n\t\t\tif(!checkedSet.value.has(value)) {\r\n\t\t\t\tarr.push(value)\r\n\t\t\t};\r\n\t\t\tif (maxExceeded.value) break;\r\n\t\t}\r\n\t\treturn arr;\r\n\t};\r\n\tconst onCheckAllChange = (checked: boolean) => {\r\n\t\tconst value = checked ? getAllCheckboxValue() : [];\r\n\t\tinnerValue.value = value;\r\n\t}\r\n\t\r\n\tconst onCheckedChange = (item: CheckboxChangeOptions) => {\r\n\t\tif(item.checkAll) {\r\n\t\t\tonCheckAllChange(item.checked);\r\n\t\t} else {\r\n\t\t\thandleCheckboxChange(item);\r\n\t\t}\r\n\t}\r\n\t\r\n\tconst toggleAll = (checked : boolean) => {\r\n\t\tconst value = checked ? getAllCheckboxValue() : toggleAllCheckboxValues();\r\n\t\tinnerValue.value = value\r\n\t}\r\n\t\r\n\t\r\n\tdefineExpose({\r\n\t\ttoggleAll\r\n\t})\r\n\t\r\n\tprovide('limeCheckboxGroup', props)\r\n\tprovide('limeCheckboxGroupValue', innerValue)\r\n\tprovide('limeCheckboxGroupStatus', checkAllStatus)\r\n\tprovide('limeCheckboxGroupCheckedSet', checkedSet)\r\n\tprovide('limeCheckboxGroupManageChildInList', manageChildInList)\r\n\tprovide('limeCheckboxGroupOnCheckedChange', onCheckedChange)\r\n\t// const optionList = getOptions(props, children);\r\n\t\r\n</script>\r\n<style lang=\"scss\">\r\n\t.l-checkbox-group {\r\n\t\tflex-direction: row;\r\n\t}\r\n\r\n\t.l-checkbox-group--vertical {\r\n\t\tflex-direction: column;\r\n\t}\r\n</style>","import Component from '/Users/xyhc/Documents/veepai_uniappx/uni_modules/lime-checkbox/components/l-checkbox-group/l-checkbox-group.uvue'\nwx.createComponent(Component)"],"names":["ref","computed","_b","_a","reactive","setCheckAllStatus","uni","provide","Component"],"mappings":"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"}