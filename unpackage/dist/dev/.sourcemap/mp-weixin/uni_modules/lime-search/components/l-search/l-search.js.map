{"version":3,"file":"l-search.js","sources":["uni_modules/lime-search/components/l-search/l-search.uvue","/Users/xyhc/Documents/veepai_uniappx/uni_modules/lime-search/components/l-search/l-search.uvue?type=component"],"sourcesContent":["<template>\n\t<view class=\"l-search\" :style=\"[lStyle]\">\n\t\t<slot name=\"left\"></slot>\n\t\t<view class=\"l-search__content\" :style=\"[contextStyle]\" :class=\"contentClass\">\n\n\t\t\t<view class=\"l-search__icon\">\n\n\t\t\t\t<slot name=\"left-icon\">\n\t\t\t\t\t<l-icon class=\"l-search__icon\" size=\"42rpx\" :color=\"iconColor\" :name=\"leftIcon\" v-if=\"leftIcon.length > 0\" />\n\t\t\t\t</slot>\n\n\t\t\t</view>\n\n\t\t\t<input  \n\t\t\t\tname=\"input\"\n\t\t\t\tclass=\"l-search__keyword\"\n\t\t\t\t:style=\"[inputStyle, center ? 'text-align:center':'']\"\n\t\t\t\t:type=\"type\"\n\t\t\t\t:maxlength=\"maxlength\"\n\t\t\t\t:disabled=\"disabled\"\n\t\t\t\t:focus=\"focus\"\n\t\t\t\t:value=\"searchValue\"\n\t\t\t\t:confirm-type=\"confirmType\"\n\t\t\t\t:confirm-hold=\"confirmHold\"\n\t\t\t\t:cursor=\"cursor\"\n\t\t\t\t:cursor-color=\"cursorColor\"\n\t\t\t\t:adjust-position=\"adjustPosition\"\n\t\t\t\t:always-embed=\"alwaysEmbed\"\n\t\t\t\t:selection-start=\"selectionStart\"\n\t\t\t\t:selection-end=\"selectionEnd\"\n\t\t\t\t:hold-keyboard=\"holdKeyboard\"\n\t\t\t\t:cursor-spacing=\"cursorSpacing\"\n\t\t\t\t:placeholder=\"placeholder\"\n\t\t\t\t:placeholder-style=\"(placeholderStyle ?? ' ') +  (center ? 'text-align:center':'')\"\n\t\t\t\tplaceholder-class=\"l-search__placeholder\"\n\t\t\t\t@input=\"handleInput\"\n\t\t\t\t@focus=\"handleFocus\"\n\t\t\t\t@blur=\"handleBlur\"\n\t\t\t\t@confirm=\"handleConfirm\"/>\n\t\t\t<view\n\t\t\t\tclass=\"l-search__clear\"\n\t\t\t\t:class=\"{\n\t\t\t\t\t'l-search__clear--right': $slots['right-icon'] != null\n\t\t\t\t}\"\n\t\t\t\tv-if=\"clearable\"\n\t\t\t\tv-show=\"searchValue.length>0\"\n\t\t\t\t@click=\"handleClear\"\n\t\t\t\taria-role=\"button\"\n\t\t\t\taria-label=\"清除\">\n\n\t\t\t\t<view class=\"l-search__icon l-search__clear-icon\">\n\n\t\t\t\t<l-icon class=\"l-search__icon l-search__clear-icon\" name=\"close-circle-filled\" size=\"48rpx\" :color=\"clearIconColor\"  />\n\n\t\t\t\t</view>\n\n\t\t\t</view>\t\n\t\t\t<slot name=\"right-icon\"/>\n\t\t</view>\n\t\t<slot name=\"action\">\n\t\t\t<text class=\"l-search__action\" :class=\"{'l-search__action--focused': focused}\" @click=\"handleActionClick\" v-if=\"action != null\"> {{action}}</text>\n\t\t</slot>\n\t</view>\n</template>\n<script lang=\"uts\" setup>\n\timport { SearchProps } from './type';\n\timport { characterLimit } from '@/uni_modules/lime-shared/characterLimit';\n\t\n\tconst emit = defineEmits(['change', 'blur', 'clear', 'focus', 'submit', 'action-click'])\n\tconst props = withDefaults(defineProps<SearchProps>(), {\n\t\tadjustPosition: true,\n\t\talwaysEmbed: false,\n\t\tcenter: false,\n\t\tclearable: true,\n\t\tconfirmHold: false,\n\t\tconfirmType: 'search',\n\t\t// cursor: 0,\n\t\tcursorSpacing: 0,\n\t\tdisabled: false,\n\t\tfocus: false,\n\t\tholdKeyboard: false,\n\t\tleftIcon: 'search',\n\t\tmaxlength: -1,\n\t\tselectionEnd: -1,\n\t\tselectionStart: -1,\n\t\tshape: 'square',\n\t\ttype: 'text',\n\t})\n\t\n\tconst focused = ref(props.focus)\n\tconst modelValue = defineModel({type: String, default: ''})\n\tconst searchValue = computed({\n\t\tset(value: string) {\n\t\t\tmodelValue.value = value;\n\t\t\temit('change', value)\n\t\t},\n\t\tget():string {\n\t\t\treturn props.value ?? modelValue.value\n\t\t}\n\t} as WritableComputedOptions<string>)\n\t\n\tconst contentClass = computed(():Map<string, any>=>{\n\t\tconst cls = new Map<string, any>()\n\t\t// cls.set(focused.value ? 'is-focused': 'not-focused', true)\n\t\tcls.set('l-search__content--focused', focused.value)\n\t\tcls.set('l-search__content--center', props.center)\n\t\tcls.set('l-search__content--' + props.shape, true)\n\t\treturn cls\n\t})\n\t\n\tconst contextStyle = computed(():Map<string, any>=>{\n\t\tconst style = new Map<string, any>()\n\t\tif(props.padding != null) {\n\t\t\tstyle.set('padding', props.padding!)\n\t\t}\n\t\tif(props.radius != null) {\n\t\t\tstyle.set('border-radius', props.radius!)\n\t\t}\n\t\tif(props.height != null) {\n\t\t\tstyle.set('height', props.height!)\n\t\t}\n\t\tif(props.bgColor != null) {\n\t\t\tstyle.set('background', props.bgColor!)\n\t\t}\n\t\treturn style\n\t})\n\t\n\tconst inputStyle = computed(():Map<string, any>=>{\n\t\tconst style = new Map<string, any>()\n\t\tif(props.fontSize != null) {\n\t\t\tstyle.set('font-size', props.fontSize!)\n\t\t}\n\t\tif(props.textColor != null) {\n\t\t\tstyle.set('color', props.textColor!)\n\t\t}\n\t\treturn style\n\t})\n\t\n\tconst handleInput = (e: UniInputEvent) => {\n\t\tlet { value } = e.detail;\n\t\tconst { maxlength, maxcharacter } = props;\n\t\tif(maxcharacter != null && maxcharacter > 0) {\n\t\t\tconst { characters } = characterLimit('maxcharacter', value, maxcharacter)\n\t\t\tvalue = characters;\n\t\t} \n\t\t// else if(maxlength > 0) {\n\t\t// \tconst { characters } = characterLimit('maxlength', value, maxlength)\n\t\t// \tvalue = characters;\n\t\t// }\n\t\tsearchValue.value = value\n\t}\n\tconst handleClear = (_e: UniPointerEvent) => {\n\t\tsearchValue.value = '';\n\t\tfocused.value = true\n\t\temit('clear')\n\t}\n\tconst handleFocus = (e: UniInputFocusEvent) => {\n\t\tconst { value } = e.detail;\n\t\tfocused.value = true\n\t\temit('focus', value)\n\t}\n\tconst handleBlur = (e: UniInputBlurEvent) => {\n\t\tconst { value } = e.detail;\n\t\tfocused.value = false\n\t\temit('blur', value)\n\t}\n\tconst handleConfirm = (e: UniInputConfirmEvent) => {\n\t\tconst { value } = e.detail;\n\t\temit('submit', value)\n\t}\n\tconst handleActionClick = (_e: UniPointerEvent) => {\n\t\temit('action-click')\n\t}\n</script>\n<style lang=\"scss\">\n\t@import './index';\n</style>\n","import Component from '/Users/xyhc/Documents/veepai_uniappx/uni_modules/lime-search/components/l-search/l-search.uvue'\nwx.createComponent(Component)"],"names":["ref","_useModel","computed","_a","characterLimit","Component"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAoEC,UAAM,OAAO;AACb,UAAM,QAAQ;AAoBd,UAAM,UAAUA,cAAAA,IAAI,MAAM,KAAK;AAC/B,UAAM,aAAaC,cAAAA,SAAW,SAAA,YAA4B;AAC1D,UAAM,cAAcC,cAAAA,SAAS;AAAA,MAC5B,IAAI,OAAa;AAChB,mBAAW,QAAQ;AACnB,aAAK,UAAU,KAAK;AAAA,MACpB;AAAA,MACD,MAAG;;AACF,gBAAOC,MAAA,MAAM,0CAAS,WAAW;AAAA,MAClC;AAAA,IACmC,CAAA;AAEpC,UAAM,eAAeD,cAAAA,SAAS,MAAA;AAC7B,YAAM,MAAM,oBAAI;AAEhB,UAAI,IAAI,8BAA8B,QAAQ,KAAK;AACnD,UAAI,IAAI,6BAA6B,MAAM,MAAM;AACjD,UAAI,IAAI,wBAAwB,MAAM,OAAO,IAAI;AACjD,aAAO;AAAA,IACR,CAAC;AAED,UAAM,eAAeA,cAAAA,SAAS,MAAA;AAC7B,YAAM,QAAQ,oBAAI;AAClB,UAAG,MAAM,WAAW,MAAM;AACzB,cAAM,IAAI,WAAW,MAAM,OAAQ;AAAA,MACnC;AACD,UAAG,MAAM,UAAU,MAAM;AACxB,cAAM,IAAI,iBAAiB,MAAM,MAAO;AAAA,MACxC;AACD,UAAG,MAAM,UAAU,MAAM;AACxB,cAAM,IAAI,UAAU,MAAM,MAAO;AAAA,MACjC;AACD,UAAG,MAAM,WAAW,MAAM;AACzB,cAAM,IAAI,cAAc,MAAM,OAAQ;AAAA,MACtC;AACD,aAAO;AAAA,IACR,CAAC;AAED,UAAM,aAAaA,cAAAA,SAAS,MAAA;AAC3B,YAAM,QAAQ,oBAAI;AAClB,UAAG,MAAM,YAAY,MAAM;AAC1B,cAAM,IAAI,aAAa,MAAM,QAAS;AAAA,MACtC;AACD,UAAG,MAAM,aAAa,MAAM;AAC3B,cAAM,IAAI,SAAS,MAAM,SAAU;AAAA,MACnC;AACD,aAAO;AAAA,IACR,CAAC;AAED,UAAM,cAAc,CAAC,MAAgB;AAC9B,UAAA,QAAU,EAAE;AACkB,YAAK;YAAtB,eAAiB,MAAK;AACzC,UAAG,gBAAgB,QAAQ,eAAe,GAAG;AACpC,cAAA,aAAeE,4CAAAA,eAAe,gBAAgB,OAAO,YAAY,EAAC;AAC1E,gBAAQ;AAAA,MACR;AAKD,kBAAY,QAAQ;AAAA,IACrB;AACA,UAAM,cAAc,CAAC,OAAmB;AACvC,kBAAY,QAAQ;AACpB,cAAQ,QAAQ;AAChB,WAAK,OAAO;AAAA,IACb;AACA,UAAM,cAAc,CAAC,MAAqB;AACjC,YAAA,QAAU,EAAE;AACpB,cAAQ,QAAQ;AAChB,WAAK,SAAS,KAAK;AAAA,IACpB;AACA,UAAM,aAAa,CAAC,MAAoB;AAC/B,YAAA,QAAU,EAAE;AACpB,cAAQ,QAAQ;AAChB,WAAK,QAAQ,KAAK;AAAA,IACnB;AACA,UAAM,gBAAgB,CAAC,MAAuB;AACrC,YAAA,QAAU,EAAE;AACpB,WAAK,UAAU,KAAK;AAAA,IACrB;AACA,UAAM,oBAAoB,CAAC,OAAmB;AAC7C,WAAK,cAAc;AAAA,IACpB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC3KD,GAAG,gBAAgBC,SAAS;"}