{"version":3,"file":"index.js","sources":["uni_modules/lime-shared/characterLimit/index.ts"],"sourcesContent":["// @ts-nocheck\r\n/**\r\n * 计算字符串字符的长度并可以截取字符串。\r\n * @param char 传入字符串（maxcharacter条件下，一个汉字表示两个字符）\r\n * @param max 规定最大字符串长度\r\n * @returns 当没有传入maxCharacter/maxLength 时返回字符串字符长度，当传入maxCharacter/maxLength时返回截取之后的字符串和长度。\r\n */\r\nexport type CharacterLengthResult = {\r\n\tlength : number;\r\n\tcharacters : string;\r\n}\r\n// #ifdef APP-ANDROID\r\ntype ChartType = any\r\n// #endif\r\n// #ifndef APP-ANDROID\r\ntype ChartType = string | number\r\n// #endif\r\n\r\nexport function characterLimit(type : string, char : ChartType, max : number) : CharacterLengthResult {\r\n\tconst str = `${char}`;\r\n\r\n\tif (str.length == 0) {\r\n\t\treturn {\r\n\t\t\tlength: 0,\r\n\t\t\tcharacters: '',\r\n\t\t} as CharacterLengthResult\r\n\t}\r\n\r\n\tif (type == 'maxcharacter') {\r\n\t\tlet len = 0;\r\n\t\tfor (let i = 0; i < str.length; i += 1) {\r\n\t\t\tlet currentStringLength : number// = 0;\r\n\t\t\tconst code = str.charCodeAt(i)!\r\n\t\t\tif (code > 127 || code == 94) {\r\n\t\t\t\tcurrentStringLength = 2;\r\n\t\t\t} else {\r\n\t\t\t\tcurrentStringLength = 1;\r\n\t\t\t}\r\n\t\t\tif (len + currentStringLength > max) {\r\n\t\t\t\treturn {\r\n\t\t\t\t\tlength: len,\r\n\t\t\t\t\tcharacters: str.slice(0, i),\r\n\t\t\t\t} as CharacterLengthResult\r\n\t\t\t}\r\n\t\t\tlen += currentStringLength;\r\n\t\t}\r\n\t\treturn {\r\n\t\t\tlength: len,\r\n\t\t\tcharacters: str,\r\n\t\t} as CharacterLengthResult\r\n\t} else if (type == 'maxlength') {\r\n\t\tconst length = str.length > max ? max : str.length;\r\n\t\treturn {\r\n\t\t\tlength: length,\r\n\t\t\tcharacters: str.slice(0, length),\r\n\t\t} as CharacterLengthResult\r\n\t}\r\n\r\n\treturn {\r\n\t\tlength: str.length,\r\n\t\tcharacters: str,\r\n\t} as CharacterLengthResult\r\n};"],"names":[],"mappings":";SAkBgB,eAAe,MAAe,MAAkB,KAAY;AAC3E,QAAM,MAAM,GAAG,IAAI;AAEnB,MAAI,IAAI,UAAU,GAAG;AACpB,WAAO;AAAA,MACN,QAAQ;AAAA,MACR,YAAY;AAAA;EAEb;AAED,MAAI,QAAQ,gBAAgB;AAC3B,QAAI,MAAM;AACV,aAAS,IAAI,GAAG,IAAI,IAAI,QAAQ,KAAK,GAAG;AACvC,UAAI;AACJ,YAAM,OAAO,IAAI,WAAW,CAAC;AAC7B,UAAI,OAAO,OAAO,QAAQ,IAAI;AAC7B,8BAAsB;AAAA,MACtB,OAAM;AACN,8BAAsB;AAAA,MACtB;AACD,UAAI,MAAM,sBAAsB,KAAK;AACpC,eAAO;AAAA,UACN,QAAQ;AAAA,UACR,YAAY,IAAI,MAAM,GAAG,CAAC;AAAA;MAE3B;AACD,aAAO;AAAA,IACP;AACD,WAAO;AAAA,MACN,QAAQ;AAAA,MACR,YAAY;AAAA;EAEb,WAAU,QAAQ,aAAa;AAC/B,UAAM,WAAS,IAAI,SAAS,MAAM,MAAM,IAAI;AAC5C,WAAO;AAAA,MACN,QAAQ;AAAA,MACR,YAAY,IAAI,MAAM,GAAG,QAAM;AAAA;EAEhC;AAED,SAAO;AAAA,IACN,QAAQ,IAAI;AAAA,IACZ,YAAY;AAAA;AAEd;;"}