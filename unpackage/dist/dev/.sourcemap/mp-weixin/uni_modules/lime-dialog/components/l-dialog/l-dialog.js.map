{"version":3,"file":"l-dialog.js","sources":["uni_modules/lime-dialog/components/l-dialog/l-dialog.uvue","/Users/xyhc/Documents/veepai_uniappx/uni_modules/lime-dialog/components/l-dialog/l-dialog.uvue?type=component"],"sourcesContent":["<template>\r\n\t<l-popup \r\n\t\t:visible=\"innerValue\"\r\n\t\t:overlay=\"innerOptions.overlay ?? overlay\"\r\n\t\tbg-color=\"transparent\"\r\n\t\t:closeOnClickOverlay=\"innerOptions.closeOnClickOverlay ?? closeOnClickOverlay\"\r\n\t\t:preventScrollThrough=\"innerOptions.preventScrollThrough ?? preventScrollThrough\"\r\n\t\t:zIndex=\"zIndex ?? innerOptions.zIndex\"\r\n\t\t@change=\"overlayClick\"\r\n\t\tposition=\"center\">\r\n\t\t<view class=\"l-dialog\">\r\n\t\t\t<slot name=\"top\"></slot>\r\n\t\t\t<view class=\"l-dialog__close\" v-if=\"closeBtnProps\" @click=\"onClose('close')\">\r\n\t\t\t\t<l-icon class=\"l-dialog__close-icon\" name=\"close\" size=\"44rpx\"></l-icon>\r\n\t\t\t</view>\r\n\t\t\t<view class=\"l-dialog__content\">\r\n\t\t\t\t<slot name=\"title\">\r\n\t\t\t\t\t<text v-if=\"innerTitle != null\" class=\"l-dialog__header\">{{title ?? innerOptions.title}}</text>\r\n\t\t\t\t</slot>\r\n\t\t\t\t<view class=\"l-dialog__body\" :class=\"{'l-dialog__body--gap': innerTitle != null || $slots['title'] != null}\">\r\n\t\t\t\t\t<slot>\r\n\t\t\t\t\t\t<text class=\"l-dialog__body-text\">{{innerOptions.content ?? content}}</text>\r\n\t\t\t\t\t</slot>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t\t<slot name=\"middle\"></slot>\r\n\t\t\t<view class=\"l-dialog__footer\" :class=\"[\r\n\t\t\t\t'l-dialog__footer--' + innerButtonLayout, {\r\n\t\t\t\t'l-dialog__footer--column': innerButtonLayout == 'vertical',\r\n\t\t\t\t'l-dialog__footer--full': buttonVariant,\r\n\t\t\t}]\">\r\n\t\t\t\t<slot name=\"actions\">\r\n\t\t\t\t\t<template v-if=\"innerActions != null\">\r\n\t\t\t\t\t\t<l-button \r\n\t\t\t\t\t\t\tclass=\"l-dialog__button\"\r\n\t\t\t\t\t\t\t:class=\"[\r\n\t\t\t\t\t\t\t\t'l-dialog__button--' + innerButtonLayout,{\r\n\t\t\t\t\t\t\t\t\t'l-dialog__button--text': buttonVariant,\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t]\"\r\n\t\t\t\t\t\t\tv-for=\"(action, index) in innerActions!\" :key=\"index\"\r\n\t\t\t\t\t\t\t:style=\"[\r\n\t\t\t\t\t\t\t\tbuttonStyle,\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t'margin-left': innerButtonLayout == 'horizontal' && !buttonVariant && index > 0? '20rpx': '0',\r\n\t\t\t\t\t\t\t\t\t'margin-bottom': innerButtonLayout == 'vertical' && !buttonVariant && index > 0 ?'20rpx': '0',\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t]\"\r\n\t\t\t\t\t\t\t:block=\"action.getBoolean('block') ?? false\"\r\n\t\t\t\t\t\t\t:disabled=\"action.getBoolean('disabled') ?? false\"\r\n\t\t\t\t\t\t\t:data-extra=\"index\"\r\n\t\t\t\t\t\t\t:content=\"action.getString('content') ?? ''\"\r\n\t\t\t\t\t\t\t:icon=\"action.getString('icon') ?? ''\"\r\n\t\t\t\t\t\t\t:loading=\"action.getBoolean('loading') ?? false\"\r\n\t\t\t\t\t\t\t:type=\"action.getString('type') ?? 'primary'\"\r\n\t\t\t\t\t\t\t:ghost=\"action.getBoolean('loading') ?? false\"\r\n\t\t\t\t\t\t\t:shape=\"action.getString('shape') ?? 'rectangle'\"\r\n\t\t\t\t\t\t\t:size=\"action.getString('size') ?? 'medium'\"\r\n\t\t\t\t\t\t\t:variant=\"action.getString('variant')\"\r\n\t\t\t\t\t\t\t:open-type=\"action.getString('openType') ?? ''\"\r\n\t\t\t\t\t\t\t:color=\"action.getString('color')\"\r\n\t\t\t\t\t\t\t:textColor=\"action.getString('textColor')\"\r\n\t\t\t\t\t\t\t:fontSize=\"action.getString('fontSize')\"\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t:hover-stop-propagation=\"action.getBoolean('hoverStopPropagation') ?? false\"\r\n\t\t\t\t\t\t\t:hover-start-time=\"action.getNumber('hoverStartTime') ?? 20\"\r\n\t\t\t\t\t\t\t:hover-stay-time=\"action.getNumber('hoverStayTime') ?? 70\"\r\n\t\t\t\t\t\t\t:lang=\"action.getString('lang') ?? 'en'\"\r\n\t\t\t\t\t\t\t:session-from=\"action.getString('sessionFrom') ?? ''\"\r\n\t\t\t\t\t\t\t:send-message-title=\"action.getString('sendMessageTitle') ?? ''\"\r\n\t\t\t\t\t\t\t:send-message-path=\"action.getString('sendMessagePath') ?? ''\"\r\n\t\t\t\t\t\t\t:send-message-img=\"action.getString('sendMessageImg') ?? ''\"\r\n\t\t\t\t\t\t\t:app-parameter=\"action.getString('appParameter') ?? ''\"\r\n\t\t\t\t\t\t\t:show-message-card=\"action.getBoolean('showMessageCard') ?? false\"\r\n\t\t\t\t\t\t\t@click=\"onTplButtonTap('action', index)\"\r\n\t\t\t\t\t\t\t@getuserinfo=\"getuserinfo\"\r\n\t\t\t\t\t\t\t@contact=\"contact\" \r\n\t\t\t\t\t\t\t@getphonenumber=\"getphonenumber\"\r\n\t\t\t\t\t\t\t@error=\"error\" \r\n\t\t\t\t\t\t\t@opensetting=\"opensetting\" \r\n\t\t\t\t\t\t\t@launchapp=\"launchapp\" \r\n\t\t\t\t\t\t\t@agreeprivacyauthorization=\"agreeprivacyauthorization\">\r\n\t\t\t\t\t\t\t{{action['content']}}\r\n\t\t\t\t\t\t</l-button>\r\n\t\t\t\t\t</template>\r\n\t\t\t\t</slot>\r\n\t\t\t\t<slot name=\"cancel-btn\">\r\n\t\t\t\t\t<l-button \r\n\t\t\t\t\t\tclass=\"l-dialog__button\"\r\n\t\t\t\t\t\t:style=\"[buttonStyle]\"\r\n\t\t\t\t\t\t:class=\"[\r\n\t\t\t\t\t\t\t'l-dialog__button--' + innerButtonLayout,\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t'l-dialog__button--text': buttonVariant\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t]\"\r\n\t\t\t\t\t\tv-if=\"cancelBtnProps != null\"\r\n\t\t\t\t\t\t:block=\"cancelBtnProps?.getBoolean('block') ?? false\"\r\n\t\t\t\t\t\t:disabled=\"cancelBtnProps?.getBoolean('disabled') ?? false\"\r\n\t\t\t\t\t\t:content=\"cancelBtnProps?.getString('content') ?? ''\"\r\n\t\t\t\t\t\t:icon=\"cancelBtnProps?.getString('icon') ?? ''\"\r\n\t\t\t\t\t\t:loading=\"cancelBtnProps?.getBoolean('loading') ?? false\"\r\n\t\t\t\t\t\t:type=\"cancelBtnProps?.getString('type') ?? 'primary'\"\r\n\t\t\t\t\t\t:ghost=\"cancelBtnProps?.getBoolean('loading') ?? false\"\r\n\t\t\t\t\t\t:shape=\"cancelBtnProps?.getString('shape') ?? 'rectangle'\"\r\n\t\t\t\t\t\t:size=\"cancelBtnProps?.getString('size') ?? 'medium'\"\r\n\t\t\t\t\t\t:variant=\"cancelBtnProps?.getString('variant') ?? 'light'\"\r\n\t\t\t\t\t\t:open-type=\"cancelBtnProps?.getString('openType')\"\r\n\t\t\t\t\t\t:color=\"cancelBtnProps?.getString('color')\"\r\n\t\t\t\t\t\t:textColor=\"cancelBtnProps?.getString('textColor')\"\r\n\t\t\t\t\t\t:fontSize=\"cancelBtnProps?.getString('fontSize')\"\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t:hover-stop-propagation=\"cancelBtnProps?.getBoolean('hoverStopPropagation') ?? false\"\r\n\t\t\t\t\t\t:hover-start-time=\"cancelBtnProps?.getNumber('hoverStartTime') ?? 20\"\r\n\t\t\t\t\t\t:hover-stay-time=\"cancelBtnProps?.getNumber('hoverStayTime') ?? 70\"\r\n\t\t\t\t\t\t:lang=\"cancelBtnProps?.getString('lang') ?? 'en'\"\r\n\t\t\t\t\t\t:session-from=\"cancelBtnProps?.getString('sessionFrom') ?? ''\"\r\n\t\t\t\t\t\t:send-message-title=\"cancelBtnProps?.getString('sendMessageTitle') ?? ''\"\r\n\t\t\t\t\t\t:send-message-path=\"cancelBtnProps?.getString('sendMessagePath') ?? ''\"\r\n\t\t\t\t\t\t:send-message-img=\"cancelBtnProps?.getString('sendMessageImg') ?? ''\"\r\n\t\t\t\t\t\t:app-parameter=\"cancelBtnProps?.getString('appParameter') ?? ''\"\r\n\t\t\t\t\t\t:show-message-card=\"cancelBtnProps?.getBoolean('showMessageCard') ?? false\"\r\n\t\t\t\t\t\t@click=\"onTplButtonTap('cancel', null)\"\r\n\t\t\t\t\t\t@getuserinfo=\"getuserinfo\"\r\n\t\t\t\t\t\t@contact=\"contact\" \r\n\t\t\t\t\t\t@getphonenumber=\"getphonenumber\"\r\n\t\t\t\t\t\t@error=\"error\" \r\n\t\t\t\t\t\t@opensetting=\"opensetting\" \r\n\t\t\t\t\t\t@launchapp=\"launchapp\" \r\n\t\t\t\t\t\t@agreeprivacyauthorization=\"agreeprivacyauthorization\"\r\n\t\t\t\t\t\t>{{cancelBtnProps?.getString('content')}}</l-button> \r\n\t\t\t\t</slot>\r\n\t\t\t\t<slot name=\"confirm-btn\">\r\n\t\t\t\t\t<l-button \r\n\t\t\t\t\t\tclass=\"l-dialog__button\"\r\n\t\t\t\t\t\t:class=\"[\r\n\t\t\t\t\t\t\t'l-dialog__button--' + innerButtonLayout,\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t'l-dialog__button--text': buttonVariant\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t]\"\r\n\t\t\t\t\t\t:style=\"[\r\n\t\t\t\t\t\t\tbuttonStyle,\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t'margin-left': (cancelBtnProps != null) && innerButtonLayout == 'horizontal' && !buttonVariant ? '24rpx': '0',\r\n\t\t\t\t\t\t\t\t'margin-bottom': (cancelBtnProps != null) && innerButtonLayout == 'vertical' && !buttonVariant ? '24rpx': '0',\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t]\"\r\n\t\t\t\t\t\tdata-type=\"confirm\" \r\n\t\t\t\t\t\tv-if=\"confirmBtnProps != null\"\r\n\t\t\t\t\t\t:block=\"confirmBtnProps?.getBoolean('block') ?? false\"\r\n\t\t\t\t\t\t:disabled=\"confirmBtnProps?.getBoolean('disabled') ?? false\"\r\n\t\t\t\t\t\t:content=\"confirmBtnProps?.getString('content') ?? ''\"\r\n\t\t\t\t\t\t:icon=\"confirmBtnProps?.getString('icon') ?? ''\"\r\n\t\t\t\t\t\t:loading=\"confirmBtnProps?.getBoolean('loading') ?? false\"\r\n\t\t\t\t\t\t:type=\"confirmBtnProps?.getString('type') ?? 'primary'\"\r\n\t\t\t\t\t\t:ghost=\"confirmBtnProps?.getBoolean('loading') ?? false\"\r\n\t\t\t\t\t\t:shape=\"confirmBtnProps?.getString('shape') ?? 'rectangle'\"\r\n\t\t\t\t\t\t:size=\"confirmBtnProps?.getString('size') ?? 'medium'\"\r\n\t\t\t\t\t\t:variant=\"confirmBtnProps?.getString('variant') ?? 'solid'\"\r\n\t\t\t\t\t\t:open-type=\"confirmBtnProps?.getString('openType')\"\r\n\t\t\t\t\t\t:color=\"confirmBtnProps?.getString('color')\"\r\n\t\t\t\t\t\t:textColor=\"confirmBtnProps?.getString('textColor')\"\r\n\t\t\t\t\t\t:fontSize=\"confirmBtnProps?.getString('fontSize')\"\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t:hover-stop-propagation=\"confirmBtnProps?.getBoolean('hoverStopPropagation') ?? false\"\r\n\t\t\t\t\t\t:hover-start-time=\"confirmBtnProps?.getNumber('hoverStartTime') ?? 20\"\r\n\t\t\t\t\t\t:hover-stay-time=\"confirmBtnProps?.getNumber('hoverStayTime') ?? 70\"\r\n\t\t\t\t\t\t:lang=\"confirmBtnProps?.getString('lang') ?? 'en'\"\r\n\t\t\t\t\t\t:session-from=\"confirmBtnProps?.getString('sessionFrom') ?? ''\"\r\n\t\t\t\t\t\t:send-message-title=\"confirmBtnProps?.getString('sendMessageTitle') ?? ''\"\r\n\t\t\t\t\t\t:send-message-path=\"confirmBtnProps?.getString('sendMessagePath') ?? ''\"\r\n\t\t\t\t\t\t:send-message-img=\"confirmBtnProps?.getString('sendMessageImg') ?? ''\"\r\n\t\t\t\t\t\t:app-parameter=\"confirmBtnProps?.getString('appParameter') ?? ''\"\r\n\t\t\t\t\t\t:show-message-card=\"confirmBtnProps?.getBoolean('showMessageCard') ?? false\"\r\n\t\t\t\t\t\t@click=\"onTplButtonTap('confirm', null)\"\r\n\t\t\t\t\t\t@getuserinfo=\"getuserinfo\"\r\n\t\t\t\t\t\t@contact=\"contact\" \r\n\t\t\t\t\t\t@getphonenumber=\"getphonenumber\"\r\n\t\t\t\t\t\t@error=\"error\" \r\n\t\t\t\t\t\t@opensetting=\"opensetting\" \r\n\t\t\t\t\t\t@launchapp=\"launchapp\" \r\n\t\t\t\t\t\t@agreeprivacyauthorization=\"agreeprivacyauthorization\"\r\n\t\t\t\t\t\t>{{confirmBtnProps?.getString('content')}}</l-button> \r\n\t\t\t\t</slot>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t</l-popup>\r\n</template>\r\n<script lang=\"uts\" setup>\r\n\t/**\r\n\t * Dialog 弹窗组件\r\n\t * @description 用于显示模态对话框的通用组件\r\n\t * <br> 插件类型：LDialogComponentPublicInstance \r\n\t * @tutorial https://ext.dcloud.net.cn/plugin?name=lime-dialog\r\n\t * \r\n\t * @property {UTSJSONObject[]} actions 操作按钮列表（最多显示6个）\r\n\t * @property {'horizontal'|'vertical'} buttonLayout [buttonLayout=horizontal] 按钮排列方式\r\n\t * @value horizontal 水平排列\r\n\t * @value vertical 垂直排列\r\n\t * @property {string|Object} cancelBtn 取消按钮配置（null隐藏/string文本/Object按钮属性）\r\n\t * @property {boolean} closeBtn 是否显示关闭按钮\r\n\t * @property {boolean} closeOnClickOverlay 点击蒙层关闭\r\n\t * @property {string|Object} confirmBtn 确认按钮配置（null隐藏/string文本/Object按钮属性）\r\n\t * @property {string} content 弹窗内容（支持HTML）\r\n\t * @property {string}  overlayStyle 遮罩层样式（支持CSS字符串）\r\n\t * @property {boolean} preventScrollThrough 防止滚动穿透\r\n\t * @property {boolean} overlay 是否显示遮罩\r\n\t * @property {string} title 弹窗标题\r\n\t * @property {boolean} visible 控制显示状态\r\n\t * @property {number} zIndex 层级设置\r\n\t * @property {string} lStyle 自定义根节点样式\r\n\t * @event {Function} action 操作按钮点击时触发\r\n\t * @param {number} index 点击的按钮索引\r\n\t * @event {Function} confirm 确认按钮点击时触发\r\n\t * @event {Function} cancel 取消/关闭按钮点击时触发\r\n\t * @event {Function} click 通用点击事件（透传底层点击）\r\n\t * @event {Function} agreeprivacyauthorization 用户同意隐私协议时触发（需配置隐私协议）\r\n\t * @event {Function} chooseavatar 用户选择头像时触发（需启用头像选择功能）\r\n\t * @event {Function} getuserinfo 用户授权信息回调\r\n\t * @event {Function} contact 客服消息回调\r\n\t * @event {Function} getphonenumber 获取用户手机号回调\r\n\t * @event {Function} error 发生错误时触发\r\n\t * @param {Object} detail 错误详细信息\r\n\t * @event {Function} opensetting 用户打开系统设置时触发\r\n\t * @event {Function} launchapp 从小程序唤醒App时触发\r\n\t */\r\n\t\r\n\timport { DialogProps, DialogOptions, DialogExpose, BeforeClose } from './type';\r\n\timport { parseToObject } from './utils';\r\n\timport { isPromise } from '@/uni_modules/lime-shared/isPromise'\r\n\t\r\n\tconst emit = defineEmits(['action', 'confirm', 'cancel', 'click','agreeprivacyauthorization', 'chooseavatar', 'getuserinfo','contact', 'getphonenumber', 'error', 'opensetting', 'launchapp'])\r\n\tconst props = withDefaults(defineProps<DialogProps>(),{\r\n\t\tbuttonLayout: 'horizontal',\r\n\t\tcloseOnClickOverlay: true,\r\n\t\tpreventScrollThrough: true,\r\n\t\toverlay: true\r\n\t})\r\n\tconst dialogCallbacks = reactive({\r\n\t\tbeforeClose: null,\r\n\t\tonAction: null,\r\n\t\tonConfirm: null,\r\n\t\tonCancel: null,\r\n\t} as DialogExpose)\r\n\tconst innerOptions = reactive<DialogOptions>({\r\n\t\tactions: props.actions,\r\n\t\tbuttonLayout: props.buttonLayout,\r\n\t\tcancelBtn: props.cancelBtn,\r\n\t\tcloseBtn: props.closeBtn,\r\n\t\tcloseOnClickOverlay: props.closeOnClickOverlay,\r\n\t\tconfirmBtn: props.confirmBtn,\r\n\t\tcontent: props.content,\r\n\t\toverlayStyle: props.overlayStyle,\r\n\t\tpreventScrollThrough: props.preventScrollThrough,\r\n\t\toverlay: props.overlay,\r\n\t\ttitle: props.title,\r\n\t\tvisible: props.visible,\r\n\t\tzIndex: props.zIndex,\r\n\t})\r\n\t\r\n\t\r\n\tconst modelValue = defineModel({type: Boolean, default: false});\r\n\tconst innerValue = computed({\r\n\t\tset(value: boolean) {\r\n\t\t\tmodelValue.value = value;\r\n\t\t\tif(!value) {\r\n\t\t\t\tdialogCallbacks.beforeClose = null;\r\n\t\t\t\tdialogCallbacks.onConfirm = null;\r\n\t\t\t\tdialogCallbacks.onCancel = null;\r\n\t\t\t}\r\n\t\t},\r\n\t\tget(): boolean {\r\n\t\t\treturn (props.visible ?? false) || modelValue.value\r\n\t\t},\r\n\t} as WritableComputedOptions<boolean>);\r\n\t\r\n\tconst closeBtnProps = computed((): boolean=>{\r\n\t\treturn innerOptions.closeBtn ?? props.closeBtn ??  false\r\n\t})\r\n\tconst cancelBtnProps = computed(():UTSJSONObject | null => {\r\n\t\treturn parseToObject(props.cancelBtn ?? innerOptions.cancelBtn)\r\n\t})\r\n\tconst confirmBtnProps = computed(():UTSJSONObject | null => {\r\n\t\treturn parseToObject(props.confirmBtn ?? innerOptions.confirmBtn)\r\n\t})\r\n\t\r\n\tconst innerTitle = computed(():string|null => props.title ?? innerOptions.title)\r\n\tconst innerButtonLayout = computed(():string => innerOptions.buttonLayout ?? props.buttonLayout)\r\n\tconst innerActions = computed(():UTSJSONObject[]|null => {\r\n\t\treturn props.actions ?? innerOptions.actions\r\n\t})\r\n\tconst buttonVariant = computed(():boolean=> {\r\n\t\tconst res1 = [confirmBtnProps.value, cancelBtnProps.value].some((item):boolean => {\r\n\t\t\treturn item?.['variant'] == 'text'\r\n\t\t})\r\n\t\tconst res2 = innerActions.value?.some((item):boolean => {\r\n\t\t\treturn item['variant'] == 'text'\r\n\t\t})\r\n\t\t\r\n\t\treturn res1 || (res2 ?? false)\r\n\t})\r\n\t\r\n\tconst buttonStyle = computed(():Map<string, any> => {\r\n\t\tconst style = new Map<string, any>();\r\n\t\tif(innerButtonLayout.value == 'horizontal') {\r\n\t\t\tstyle.set('flex-grow', 1)\r\n\t\t\t// style.set('flex', 1)\r\n\t\t} else {\r\n\t\t\tstyle.set('flex-grow', 0)\r\n\t\t}\r\n\t\tstyle.set('padding', 0);\r\n\t\tif(buttonVariant.value) {\r\n\t\t\t//$border-color-2\r\n\t\t\tstyle.set('border-top', `1px solid #e7e7e7`)\r\n\t\t\tstyle.set('border-radius', '0')\r\n\t\t\tstyle.set('border-left', `1px solid #e7e7e7`)\r\n\t\t}\r\n\t\treturn style\r\n\t})\r\n\t\r\n\tconst onClose = (type: string) => {\r\n\t\tif(dialogCallbacks.beforeClose != null) {\r\n\t\t\tdialogCallbacks.beforeClose!(type).then((res)=>{\r\n\t\t\t\tinnerValue.value = false;\r\n\t\t\t})\r\n\t\t\treturn\r\n\t\t}\r\n\t\tinnerValue.value = false\r\n\t}\r\n\tconst onTplButtonTap = (type: string, extra:number|null) => {\r\n\t\tif(type == 'confirm') {\r\n\t\t\temit('confirm')\r\n\t\t\tif(dialogCallbacks.onConfirm!= null) {\r\n\t\t\t\tdialogCallbacks.onConfirm!(null)\r\n\t\t\t\tonClose('confirm')\r\n\t\t\t}\r\n\t\t} else if(type == 'cancel') {\r\n\t\t\temit('cancel')\r\n\t\t\tif(dialogCallbacks.onCancel!= null) {\r\n\t\t\t\tdialogCallbacks.onCancel!(true)\r\n\t\t\t\tonClose('cancel')\r\n\t\t\t}\r\n\t\t} else if(type == 'action' && extra != null) {\r\n\t\t\temit('action', extra)\r\n\t\t\tif(dialogCallbacks.onAction != null) {\r\n\t\t\t\t// dialogCallbacks.onAction!(extra)\r\n\t\t\t\tdialogCallbacks.onAction!(extra)\r\n\t\t\t\tonClose('action')\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\t\r\n\tconst getuserinfo = (e: UniEvent) => {\r\n\t\temit('getuserinfo', e);\r\n\t}\r\n\tconst contact = (e: UniEvent) => {\r\n\t\temit('contact', e);\r\n\t}\r\n\tconst getphonenumber = (e: UniEvent) => {\r\n\t\temit('getphonenumber', e);\r\n\t}\r\n\tconst error = (e: UniEvent) => {\r\n\t\temit('error', e);\r\n\t}\r\n\tconst opensetting = (e: UniEvent) => {\r\n\t\temit('opensetting', e);\r\n\t}\r\n\tconst launchapp = (e: UniEvent) => {\r\n\t\temit('launchapp', e);\r\n\t}\r\n\tconst chooseavatar = (e: UniEvent) => {\r\n\t\temit('chooseavatar', e);\r\n\t}\r\n\tconst agreeprivacyauthorization = (e: UniEvent) => {\r\n\t\temit('agreeprivacyauthorization', e);\r\n\t}\r\n\t\r\n\tconst overlayClick = () => {\r\n\t\tif(props.closeOnClickOverlay) {\r\n\t\t\tonClose('cancel')\r\n\t\t}\r\n\t}\r\n\t\r\n\tconst _updateOptions = (options: UTSJSONObject) => {\r\n\t\tinnerOptions.actions = options.getArray<UTSJSONObject>('actions') ?? props.actions\r\n\t\tinnerOptions.buttonLayout = options.getString('buttonLayout') ?? props.buttonLayout\r\n\t\tconst maxLengthSuggestion = innerOptions.buttonLayout == 'vertical' ? 7 : 3;\r\n\t\tif(innerOptions.actions != null && (innerOptions.actions!.length == 0 || innerOptions.actions!.length > maxLengthSuggestion)) {\r\n\t\t\tuni.__f__('warn','at uni_modules/lime-dialog/components/l-dialog/l-dialog.uvue:390',`action 数量建议控制在1至${maxLengthSuggestion}个`);\r\n\t\t}\r\n\t\tinnerOptions.cancelBtn =  options['cancelBtn'] ?? props.cancelBtn\r\n\t\tinnerOptions.closeBtn = options.getBoolean('closeBtn') ?? props.closeBtn\r\n\t\tinnerOptions.closeOnClickOverlay =  options.getBoolean('closeOnClickOverlay') ?? props.closeOnClickOverlay\r\n\t\tinnerOptions.confirmBtn = options.get('confirmBtn') ?? props.confirmBtn\r\n\t\tinnerOptions.content = options.getString('content') ?? props.content\r\n\t\tinnerOptions.overlayStyle = options.getString('overlayStyle') ?? props.overlayStyle\r\n\t\tinnerOptions.preventScrollThrough =  options.getBoolean('preventScrollThrough') ?? props.preventScrollThrough\r\n\t\tinnerOptions.overlay = options.getBoolean('overlay') ?? props.overlay\r\n\t\tinnerOptions.title = options.getString('title') ?? props.title\r\n\t\t// innerOptions.visible = options..visible\r\n\t\tinnerOptions.zIndex = options.getNumber('zIndex') ?? props.zIndex\r\n\t}\r\n\t// const _alert = (options: UTSJSONObject) => {}\r\n\t// const _confirm = (options: UTSJSONObject) => {}\r\n\tconst _show = (options: UTSJSONObject):Promise<number|null> => {\r\n\t\t_updateOptions(options)\r\n\t\tinnerValue.value = true;\r\n\t\ttry {\r\n\t\t\tconst beforeClose = options['beforeClose']\r\n\t\t\tif(typeof beforeClose == 'function') {\r\n\t\t\t\tdialogCallbacks.beforeClose = beforeClose as BeforeClose\r\n\t\t\t}\r\n\t\t\t\r\n\t\t} catch(err) {\r\n\t\t\tuni.__f__('warn','at uni_modules/lime-dialog/components/l-dialog/l-dialog.uvue:416',err)\r\n\t\t}\r\n\t\t\r\n\t\treturn new Promise((resolve, reject) => {\r\n\t\t\tdialogCallbacks.onConfirm = resolve;\r\n\t\t\tdialogCallbacks.onAction = resolve;\r\n\t\t\tdialogCallbacks.onCancel = reject;\r\n\t\t})\r\n\t}\r\n\tconst _close = () => {\r\n\t\tinnerValue.value = false\r\n\t}\r\n\t// const _action = (options: UTSJSONObject) => {}\r\n\t\r\n\t\r\n\tdefineExpose({\r\n\t\t// dialogCallbacks,\r\n\t\t// alert: _alert,\r\n\t\tclose: _close,\r\n\t\t// action: _action,\r\n\t\t// confirm: _confirm,\r\n\t\tshow: _show,\r\n\t})\r\n</script>\r\n<style lang=\"scss\">\r\n\t@import './index';\r\n</style>\r\n","import Component from '/Users/xyhc/Documents/veepai_uniappx/uni_modules/lime-dialog/components/l-dialog/l-dialog.uvue'\nwx.createComponent(Component)"],"names":["reactive","_useModel","computed","_a","parseToObject","uni","Component"],"mappings":"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"}