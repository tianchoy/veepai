{"version":3,"file":"l-badge.js","sources":["uni_modules/lime-badge/components/l-badge/l-badge.uvue","/Users/xyhc/Documents/veepai_uniappx/uni_modules/lime-badge/components/l-badge/l-badge.uvue?type=component"],"sourcesContent":["<template>\n\t<view class=\"l-badge__wrapper\" v-if=\"$slots['default'] != null\">\n\t\t<slot></slot>\n\t\t<text v-if=\"hasContent || dot\" class=\"l-badge\" ref=\"textRef\" :class=\"classes\" :style=\"[styles]\">\n\t\t\t<slot name=\"content\">{{renderContent}}</slot>\n\t\t</text>\n\n\n\n\n\n\t</view>\n\t<text v-else-if=\"hasContent || dot\" class=\"l-badge\" :class=\"classes\" :style=\"[styles]\">\n\t\t<slot name=\"content\">{{renderContent}}</slot>\n\t</text>\n</template>\n<script lang=\"uts\" setup>\n\t/**\n\t * Badge 徽标组件\n\t * @description 用于展示状态标记、消息数量等提示信息，支持多种形态和定位方式\n\t * <br> 插件类型：LBadgeComponentPublicInstance \n\t * @tutorial https://ext.dcloud.net.cn/plugin?name=lime-badge\n\t * \n\t * @property {string} [color] 徽标背景色（支持CSS颜色值）\n\t * @property {number | string | any} content 显示内容（数字/文字）\n\t * @property {boolean} dot 是否显示为小红点（优先级高于content）\n\t * @property {number} max 数字最大值（超出显示为${max}+）\n\t * @property {Array<string | number> | any[]} offset 位置偏移量（[x, y]）\n\t * @property {'top-right' | 'top-left' | 'bottom-right' | 'bottom-left'} position 定位位置\n\t * @property {'circle' | 'square' | 'bubble' | 'ribbon'} [shape] 形状（当前版本未实现）\n\t * @property {boolean} showZero 数值为0时是否显示\n\t * @property {'medium' | 'large'} [size] 尺寸（当前版本未实现）\n\t * @property {string | number} [content] 支持字符串模板（例：'${count}条'）\n\t * @property {Array<string | number>} offset 支持单位（例：['-10rpx', '20px']）\n\t */\n\t\n\timport { isNumeric } from '@/uni_modules/lime-shared/isNumeric'\n\timport { isNumber } from '@/uni_modules/lime-shared/isNumber'\n\timport { addUnit } from '@/uni_modules/lime-shared/addUnit'\n\timport { toBoolean } from '@/uni_modules/lime-shared/toBoolean'\n\timport { getOffsetWithMinusString } from './utils'\n\timport { BadgeProps } from './type'\n\tconst name = 'l-badge'\n\tconst props = withDefaults(defineProps<BadgeProps>(), {\n\t\tdot: false,\n\t\tmax: 99,\n\t\tshowZero: false,\n\n\n\n\n\t\toffset: [] as (string | number)[],\n\n\t\tposition: 'top-right'\n\t})\n\t\n\t\n\t\n\tconst context = getCurrentInstance()!\n\tconst classes = computed(():Map<string, boolean>=>{\n\t\tconst cls = new Map<string, boolean>()\n\t\tcls.set(`${name}--fixed`, toBoolean(context.slots['default']));\n\t\tcls.set(`${name}--dot`, props.dot);\n\t\tcls.set(`${name}--${props.position}`, context.slots['default'] != null);\n\t\treturn cls\n\t})\n\tconst styles = computed(():Map<string, any|null>=>{\n\t\tconst style = new Map<string, any|null>()\n\t\tif(toBoolean(props.color)) {\n\t\t\tstyle.set('background', props.color!)\n\t\t}\n\t\tconst positions = props.position.split('-');\n\t\tconst offset = props.offset;\n\t\tif(offset.length == 2) {\n\t\t\tconst x = offset[0];\n\t\t\tconst y = offset[1];\n\t\t\tif(context.slots['default'] != null) {\n\t\t\t\tif(positions.length == 2) {\n\t\t\t\t\tconst offsetY = positions[0], offsetX = positions[1];\n\t\t\t\t\tif(isNumber(y)) {\n\t\t\t\t\t\tconst _y = y as number\n\t\t\t\t\t\tstyle.set(offsetY, addUnit(offsetY == 'top' ? _y : -_y))\n\t\t\t\t\t} else {\n\t\t\t\t\t\tstyle.set(offsetY, offsetY == 'top' ? addUnit(y) : getOffsetWithMinusString(`${y}`))\n\t\t\t\t\t}\n\t\t\t\t\tif(isNumber(x)) {\n\t\t\t\t\t\tconst _x = x as number\n\t\t\t\t\t\tstyle.set(offsetX, addUnit(offsetX == 'left' ? _x : -_x))\n\t\t\t\t\t} else {\n\t\t\t\t\t\tstyle.set(offsetY, offsetY == 'left' ? addUnit(x) : getOffsetWithMinusString(`${x}`))\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tstyle.set('margin-top', addUnit(y))\n\t\t\t\tstyle.set('margin-left', addUnit(x))\n\t\t\t}\n\t\t}\n\t\treturn style\n\t});\n\tconst hasContent = computed<boolean>(():boolean => {\n\t\tif(toBoolean(context.slots['content'])) {\n\t\t\treturn true\n\t\t}\n\t\tconst content = props.content;\n\t\treturn (content != '' && content != null && (props.showZero || content !== '0'));\n\t});\n\tconst renderContent = computed<string>(():string=>{\n\t\tconst dot = props.dot\n\t\tconst max = props.max\n\t\tconst content = props.content\n\t\tif(!dot && hasContent.value) {\n\t\t\tif(max != 0 && isNumeric(content) && parseFloat(content.toString()) > max) {\n\t\t\t\treturn `${max}+`\n\t\t\t}\n\t\t}\n\t\tif(dot) {\n\t\t\treturn ''\n\t\t}\n\t\treturn `${content ?? \"\"}`\n\t})\n\t\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\t\n</script>\n<style lang=\"scss\">\n\t@import './index-u';\n</style>","import Component from '/Users/xyhc/Documents/veepai_uniappx/uni_modules/lime-badge/components/l-badge/l-badge.uvue'\nwx.createComponent(Component)"],"names":["getCurrentInstance","computed","toBoolean","isNumber","addUnit","getOffsetWithMinusString","isNumeric","Component"],"mappings":";;;;;;;AA0CC,MAAM,OAAO;;;;;;;;;;;;;;;AACb,UAAM,QAAQ;AAed,UAAM,UAAUA,cAAAA;AAChB,UAAM,UAAUC,cAAAA,SAAS,MAAA;AACxB,YAAM,MAAM,oBAAI;AAChB,UAAI,IAAI,GAAG,IAAI,WAAWC,uCAAS,UAAC,QAAQ,MAAM,SAAS,CAAC,CAAC;AAC7D,UAAI,IAAI,GAAG,IAAI,SAAS,MAAM,GAAG;AACjC,UAAI,IAAI,GAAG,IAAI,KAAK,MAAM,QAAQ,IAAI,QAAQ,MAAM,SAAS,KAAK,IAAI;AACtE,aAAO;AAAA,IACR,CAAC;AACD,UAAM,SAASD,cAAAA,SAAS,MAAA;AACvB,YAAM,QAAQ,oBAAI;AAClB,UAAGC,uCAAS,UAAC,MAAM,KAAK,GAAG;AAC1B,cAAM,IAAI,cAAc,MAAM,KAAM;AAAA,MACpC;AACD,YAAM,YAAY,MAAM,SAAS,MAAM,GAAG;AAC1C,YAAM,SAAS,MAAM;AACrB,UAAG,OAAO,UAAU,GAAG;AACtB,cAAM,IAAI,OAAO,CAAC;AAClB,cAAM,IAAI,OAAO,CAAC;AAClB,YAAG,QAAQ,MAAM,SAAS,KAAK,MAAM;AACpC,cAAG,UAAU,UAAU,GAAG;AACzB,kBAAM,UAAU,UAAU,CAAC,GAAG,UAAU,UAAU,CAAC;AACnD,gBAAGC,sCAAAA,SAAS,CAAC,GAAG;AACf,oBAAM,KAAK;AACX,oBAAM,IAAI,SAASC,6CAAQ,WAAW,QAAQ,KAAK,CAAC,EAAE,CAAC;AAAA,YACvD,OAAM;AACN,oBAAM,IAAI,SAAS,WAAW,QAAQA,qCAAO,QAAC,CAAC,IAAIC,8CAAwB,yBAAC,GAAG,CAAC,EAAE,CAAC;AAAA,YACnF;AACD,gBAAGF,sCAAAA,SAAS,CAAC,GAAG;AACf,oBAAM,KAAK;AACX,oBAAM,IAAI,SAASC,6CAAQ,WAAW,SAAS,KAAK,CAAC,EAAE,CAAC;AAAA,YACxD,OAAM;AACN,oBAAM,IAAI,SAAS,WAAW,SAASA,qCAAO,QAAC,CAAC,IAAIC,8CAAwB,yBAAC,GAAG,CAAC,EAAE,CAAC;AAAA,YACpF;AAAA,UACD;AAAA,QACD,OAAM;AACN,gBAAM,IAAI,cAAcD,qCAAAA,QAAQ,CAAC,CAAC;AAClC,gBAAM,IAAI,eAAeA,qCAAAA,QAAQ,CAAC,CAAC;AAAA,QACnC;AAAA,MACD;AACD,aAAO;AAAA,IACR,CAAC;AACD,UAAM,aAAaH,cAAAA,SAAkB,MAAA;AACpC,UAAGC,uCAAS,UAAC,QAAQ,MAAM,SAAS,CAAC,GAAG;AACvC,eAAO;AAAA,MACP;AACD,YAAM,UAAU,MAAM;AACtB,aAAQ,WAAW,MAAM,WAAW,SAAS,MAAM,YAAY,YAAY;AAAA,IAC5E,CAAC;AACD,UAAM,gBAAgBD,cAAAA,SAAiB,MAAA;AACtC,YAAM,MAAM,MAAM;AAClB,YAAM,MAAM,MAAM;AAClB,YAAM,UAAU,MAAM;AACtB,UAAG,CAAC,OAAO,WAAW,OAAO;AAC5B,YAAG,OAAO,KAAKK,uCAAAA,UAAU,OAAO,KAAK,WAAW,QAAQ,UAAU,IAAI,KAAK;AAC1E,iBAAO,GAAG,GAAG;AAAA,QACb;AAAA,MACD;AACD,UAAG,KAAK;AACP,eAAO;AAAA,MACP;AACD,aAAO,GAAG,YAAA,QAAA,qBAAA,UAAW,EAAE;AAAA,IACxB,CAAC;;;;;;;;;;;;;;;;;;;;;;ACtHF,GAAG,gBAAgBC,SAAS;"}