{"version":3,"file":"fui-grid.js","sources":["uni_modules/firstui-unix/components/fui-grid/fui-grid.uvue","/Users/xyhc/Documents/veepai_uniappx/uni_modules/firstui-unix/components/fui-grid/fui-grid.uvue?type=component"],"sourcesContent":["<template>\r\n\t<view class=\"fui-grid__wrap\" :class=\"[isShow?'fui-grid__wrap-show':'fui-grid__wrap-hidden']\">\r\n\t\t<view :id=\"elemId\" ref=\"fui_grid\" class=\"fui-grid\">\r\n\t\t\t<view class=\"fui-grid__border-top\" v-if=\"showBorder\"></view>\r\n\t\t\t<view class=\"fui-grid__border-left\" v-if=\"showBorder\"></view>\r\n\t\t\t<slot></slot>\r\n\t\t</view>\r\n\t</view>\r\n</template>\r\n\r\n<script lang=\"uts\">\r\n\timport { ComponentPublicInstance } from 'vue'\r\n\t/**\r\n\t * Grid 宫格\r\n\t * @description Grid 宫格，主要使用场景如：热门内容等。\r\n\t * @tutorial https://unix.firstui.cn/\r\n\t * @property {Number} columns {Number} 每行显示item数\r\n\t * @property {Boolean} showBorder {Boolean}\t是否显示边框\r\n\t * @property {Boolean} square {Boolean} item是否显示为正方形\r\n\t * @event {Function} onclick 点击时触发，返回传入的索引值(event: number) => void\r\n\t */\r\n\texport default {\r\n\t\tname: \"fui-grid\",\r\n\t\temits: ['onclick'],\r\n\t\tprops: {\r\n\t\t\tcolumns: {\r\n\t\t\t\ttype: Number,\r\n\t\t\t\tdefault: 3\r\n\t\t\t},\r\n\t\t\tshowBorder: {\r\n\t\t\t\ttype: Boolean,\r\n\t\t\t\tdefault: true\r\n\t\t\t},\r\n\t\t\tsquare: {\r\n\t\t\t\ttype: Boolean,\r\n\t\t\t\tdefault: true\r\n\t\t\t}\r\n\t\t},\r\n\t\tdata() {\r\n\t\t\tconst elemId = `fui_${parseInt(Math.ceil(Math.random() * 10e5).toString(), 36)}`\r\n\t\t\treturn {\r\n\t\t\t\telemId: elemId,\r\n\t\t\t\twidth: '0',\r\n\t\t\t\theight: '0',\r\n\t\t\t\tisShow: false,\r\n\t\t\t\tchildren: [] as Array<ComponentPublicInstance>\r\n\t\t\t};\r\n\t\t},\r\n\t\tcreated() {\r\n\t\t\tconst sys : GetSystemInfoResult = uni.getSystemInfoSync()\r\n\t\t\tthis.width = (100 / this.columns) + '%'\r\n\t\t\tif (this.square) {\r\n\t\t\t\tthis.height = `${(sys.windowWidth - 1) / this.columns}px`\r\n\t\t\t}\r\n\t\t},\r\n\t\twatch: {\r\n\t\t\tcolumns() {\r\n\t\t\t\tthis.$nextTick(() => {\r\n\t\t\t\t\tthis.init()\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tshowBorder() {\r\n\t\t\t\tthis.childChange()\r\n\t\t\t}\r\n\t\t},\r\n\t\tmounted() {\r\n\t\t\tthis.$nextTick(() => {\r\n\t\t\t\tthis.init()\r\n\t\t\t})\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\tinit() {\r\n\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\tthis.getWidth((width : string, height : string) => {\r\n\t\t\t\t\t\tthis.children.forEach((item : ComponentPublicInstance) => {\r\n\t\t\t\t\t\t\titem.$data['width'] = width\r\n\t\t\t\t\t\t\titem.$data['height'] = height\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\tthis.isShow = true\r\n\t\t\t\t\t})\r\n\t\t\t\t}, 80)\r\n\t\t\t},\r\n\t\t\tchildChange() {\r\n\t\t\t\tthis.children.forEach((item : ComponentPublicInstance) => {\r\n\t\t\t\t\titem.$data['showBorder'] = this.showBorder\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\thandleClick(index : number) {\r\n\t\t\t\tthis.$emit('onclick', index)\r\n\t\t\t},\r\n\t\t\tgetWidth(fn : (width : string, height : string) => void) {\r\n\t\t\t\tlet isNoSupported = false\r\n\t\t\t\t//这个值误差较大\r\n\t\t\t\tthis.width = `${100 / this.columns}%`\r\n\t\t\t\tif (this.square || isNoSupported) {\r\n\t\t\t\t\tuni.createSelectorQuery()\r\n\t\t\t\t\t\t.select(`#${this.elemId}`)\r\n\t\t\t\t\t\t.boundingClientRect()\r\n\t\t\t\t\t\t.exec(ret => {\r\n\t\t\t\t\t\t\tconst node = ret[0] as NodeInfo;\r\n\t\t\t\t\t\t\tif (node.width != null) {\r\n\t\t\t\t\t\t\t\tlet width = (((node.width as number) - 1) / this.columns)\r\n\t\t\t\t\t\t\t\t// width = Math.floor(width * 100) / 100\r\n\t\t\t\t\t\t\t\tif (this.square)\r\n\t\t\t\t\t\t\t\t\tthis.height = `${width}px`;\r\n\t\t\t\t\t\t\t\tif (isNoSupported)\r\n\t\t\t\t\t\t\t\t\tthis.width = `${width}px`;\r\n\t\t\t\t\t\t\t\tfn(this.width, this.height)\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tthis.init()\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t})\r\n\t\t\t\t} else {\r\n\t\t\t\t\tfn(this.width, this.height)\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t}\r\n</script>\r\n\r\n<style lang=\"scss\">\r\n\t$fui-color-border: #EEEEEE !default;\r\n\t$fui-grid-border-width: 1px !default;\r\n\r\n\t@mixin fui_grid_wrap_border {\r\n\t\tposition: absolute;\r\n\t\tleft: 0;\r\n\t\ttop: 0;\r\n\t\tbackground-color: $fui-color-border;\r\n\t\tz-index: 1;\r\n\t\tpointer-events: none;\r\n\t}\r\n\r\n\t.fui-grid__wrap {\r\n\t\twidth: 100%;\r\n\t\tbox-sizing: border-box;\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: column;\r\n\t}\r\n\r\n\t.fui-grid__wrap-hidden {\r\n\t\topacity: 0;\r\n\t}\r\n\r\n\t.fui-grid__wrap-show {\r\n\t\topacity: 1;\r\n\t}\r\n\r\n\t.fui-grid {\r\n\t\twidth: 100%;\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: row;\r\n\t\tflex-wrap: wrap;\r\n\t\tposition: relative;\r\n\t}\r\n\r\n\t.fui-grid__border-top {\r\n\t\theight: $fui-grid-border-width;\r\n\t\ttransform-origin: 0 0;\r\n\t\ttransform: scaleY(0.5);\r\n\t\tright: 0;\r\n\t\t@include fui_grid_wrap_border;\r\n\t}\r\n\r\n\t.fui-grid__border-left {\r\n\t\twidth: $fui-grid-border-width;\r\n\t\ttransform-origin: 0 0;\r\n\t\ttransform: scaleX(0.5);\r\n\t\tbottom: 0;\r\n\t\t@include fui_grid_wrap_border;\r\n\t}\r\n</style>","import Component from '/Users/xyhc/Documents/veepai_uniappx/uni_modules/firstui-unix/components/fui-grid/fui-grid.uvue'\nwx.createComponent(Component)"],"names":["defineComponent","uni"],"mappings":";;AAqBC,MAAA,YAAeA,8BAAA;AAAA,EACd,MAAM;AAAA,EACN,OAAO,CAAC,SAAS;AAAA,EACjB,OAAO;AAAA,IACN,SAAS;AAAA,MACR,MAAM;AAAA,MACN,SAAS;AAAA,IACT;AAAA,IACD,YAAY;AAAA,MACX,MAAM;AAAA,MACN,SAAS;AAAA,IACT;AAAA,IACD,QAAQ;AAAA,MACP,MAAM;AAAA,MACN,SAAS;AAAA,IACV;AAAA,EACA;AAAA,EACD,OAAI;AACH,UAAM,SAAS,OAAO,SAAS,KAAK,KAAK,KAAK,OAAS,IAAE,GAAI,EAAE,SAAU,GAAE,EAAE,CAAC;AAC9E,WAAO;AAAA,MACN;AAAA,MACA,OAAO;AAAA,MACP,QAAQ;AAAA,MACR,QAAQ;AAAA,MACR,UAAU,CAAmC;AAAA;EAE9C;AAAA,EACD,UAAO;AACN,UAAM,MAA4BC,oBAAI;AACtC,SAAK,QAAS,MAAM,KAAK,UAAW;AACpC,QAAI,KAAK,QAAQ;AAChB,WAAK,SAAS,IAAI,IAAI,cAAc,KAAK,KAAK,OAAO;AAAA,IACtD;AAAA,EACA;AAAA,EACD,OAAO;AAAA,IACN,UAAO;AACN,WAAK,UAAU,MAAA;AACd,aAAK,KAAI;AAAA,MACV,CAAC;AAAA,IACD;AAAA,IACD,aAAU;AACT,WAAK,YAAW;AAAA,IACjB;AAAA,EACA;AAAA,EACD,UAAO;AACN,SAAK,UAAU,MAAA;AACd,WAAK,KAAI;AAAA,IACV,CAAC;AAAA,EACD;AAAA,EACD,SAAS;AAAA,IACR,OAAI;AACH,iBAAW,MAAA;AACV,aAAK,SAAS,CAAC,OAAgB,WAAe;AAC7C,eAAK,SAAS,QAAQ,CAAC,SAA8B;AACpD,iBAAK,MAAM,OAAO,IAAI;AACtB,iBAAK,MAAM,QAAQ,IAAI;AAAA,UACxB,CAAC;AACD,eAAK,SAAS;AAAA,QACf,CAAC;AAAA,MACD,GAAE,EAAE;AAAA,IACL;AAAA,IACD,cAAW;AACV,WAAK,SAAS,QAAQ,CAAC,SAA8B;AACpD,aAAK,MAAM,YAAY,IAAI,KAAK;AAAA,MACjC,CAAC;AAAA,IACD;AAAA,IACD,YAAY,OAAc;AACzB,WAAK,MAAM,WAAW,KAAK;AAAA,IAC3B;AAAA,IACD,SAAS,IAA8C;AACtD,UAAI,gBAAgB;AAEpB,WAAK,QAAQ,GAAG,MAAM,KAAK,OAAO;AAClC,UAAI,KAAK,UAAU,eAAe;AACjCA,sBAAAA,MAAI,oBAAoB,EACtB,OAAO,IAAI,KAAK,MAAM,EAAE,EACxB,mBAAmB,EACnB,KAAK,SAAI;AACT,gBAAM,OAAO,IAAI,CAAC;AAClB,cAAI,KAAK,SAAS,MAAM;AACvB,gBAAI,SAAW,KAAK,QAAmB,KAAK,KAAK;AAEjD,gBAAI,KAAK;AACR,mBAAK,SAAS,GAAG,KAAK;AAGvB,eAAG,KAAK,OAAO,KAAK,MAAM;AAAA,UACzB,OAAK;AACN,iBAAK,KAAI;AAAA,UACV;AAAA,QACD,CAAC;AAAA,MACD,OAAK;AACN,WAAG,KAAK,OAAO,KAAK,MAAM;AAAA,MAC3B;AAAA,IACD;AAAA,EACD;CAED;;;;;;;;;;;;;ACrHD,GAAG,gBAAgB,SAAS;"}