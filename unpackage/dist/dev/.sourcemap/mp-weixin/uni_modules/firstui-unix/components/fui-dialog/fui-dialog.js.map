{"version":3,"file":"fui-dialog.js","sources":["uni_modules/firstui-unix/components/fui-dialog/fui-dialog.uvue","/Users/xyhc/Documents/veepai_uniappx/uni_modules/firstui-unix/components/fui-dialog/fui-dialog.uvue?type=component"],"sourcesContent":["<template>\r\n\t<view :ref=\"refId\" class=\"fui-dialog__wrap\" :style=\"{background:maskBackground,zIndex:zIndex}\"\r\n\t\t:class=\"{'fui-dialog__mask-bg':maskBackground==''}\" @tap=\"maskClose\">\r\n\t\t<view class=\"fui-dialog__inner\" :class=\"{'fui-dialog__bg':background==''}\"\r\n\t\t\t:style=\"{background:background,borderRadius:`${radius}rpx`}\">\r\n\t\t\t<text class=\"fui-dialog__title\" :class=\"{'fui-dialog__title-color':color==''}\" :style=\"getTitleStyl\"\r\n\t\t\t\tv-if=\"title!=''\">{{d_title}}</text>\r\n\t\t\t<view class=\"fui-dialog__body\" :class=\"{'fui-dialog__mtop':title==''}\">\r\n\t\t\t\t<text class=\"fui-dialog__descr\" :class=\"{'fui-dialog__descr-color':contentColor==''}\"\r\n\t\t\t\t\t:style=\"getContentStyl\" v-if=\"content!=''\">{{content}}</text>\r\n\t\t\t\t<slot></slot>\r\n\t\t\t</view>\r\n\t\t\t<view class=\"fui-dialog__footer\">\r\n\t\t\t\t<template v-for=\"(item,index) in btns\" :key=\"index\">\r\n\t\t\t\t\t<text :style=\"getBtnStyl(item.color)\" class=\"fui-dialog__btn\"\r\n\t\t\t\t\t\t:class=\"{'fui-dialog__btn-active':index==current,'fui-dialog__btn-first':index==0,'fui-dialog__btn-color':(item.color==null || item.color=='') && (item.primary==null || item.primary==false),'fui-dialog__color-primary':(item.color==null || item.color=='') && item.primary==true}\"\r\n\t\t\t\t\t\t@tap=\"handleClick(index)\" @touchstart=\"onTouchstart(index)\" @touchend=\"onEnd\"\r\n\t\t\t\t\t\t@touchcancel=\"onEnd\">{{item.text}}</text>\r\n\t\t\t\t</template>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t</view>\r\n</template>\r\n\r\n<script lang=\"uts\">\r\n\timport type { PropType } from 'vue';\r\n\timport { FuiDialogButtonsParam } from '../fui-types/index.uts'\r\n\timport { fuiLang, getFuiLocaleLang } from '../fui-lang/index.uts'\r\n\t/**\r\n\t * Dialog 对话框\r\n\t * @description Dialog 对话框，在浮层中显示，引导用户进行相关操作。\r\n\t * @tutorial https://unix.firstui.cn/\r\n\t * @property {Boolean} visible {Boolean} 是否显示对话框\r\n\t * @property {String} title {String} 对话框标题\r\n\t * @property {String} color {String} 对话框标题字体颜色\r\n\t * @property {String} content {String} 对话框内容\r\n\t * @property {String} contentColor {String} 对话框内容字体颜色\r\n\t * @property {Array} buttons {Array&lt;FuiDialogButtonsParam&gt;} 对话框按钮数据\r\n\t * @property {String} background {String} 对话框背景色\r\n\t * @property {Number} radius {Number} 对话框圆角值，单位rpx\r\n\t * @property {String} maskBackground {String} 对话框遮罩背景色\r\n\t * @property {Boolean} maskClosable {Boolean} 点击遮罩是否可关闭对话框\r\n\t * @property {Number} zIndex {Number} 层级z-index值\r\n\t * @event {Function} onclick 点击对话框按钮时触发，(event:FuiDialogButtonsParam) => void\r\n\t * @event {Function} close 点击遮罩层（maskClosable=true）时触发，() => void\r\n\t * @event {Function} update:visible 点击遮罩层且maskClosable设为true时触发，用于双向绑定，(event:boolean) => void\r\n\t */\r\n\texport default {\r\n\t\tname: 'fui-dialog',\r\n\t\temits: ['onclick', 'close', 'update:visible'],\r\n\t\tprops: {\r\n\t\t\tvisible: {\r\n\t\t\t\ttype: Boolean,\r\n\t\t\t\tdefault: false\r\n\t\t\t},\r\n\t\t\ttitle: {\r\n\t\t\t\ttype: String,\r\n\t\t\t\tdefault: 'fui_def'\r\n\t\t\t},\r\n\t\t\tcolor: {\r\n\t\t\t\ttype: String,\r\n\t\t\t\tdefault: ''\r\n\t\t\t},\r\n\t\t\tcontent: {\r\n\t\t\t\ttype: String,\r\n\t\t\t\tdefault: ''\r\n\t\t\t},\r\n\t\t\tcontentColor: {\r\n\t\t\t\ttype: String,\r\n\t\t\t\tdefault: ''\r\n\t\t\t},\r\n\t\t\tbuttons: {\r\n\t\t\t\ttype: Array as PropType<FuiDialogButtonsParam[]>,\r\n\t\t\t\tdefault: () : FuiDialogButtonsParam[] => [] as FuiDialogButtonsParam[]\r\n\t\t\t},\r\n\t\t\tbackground: {\r\n\t\t\t\ttype: String,\r\n\t\t\t\tdefault: ''\r\n\t\t\t},\r\n\t\t\tradius: {\r\n\t\t\t\ttype: Number,\r\n\t\t\t\tdefault: 24\r\n\t\t\t},\r\n\t\t\tmaskBackground: {\r\n\t\t\t\ttype: String,\r\n\t\t\t\tdefault: ''\r\n\t\t\t},\r\n\t\t\tmaskClosable: {\r\n\t\t\t\ttype: Boolean,\r\n\t\t\t\tdefault: true\r\n\t\t\t},\r\n\t\t\tzIndex: {\r\n\t\t\t\ttype: Number,\r\n\t\t\t\tdefault: 996\r\n\t\t\t}\r\n\t\t},\r\n\t\tdata() {\r\n\t\t\tconst refId = `fui_dialog_${parseInt(Math.ceil(Math.random() * 10e5).toString(), 36)}`\r\n\t\t\treturn {\r\n\t\t\t\trefId: refId,\r\n\t\t\t\tisShow: false,\r\n\t\t\t\telement: null as null | UniElement,\r\n\t\t\t\tcurrent: -1,\r\n\t\t\t\tbtns: [] as FuiDialogButtonsParam[],\r\n\t\t\t\td_title: ''\r\n\t\t\t}\r\n\t\t},\r\n\t\tcomputed: {\r\n\t\t\tlocale() : string {\r\n\t\t\t\treturn fuiLang.locale\r\n\t\t\t},\r\n\t\t\tgetTitleStyl() : object {\r\n\t\t\t\tconst mp : Map<string, string> = new Map();\r\n\t\t\t\tif (this.color != '') mp.set('color', this.color);\r\n\t\t\t\treturn mp;\r\n\t\t\t},\r\n\t\t\tgetContentStyl() : object {\r\n\t\t\t\tconst mp : Map<string, string> = new Map();\r\n\t\t\t\tif (this.contentColor != '') mp.set('color', this.contentColor);\r\n\t\t\t\treturn mp;\r\n\t\t\t}\r\n\t\t},\r\n\t\twatch: {\r\n\t\t\tvisible: {\r\n\t\t\t\thandler(newVal : boolean) {\r\n\t\t\t\t\tif (newVal) {\r\n\t\t\t\t\t\tthis.open();\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tif (this.isShow) this.close();\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\timmediate: true\r\n\t\t\t},\r\n\t\t\tlocale: {\r\n\t\t\t\thandler(val : string) {\r\n\t\t\t\t\tconst lang = getFuiLocaleLang(val)\r\n\t\t\t\t\tconst dialog = lang['dialog'] as UTSJSONObject;\r\n\t\t\t\t\tthis.d_title = this.title == 'fui_def' ? (dialog.getString('title') as string) : this.title;\r\n\t\t\t\t\tconst btns = JSON.parse<FuiDialogButtonsParam[]>(JSON.stringify(this.buttons))\r\n\t\t\t\t\tif (btns == null || btns.length == 0) {\r\n\t\t\t\t\t\tconst param = [{\r\n\t\t\t\t\t\t\ttext: dialog.getString('cancel') as string\r\n\t\t\t\t\t\t}, {\r\n\t\t\t\t\t\t\ttext: dialog.getString('confirm') as string,\r\n\t\t\t\t\t\t\tprimary: true\r\n\t\t\t\t\t\t}] as FuiDialogButtonsParam[];\r\n\t\t\t\t\t\tthis.getButtons(param)\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis.getButtons(btns)\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\timmediate: true\r\n\t\t\t},\r\n\t\t\tbuttons(vals : FuiDialogButtonsParam[]) {\r\n\t\t\t\tthis.getButtons(vals)\r\n\t\t\t},\r\n\t\t\ttitle(val : string) {\r\n\t\t\t\tif (val != 'fui_def') {\r\n\t\t\t\t\tthis.d_title = this.title\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\tmounted() {\r\n\t\t\tthis.$nextTick(() => {\r\n\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\tif (!this.isShow) this.close();\r\n\t\t\t\t}, 50);\r\n\t\t\t})\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\tgetBtnStyl(color : string | null) : object {\r\n\t\t\t\tconst mp : Map<string, string> = new Map();\r\n\t\t\t\tif (color != '' && color != null) mp.set('color', color);\r\n\t\t\t\treturn mp;\r\n\t\t\t},\r\n\t\t\tgetButtons(vals : FuiDialogButtonsParam[]) {\r\n\t\t\t\tthis.btns = [] as FuiDialogButtonsParam[];\r\n\t\t\t\tthis.$nextTick(() => {\r\n\t\t\t\t\tthis.btns = vals;\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\thandleClick(index : number) {\r\n\t\t\t\tconst item = this.btns[index];\r\n\t\t\t\titem.index = index;\r\n\t\t\t\tthis.$emit('onclick', item);\r\n\t\t\t},\r\n\t\t\tmaskClose() {\r\n\t\t\t\tif (!this.maskClosable) return;\r\n\t\t\t\tthis.$emit('close');\r\n\t\t\t\tthis.$emit('update:visible', false)\r\n\t\t\t},\r\n\t\t\topen() {\r\n\t\t\t\tthis.isShow = true;\r\n\t\t\t\tthis.$nextTick(() => {\r\n\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t\tthis._animation(true);\r\n\t\t\t\t\t}, 50);\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\tclose() {\r\n\t\t\t\tthis.isShow = false;\r\n\t\t\t\tthis._animation(false);\r\n\t\t\t},\r\n\t\t\t_animation(visible : boolean) {\r\n\t\t\t\tif (this.element == null) {\r\n\t\t\t\t\tthis.element = this.$refs[this.refId] as UniElement;\r\n\t\t\t\t}\r\n\t\t\t\tthis.element!.style.setProperty('opacity', visible ? '1' : '0')\r\n\t\t\t\tif (visible) {\r\n\t\t\t\t\tthis.element!.style.setProperty('visibility', 'visible');\r\n\t\t\t\t} else {\r\n\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t\tthis.element!.style.setProperty('visibility', 'hidden');\r\n\t\t\t\t\t}, 250)\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tonTouchstart(index : number) {\r\n\t\t\t\tthis.current = index;\r\n\t\t\t},\r\n\t\t\tonEnd() {\r\n\t\t\t\tthis.current = -1;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n</script>\r\n\r\n<style scoped lang=\"scss\">\r\n\t$fui-color-border: #EEEEEE !default;\r\n\t$fui-bg-color-hover: rgba(0, 0, 0, 0.2) !default;\r\n\t$fui-bg-color-mask: rgba(0, 0, 0, 0.6) !default;\r\n\t$fui-color-section: #333333 !default;\r\n\t$fui-color-subtitle: #7F7F7F !default;\r\n\t$fui-bg-color: #FFFFFF !default;\r\n\t$fui-dialog-bn-color: #333333 !default;\r\n\t$fui-color-primary: #465CFF !default;\r\n\r\n\t.fui-dialog__wrap {\r\n\t\tposition: fixed;\r\n\t\twidth: 100%;\r\n\t\theight: 100%;\r\n\t\ttop: 0;\r\n\t\tright: 0;\r\n\t\tleft: 0;\r\n\t\tbottom: 0;\r\n\t\ttransition-timing-function: ease-in;\r\n\t\ttransition-property: visibility, opacity;\r\n\t\ttransition-duration: 0.25s;\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tjustify-content: center;\r\n\t\tvisibility: hidden;\r\n\t\topacity: 0;\r\n\t}\r\n\r\n\t.fui-dialog__inner {\r\n\t\twidth: 680rpx;\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: column;\r\n\t\toverflow: hidden;\r\n\t}\r\n\r\n\t.fui-dialog__title {\r\n\t\tpadding: 64rpx 48rpx 0;\r\n\t\tfont-weight: 700;\r\n\t\tfont-size: 34rpx;\r\n\t\ttext-align: center;\r\n\t}\r\n\r\n\t.fui-dialog__body {\r\n\t\tpadding: 32rpx 48rpx;\r\n\t\tmargin-bottom: 32rpx;\r\n\t}\r\n\r\n\t.fui-dialog__descr {\r\n\t\tfont-size: 30rpx;\r\n\t\tfont-weight: normal;\r\n\t\ttext-align: center;\r\n\t}\r\n\r\n\t.fui-dialog__mtop {\r\n\t\tmargin-top: 32rpx;\r\n\t}\r\n\r\n\t.fui-dialog__footer {\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: row;\r\n\t\tposition: relative;\r\n\t\theight: 112rpx;\r\n\t\tborder-top-width: 0.5px;\r\n\t\tborder-top-style: solid;\r\n\t\tborder-top-color: $fui-color-border;\r\n\t}\r\n\r\n\t.fui-dialog__btn {\r\n\t\tflex: 1;\r\n\t\theight: 112rpx;\r\n\t\tline-height: 112rpx;\r\n\t\tfont-weight: 700;\r\n\t\tposition: relative;\r\n\t\tfont-size: 34rpx;\r\n\t\tborder-left-width: 0.5px;\r\n\t\tborder-left-style: solid;\r\n\t\tborder-left-color: $fui-color-border;\r\n\t\ttext-align: center;\r\n\r\n\r\n\r\n\t}\r\n\r\n\t.fui-dialog__btn-active {\r\n\t\tbackground: $fui-bg-color-hover;\r\n\t}\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\t.fui-dialog__btn-first {\r\n\t\tborder-left-width: 0 !important;\r\n\t}\r\n\r\n\t.fui-dialog__mask-bg {\r\n\t\tbackground: $fui-bg-color-mask !important;\r\n\t}\r\n\r\n\t.fui-dialog__title-color {\r\n\t\tcolor: $fui-color-section !important;\r\n\t}\r\n\r\n\t.fui-dialog__descr-color {\r\n\t\tcolor: $fui-color-subtitle !important;\r\n\t}\r\n\r\n\r\n\t.fui-dialog__bg {\r\n\t\tbackground: $fui-bg-color !important;\r\n\t}\r\n\r\n\t.fui-dialog__btn-color {\r\n\t\tcolor: $fui-dialog-bn-color !important;\r\n\t}\r\n\r\n\t.fui-dialog__color-primary {\r\n\t\tcolor: $fui-color-primary !important;\r\n\t}\r\n</style>","import Component from '/Users/xyhc/Documents/veepai_uniappx/uni_modules/firstui-unix/components/fui-dialog/fui-dialog.uvue'\nwx.createComponent(Component)"],"names":["defineComponent","fuiLang","getFuiLocaleLang","FuiDialogButtonsParam"],"mappings":"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"}