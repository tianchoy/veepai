{"version":3,"file":"fui-bottom-popup.js","sources":["uni_modules/firstui-unix/components/fui-bottom-popup/fui-bottom-popup.uvue","/Users/xyhc/Documents/veepai_uniappx/uni_modules/firstui-unix/components/fui-bottom-popup/fui-bottom-popup.uvue?type=component"],"sourcesContent":["<template>\r\n\t<view class=\"fui-bottom__popup-wrap\" :style=\"{ zIndex: zIndex,background:maskBackground}\" @tap.stop=\"handleClose\"\r\n\t\t:ref=\"refMkId\">\r\n\t\t<view @tap.stop=\"stop\" :ref=\"refId\" class=\"fui-bottom__popup\" :class=\"{'fui-bp__safe-weex':iphoneX && safeArea}\"\r\n\t\t\t:style=\"{borderTopLeftRadius:`${radius}rpx`,borderTopRightRadius:`${radius}rpx`,background: background}\">\r\n\t\t\t<slot></slot>\r\n\t\t</view>\r\n\t</view>\r\n</template>\r\n\r\n<script lang=\"uts\">\r\n\t/**\r\n\t * BottomPopup 底部弹出层\r\n\t * @description BottomPopup 底部弹出层，从底部弹出的浮层，引导用户进行相关操作。\r\n\t * @tutorial https://unix.firstui.cn/\r\n\t * @property {Boolean} visible {Boolean} 是否显示底部弹出层\r\n\t * @property {String} background {String} 底部弹出层背景颜色\r\n\t * @property {Number} radius {Number} 底部弹出层左上/右上圆角值，单位rpx\r\n\t * @property {Number} zIndex {Number} 底部弹出层z-index值\r\n\t * @property {Boolean} maskClosable {Boolean} 点击遮罩 是否可关闭\r\n\t * @property {String} maskBackground {String} 遮罩背景色\r\n\t * @property {Boolean} safeArea {Boolean} 是否适配底部安全区\r\n\t * @event {Function} close 点击遮罩层（maskClosable=true）时触发，() => void\r\n\t * @event {Function} update:visible 点击遮罩层（maskClosable=true）时触发，用于双向绑定\t，(event: boolean) => void\r\n\t */\r\n\texport default {\r\n\t\tname: 'fui-bottom-popup',\r\n\t\temits: ['close', 'update:visible'],\r\n\t\tprops: {\r\n\t\t\tvisible: {\r\n\t\t\t\ttype: Boolean,\r\n\t\t\t\tdefault: false\r\n\t\t\t},\r\n\t\t\tbackground: {\r\n\t\t\t\ttype: String,\r\n\t\t\t\tdefault: '#fff'\r\n\t\t\t},\r\n\t\t\tradius: {\r\n\t\t\t\ttype: Number,\r\n\t\t\t\tdefault: 24\r\n\t\t\t},\r\n\t\t\tzIndex: {\r\n\t\t\t\ttype: Number,\r\n\t\t\t\tdefault: 996\r\n\t\t\t},\r\n\t\t\tmaskClosable: {\r\n\t\t\t\ttype: Boolean,\r\n\t\t\t\tdefault: true\r\n\t\t\t},\r\n\t\t\tmaskBackground: {\r\n\t\t\t\ttype: String,\r\n\t\t\t\tdefault: 'rgba(0,0,0,.6)'\r\n\t\t\t},\r\n\t\t\tsafeArea: {\r\n\t\t\t\ttype: Boolean,\r\n\t\t\t\tdefault: true\r\n\t\t\t}\r\n\t\t},\r\n\t\tdata() {\r\n\t\t\tconst refId = `fui_bp_${parseInt(Math.ceil(Math.random() * 10e5).toString(), 36)}`\r\n\t\t\tconst refMkId = `fui_bpmk_${parseInt(Math.ceil(Math.random() * 10e5).toString(), 36)}`\r\n\t\t\treturn {\r\n\t\t\t\trefId: refId,\r\n\t\t\t\trefMkId: refMkId,\r\n\t\t\t\tiphoneX: false,\r\n\t\t\t\tisShow: false,\r\n\t\t\t\telement: null as UniElement | null,\r\n\t\t\t\tmkElement: null as UniElement | null\r\n\t\t\t}\r\n\t\t},\r\n\t\twatch: {\r\n\t\t\tvisible: {\r\n\t\t\t\thandler(newVal : boolean) {\r\n\t\t\t\t\tif (newVal) {\r\n\t\t\t\t\t\tthis.open();\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tif (this.isShow) this.close();\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\timmediate: true\r\n\t\t\t}\r\n\t\t},\r\n\t\tcreated() {\r\n\r\n\t\t\tthis.iphoneX = this.isPhoneX();\r\n\r\n\t\t},\r\n\t\tmounted() {\r\n\t\t\tthis.$nextTick(() => {\r\n\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\tif (!this.visible) this.close();\r\n\t\t\t\t}, 50);\r\n\t\t\t})\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\thandleClose() {\r\n\t\t\t\tif (!this.maskClosable) return;\r\n\t\t\t\tthis.$emit('close');\r\n\t\t\t\tthis.$emit('update:visible', false)\r\n\t\t\t},\r\n\r\n\t\t\tisPhoneX() : boolean {\r\n\t\t\t\tif (!this.safeArea) return false;\r\n\t\t\t\t//34px\r\n\t\t\t\tconst res : GetSystemInfoResult = uni.getSystemInfoSync();\r\n\t\t\t\tlet iphonex = false;\r\n\t\t\t\tlet models = ['iphonex', 'iphonexr', 'iphonexsmax']\r\n\t\t\t\tfor (let i = 11; i < 20; i++) {\r\n\t\t\t\t\tmodels.push(`iphone${i}`)\r\n\t\t\t\t\tmodels.push(`iphone${i}mini`)\r\n\t\t\t\t\tmodels.push(`iphone${i}pro`)\r\n\t\t\t\t\tmodels.push(`iphone${i}promax`)\r\n\t\t\t\t}\r\n\t\t\t\tconst model = res.model.replace(/\\s/g, \"\").toLowerCase()\r\n\t\t\t\tconst newModel = model.split('<')[0]\r\n\t\t\t\tif (models.includes(model) || models.includes(newModel) || res.safeAreaInsets.bottom > 0) {\r\n\t\t\t\t\tiphonex = true;\r\n\t\t\t\t}\r\n\t\t\t\treturn iphonex;\r\n\t\t\t},\r\n\r\n\t\t\topen() {\r\n\t\t\t\tthis.isShow = true;\r\n\t\t\t\tthis.$nextTick(() => {\r\n\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t\tthis._animation(true);\r\n\t\t\t\t\t}, 50);\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tclose() {\r\n\t\t\t\tthis.isShow = false;\r\n\t\t\t\tthis._animation(false);\r\n\t\t\t},\r\n\t\t\t_animation(visible : boolean) {\r\n\t\t\t\tif (this.element == null) {\r\n\t\t\t\t\tthis.element = this.$refs[this.refId] as UniElement;\r\n\t\t\t\t}\r\n\t\t\t\tif (this.mkElement == null) {\r\n\t\t\t\t\tthis.mkElement = this.$refs[this.refMkId] as UniElement;\r\n\t\t\t\t}\r\n\t\t\t\tthis.element!.style.setProperty('transform', `translateY(${visible ? '0' : '100%'})`);\r\n\t\t\t\tthis.element!.style.setProperty('opacity', visible ? '1' : '0')\r\n\t\t\t\tthis.mkElement!.style.setProperty('opacity', visible ? '1' : '0')\r\n\t\t\t\tif (visible) {\r\n\t\t\t\t\tthis.mkElement!.style.setProperty('visibility', 'visible');\r\n\t\t\t\t\tthis.element!.style.setProperty('visibility', 'visible');\r\n\t\t\t\t} else {\r\n\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t\tthis.mkElement!.style.setProperty('visibility', 'hidden');\r\n\t\t\t\t\t\tthis.element!.style.setProperty('visibility', 'hidden');\r\n\t\t\t\t\t}, 300)\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tstop() { }\r\n\t\t}\r\n\t};\r\n</script>\r\n\r\n<style scoped>\r\n\t.fui-bottom__popup-wrap {\r\n\t\tposition: fixed;\r\n\t\tleft: 0;\r\n\t\tright: 0;\r\n\t\ttop: 0;\r\n\t\tbottom: 0;\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: row;\r\n\t\talign-items: flex-end;\r\n\t\tjustify-content: center;\r\n\t\ttransition-property: opacity, visibility;\r\n\t\ttransition-timing-function: ease-in-out;\r\n\t\ttransition-duration: 0.3s;\r\n\t\tvisibility: hidden;\r\n\t\tborder-bottom-width: 0;\r\n\t\toverflow: hidden;\r\n\t\topacity: 0;\r\n\t}\r\n\r\n\t.fui-bottom__popup {\r\n\t\twidth: 100%;\r\n\t\ttransition-property: transform, opacity, visibility;\r\n\t\ttransition-timing-function: ease-in-out;\r\n\t\ttransition-duration: 0.3s;\r\n\t\tmin-height: 20rpx;\r\n\t\toverflow: hidden;\r\n\t\ttransform: translateY(100%);\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: row;\r\n\t\tposition: relative;\r\n\t}\r\n\r\n\t.fui-bp__safe-weex {\r\n\t\tpadding-bottom: 34px;\r\n\t}\r\n</style>","import Component from '/Users/xyhc/Documents/veepai_uniappx/uni_modules/firstui-unix/components/fui-bottom-popup/fui-bottom-popup.uvue'\nwx.createComponent(Component)"],"names":["defineComponent","uni"],"mappings":"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"}