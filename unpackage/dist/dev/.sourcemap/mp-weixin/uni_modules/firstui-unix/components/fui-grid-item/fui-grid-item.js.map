{"version":3,"file":"fui-grid-item.js","sources":["uni_modules/firstui-unix/components/fui-grid-item/fui-grid-item.uvue","/Users/xyhc/Documents/veepai_uniappx/uni_modules/firstui-unix/components/fui-grid-item/fui-grid-item.uvue?type=component"],"sourcesContent":["<template>\r\n\t<view v-if=\"width!='0'\" :style=\"getStyle\" class=\"fui-grid__item\">\r\n\t\t<view :hover-class=\"highlight?'fui-grid__highlight':''\" :hover-stay-time=\"150\"\r\n\t\t\t:style=\"{background:backgroundColor }\" class=\"fui-grid__item-box\" @tap=\"handleClick\">\r\n\t\t\t<slot></slot>\r\n\t\t</view>\n\t\t<view class=\"fui-grid__border-right\" v-if=\"showBorder\"></view>\n\t\t<view class=\"fui-grid__border-bottom\" v-if=\"showBorder\"></view>\r\n\t</view>\r\n</template>\r\n\r\n<script lang=\"uts\">\r\n\timport { ComponentPublicInstance } from 'vue'\r\n\t/**\r\n\t * Grid 宫格\r\n\t * @description Grid 宫格，主要使用场景如：热门内容等。\r\n\t * @tutorial https://unix.firstui.cn/\r\n\t * @property {Boolean} highlight {Boolean} 是否有点击效果\r\n\t * @property {String} backgroundColor {String} 背景颜色\r\n\t * @property {Number} index {Number} 当前item索引\t，onclick事件中返回\r\n\t * @event {Function} onclick 点击时触发，返回传入的索引值(event: number) => void\r\n\t */\r\n\texport default {\r\n\t\tname: \"fui-grid-item\",\r\n\t\temits: ['onclick'],\r\n\t\tprops: {\r\n\t\t\thighlight: {\r\n\t\t\t\ttype: Boolean,\r\n\t\t\t\tdefault: true\r\n\t\t\t},\r\n\t\t\tbackgroundColor: {\r\n\t\t\t\ttype: String,\r\n\t\t\t\tdefault: 'transparent'\r\n\t\t\t},\r\n\t\t\tindex: {\r\n\t\t\t\ttype: Number,\r\n\t\t\t\tdefault: 0\r\n\t\t\t}\r\n\t\t},\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\tcolumns: 0,\r\n\t\t\t\tshowBorder: true,\r\n\t\t\t\twidth: '0',\r\n\t\t\t\theight: '0',\r\n\t\t\t\tfuiGrid: null as null | ComponentPublicInstance\r\n\t\t\t};\r\n\t\t},\r\n\t\tcomputed: {\r\n\t\t\tgetStyle() : object {\r\n\t\t\t\tconst mp : Map<string, string> = new Map();\r\n\t\t\t\tmp.set('width', this.width);\r\n\t\t\t\tif (this.height != '0') mp.set('height', this.height);\r\n\t\t\t\treturn mp;\r\n\t\t\t}\r\n\t\t},\r\n\t\tcreated() {\r\n\t\t\tthis.getParent('fui-grid')\r\n\t\t\tthis.init()\r\n\t\t},\r\n\t\tbeforeUnmount() {\r\n\t\t\tif (this.fuiGrid != null) {\r\n\t\t\t\tconst grid = this.fuiGrid as ComponentPublicInstance\r\n\t\t\t\tconst children = grid.$data['children'] as ComponentPublicInstance[];\r\n\t\t\t\tchildren.forEach((item : ComponentPublicInstance, index : number) => {\r\n\t\t\t\t\tif (item == this) {\r\n\t\t\t\t\t\tchildren.splice(index, 1)\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\tinit() {\r\n\t\t\t\tif (this.fuiGrid != null) {\r\n\t\t\t\t\tconst grid = this.fuiGrid as ComponentPublicInstance;\r\n\t\t\t\t\tthis.columns = grid.$props['columns'] as number;\r\n\t\t\t\t\tthis.showBorder = grid.$props['showBorder'] as boolean;\r\n\t\t\t\t\t(grid.$data['children'] as ComponentPublicInstance[]).push(this as ComponentPublicInstance);\r\n\t\t\t\t\tthis.width = grid.$data['width'] as string;\r\n\t\t\t\t\tthis.height = grid.$data['height'] as string;\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tgetParent(name : string) : boolean {\r\n\t\t\t\tif (this.$parent == null) return false;\r\n\t\t\t\tlet parent = this.$parent as ComponentPublicInstance;\r\n\t\t\t\tlet parentName = parent.$options['name'];\r\n\t\t\t\twhile (parentName != name) {\r\n\t\t\t\t\tif (parent.$parent == null) return false;\r\n\t\t\t\t\tparent = parent.$parent as ComponentPublicInstance;\r\n\t\t\t\t\tif (parent.$options['name'] == '') return false;\r\n\t\t\t\t\tparentName = parent.$options['name'];\r\n\t\t\t\t}\r\n\t\t\t\tthis.fuiGrid = parent;\r\n\t\t\t\treturn true;\r\n\t\t\t},\r\n\t\t\thandleClick() {\r\n\t\t\t\tif (this.fuiGrid != null) {\r\n\t\t\t\t\tconst grid = this.fuiGrid as ComponentPublicInstance;\r\n\t\t\t\t\tgrid.$callMethod('handleClick', this.index)\r\n\t\t\t\t}\r\n\t\t\t\tthis.$emit('onclick', this.index)\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n</script>\r\n\r\n<style lang=\"scss\">\r\n\t$fui-color-border: #EEEEEE !default;\r\n\t$fui-bg-color-hover: rgba(0, 0, 0, 0.2) !default;\r\n\t$fui-grid-border-width: 1px !default;\r\n\r\n\t@mixin fui_grid_border {\r\n\t\tposition: absolute;\r\n\t\tbottom: 0;\r\n\t\tright: 0;\r\n\t\tbackground-color: $fui-color-border;\r\n\t\tz-index: 1;\r\n\t\tpointer-events: none;\r\n\t}\r\n\r\n\t.fui-grid__item {\r\n\t\tdisplay: flex;\r\n\t\tflex-shrink: 0;\r\n\t\tbox-sizing: border-box;\n\t\toverflow: visible;\n\t\tposition: relative;\r\n\t}\r\n\r\n\t.fui-grid__item-box {\r\n\t\tflex: 1;\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: column;\r\n\t\tbox-sizing: border-box;\r\n\t}\r\n\r\n\t.fui-grid__border-right {\n\t\t@include fui_grid_border;\r\n\t\twidth: $fui-grid-border-width;\r\n\t\ttransform-origin: 100% 0;\r\n\t\ttransform: scaleX(0.5);\r\n\t\ttop: 0;\r\n\t}\r\n\r\n\t.fui-grid__border-bottom {\r\n\t\theight: $fui-grid-border-width;\r\n\t\ttransform-origin: 0 100%;\r\n\t\ttransform: scaleY(0.5);\r\n\t\tleft: 0;\r\n\t\t@include fui_grid_border;\r\n\t}\r\n\r\n\t.fui-grid__highlight {\r\n\t\tbackground: $fui-bg-color-hover !important;\r\n\t}\r\n</style>","import Component from '/Users/xyhc/Documents/veepai_uniappx/uni_modules/firstui-unix/components/fui-grid-item/fui-grid-item.uvue'\nwx.createComponent(Component)"],"names":["defineComponent"],"mappings":";;AAsBC,MAAA,YAAeA,8BAAA;AAAA,EACd,MAAM;AAAA,EACN,OAAO,CAAC,SAAS;AAAA,EACjB,OAAO;AAAA,IACN,WAAW;AAAA,MACV,MAAM;AAAA,MACN,SAAS;AAAA,IACT;AAAA,IACD,iBAAiB;AAAA,MAChB,MAAM;AAAA,MACN,SAAS;AAAA,IACT;AAAA,IACD,OAAO;AAAA,MACN,MAAM;AAAA,MACN,SAAS;AAAA,IACV;AAAA,EACA;AAAA,EACD,OAAI;AACH,WAAO;AAAA,MACN,SAAS;AAAA,MACT,YAAY;AAAA,MACZ,OAAO;AAAA,MACP,QAAQ;AAAA,MACR,SAAS;AAAA;EAEV;AAAA,EACD,UAAU;AAAA,IACT,WAAQ;AACP,YAAM,KAA2B,oBAAI;AACrC,SAAG,IAAI,SAAS,KAAK,KAAK;AAC1B,UAAI,KAAK,UAAU;AAAK,WAAG,IAAI,UAAU,KAAK,MAAM;AACpD,aAAO;AAAA,IACR;AAAA,EACA;AAAA,EACD,UAAO;AACN,SAAK,UAAU,UAAU;AACzB,SAAK,KAAI;AAAA,EACT;AAAA,EACD,gBAAa;AACZ,QAAI,KAAK,WAAW,MAAM;AACzB,YAAM,OAAO,KAAK;AAClB,YAAM,WAAW,KAAK,MAAM,UAAU;AACtC,eAAS,QAAQ,CAAC,MAAgC,UAAc;AAC/D,YAAI,QAAQ,MAAM;AACjB,mBAAS,OAAO,OAAO,CAAC;AAAA,QACzB;AAAA,MACD,CAAC;AAAA,IACF;AAAA,EACA;AAAA,EACD,SAAS;AAAA,IACR,OAAI;AACH,UAAI,KAAK,WAAW,MAAM;AACzB,cAAM,OAAO,KAAK;AAClB,aAAK,UAAU,KAAK,OAAO,SAAS;AACpC,aAAK,aAAa,KAAK,OAAO,YAAY;AACzC,aAAK,MAAM,UAAU,EAAgC,KAAK,IAA+B;AAC1F,aAAK,QAAQ,KAAK,MAAM,OAAO;AAC/B,aAAK,SAAS,KAAK,MAAM,QAAQ;AAAA,MAClC;AAAA,IACA;AAAA,IACD,UAAU,MAAa;AACtB,UAAI,KAAK,WAAW;AAAM,eAAO;AACjC,UAAI,SAAS,KAAK;AAClB,UAAI,aAAa,OAAO,SAAS,MAAM;AACvC,aAAO,cAAc,MAAM;AAC1B,YAAI,OAAO,WAAW;AAAM,iBAAO;AACnC,iBAAS,OAAO;AAChB,YAAI,OAAO,SAAS,MAAM,KAAK;AAAI,iBAAO;AAC1C,qBAAa,OAAO,SAAS,MAAM;AAAA,MACpC;AACA,WAAK,UAAU;AACf,aAAO;AAAA,IACP;AAAA,IACD,cAAW;AACV,UAAI,KAAK,WAAW,MAAM;AACzB,cAAM,OAAO,KAAK;AAClB,aAAK,YAAY,eAAe,KAAK,KAAK;AAAA,MAC3C;AACA,WAAK,MAAM,WAAW,KAAK,KAAK;AAAA,IACjC;AAAA,EACD;CACD;;;;;;;;;;;;;;;;;ACtGD,GAAG,gBAAgB,SAAS;"}