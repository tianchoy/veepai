{"version":3,"file":"l-upload.js","sources":["uni_modules/lime-upload/components/l-upload/l-upload.uvue","/Users/xyhc/Documents/veepai_uniappx/uni_modules/lime-upload/components/l-upload/l-upload.uvue?type=component"],"sourcesContent":["<template>\r\n\t<view class=\"l-upload\" ref=\"uploadRef\" :style=\"styles\">\r\n\t\t<view class=\"l-upload__item\" v-for=\"(file, index) in customFiles\" :style=\"[itemStyle]\" :key=\"file.url\">\r\n\r\n\t\t\t<view class=\"l-upload__item-inner\" :style=\"[innerStyle]\">\r\n\r\n\t\t\t\t<slot name=\"file\" :file=\"file\" :index=\"index\">\r\n\t\t\t\t\t<image class=\"l-upload__image\" v-if=\"file.type == 'image'\" :src=\"file.url\" :data-file=\"file\"\r\n\t\t\t\t\t\t:mode=\"imageFit\" @click=\"onProofTap(index)\" />\r\n\t\t\t\t\t<video class=\"l-upload__image\" v-if=\"file.type == 'video'\" :src=\"file.url\" :data-file=\"file\"\r\n\t\t\t\t\t\t:autoplay=\"false\" objectFit=\"contain\" @click=\"onFileClick(index)\" />\r\n\t\t\t\t\t<view class=\"l-upload__progress-mask\" v-if=\"file.status != null && file.status != 'done'\"\r\n\t\t\t\t\t\t:data-file=\"file\" @click=\"onFileClick(index)\">\r\n\t\t\t\t\t\t<template v-if=\"file.status == 'loading'\">\r\n\t\t\t\t\t\t\t<l-loading class=\"l-upload__progress-loading\" size=\"24px\" color=\"white\" />\r\n\t\t\t\t\t\t\t<text class=\"l-upload__progress-text\" v-if=\"file.percent != null\">{{file.percent}}%</text>\r\n\t\t\t\t\t\t\t<text class=\"l-upload__progress-text\" v-else>{{loadingText}}</text>\r\n\t\t\t\t\t\t</template>\r\n\t\t\t\t\t\t<l-icon v-else class=\"l-upload__progress-icon\"\r\n\t\t\t\t\t\t\t:name=\"file.status == 'reload' ? 'refresh' : 'close-circle'\" size=\"48rpx\" aria-hidden />\r\n\t\t\t\t\t\t<text v-if=\"file.status == 'reload' || file.status == 'failed'\" class=\"l-upload__progress-text\">\r\n\t\t\t\t\t\t\t{{file.status == 'reload' ? reloadText : failedText}}\r\n\t\t\t\t\t\t</text>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view v-if=\"!isReadonly\" class=\"l-upload__delete-btn\" aria-role=\"button\" aria-label=\"删除\" :data-index=\"index\"\r\n\t\t\t\t\t\t@click=\"onDelete(index)\">\r\n\t\t\t\t\t\t<l-icon name=\"close\" size=\"16px\" color=\"#fff\" />\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</slot>\r\n\r\n\t\t\t</view>\r\n\r\n\t\t</view>\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\t\t<view class=\"l-upload__item l-upload__item--add\" :class=\"{'l-upload__item--disabled':isDisabled}\"\r\n\t\t\tv-if=\"!isReadonly\"\r\n\t\t\tv-show=\"!multiple ? customFiles.length == 0 : max == 0 || customFiles.length != max\" :style=\"[itemStyle]\"\r\n\t\t\taria-label=\"上传\" @click=\"onAddTap\">\r\n\t\t\t<view class=\"l-upload__item-inner\" :style=\"[innerStyle,  addBgColor!=null ? {background: addBgColor}: '']\">\r\n\t\t\t\t<slot>\r\n\t\t\t\t\t<l-icon class=\"l-upload__add-icon\" :size=\"uploadIconSize\" :name=\"uploadIcon\" />\r\n\t\t\t\t</slot>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\r\n\t</view>\r\n</template>\r\n<script lang=\"uts\" setup>\r\n\t/**\r\n\t * Upload 文件上传组件\r\n\t * @description 用于图片、视频等文件的上传，支持预览、删除、重传等功能\r\n\t * <br>插件类型：LUploadComponentPublicInstance \r\n\t * @tutorial https://ext.dcloud.net.cn/plugin?name=lime-upload\r\n\t * \r\n\t * @property {string} name 表单字段名\r\n\t * @property {UTSJSONObject[]} modelValue 已上传文件列表（支持v-model）\r\n\t * @property {boolean} disabled 是否禁用（默认：false）\r\n\t * @property {boolean} readonly 只读（默认：false）\r\n\t * @property {boolean} multiple 是否支持多选（默认：false）\r\n\t * @property {'scaleToFill'|'aspectFit'|'aspectFill'|'widthFix'|'heightFix'|'top'|'bottom'|'center'|'left'|'right'|'top left'|'top right'|'bottom left'|'bottom right'} imageFit 图片裁剪模式（默认：\"aspectFill\"）\r\n\t * @value scaleToFill\r\n\t * @value aspectFit\r\n\t * @value aspectFill\r\n\t * @value widthFix\r\n\t * @value heightFix\r\n\t * @value top\r\n\t * @value bottom\r\n\t * @value 'top left'\r\n\t * @value 'top right'\r\n\t * @value 'bottom left'\r\n\t * @value \"bottom right\"\r\n\t * @property {string} gutter 项目间距（支持CSS单位）\r\n\t * @property {number} column 每行显示数量（默认：4）\r\n\t * @property {number} max 最大上传数量（默认：9）\r\n\t * @property {number} sizeLimit 文件大小限制（单位KB）\r\n\t * @property {string} uploadIcon 上传按钮图标\r\n\t * @property {string} uploadIconSize 上传按钮图标尺寸\r\n\t * @property {string} gridWidth 项目宽度（支持CSS单位）\r\n\t * @property {string} gridHeight 项目高度（支持CSS单位）\r\n\t * @property {string} gridBgColor 项目背景色\r\n\t * @property {string} addBgColor 添加按钮背景色\r\n\t * @property {string} gridBorderRadius 项目圆角\r\n\t * @property {UTSJSONObject[]} defaultFiles 默认文件列表\r\n\t * @property {string} loadingText 上传中提示文字\r\n\t * @property {string} reloadText 重传提示文字\r\n\t * @property {string} failedText 失败提示文字\r\n\t * @property {boolean} disablePreview 禁用预览（默认：false）\r\n\t * @property {boolean} autoUpload 自动上传（默认：true）\r\n\t * @property {'image' | 'video' | 'all' | 'media'} mediaType 上传文件类型（默认：\"image\"）\r\n\t * @value image\r\n\t * @value video\r\n\t * @value media\r\n\t * @value all\r\n\t * @property {number} maxDuration 视频最大时长（秒）\r\n\t * @property {string[]} sizeType 文件尺寸类型（默认：[\"original\", \"compressed\"]）\r\n\t * @property {string[]} sourceType 文件来源（默认：[\"album\", \"camera\"]）\r\n\t * @property {string} action 上传地址（uniCloud服务请设置为\"uniCloud\"）\r\n\t * @property {UTSJSONObject} headers 请求头部\r\n\t * @property {UTSJSONObject} formData 额外表单数据\r\n\t * @property {string} mode 显示模式（默认：\"grid\"）\r\n\t * @event {Function} add 点击增加时触发\r\n\t * @event {Function} success 上传成功时触发\r\n\t * @event {Function} fail 上传失败时触发\r\n\t * @event {Function} remove 点击删除时触发\r\n\t * @event {Function} click 点击时触发\r\n\t */\r\n\r\n\timport { unitConvert } from '@/uni_modules/lime-shared/unitConvert'\r\n\timport { chooseFiles } from './utils'\r\n\timport { UploadProps, UploadFile, ChooseFileOptions } from './type';\r\n\r\n\tdefineSlots<{\r\n\t\tfile(props : { file : UploadFile, index : number }) : any,\r\n\t}>()\r\n\r\n\tconst formDisabled = inject<Ref<boolean | null> | null>('formDisabled', null)\r\n\tconst formReadonly = inject<Ref<boolean | null> | null>('formReadonly', null)\r\n\r\n\tconst emits = defineEmits(['fail', 'remove', 'success', 'click', 'add', 'update:modelValue'])\r\n\tconst props = withDefaults(defineProps<UploadProps>(), {\r\n\t\timageFit: 'aspectFill',\r\n\t\tdisablePreview: false,\r\n\t\tautoUpload: false,\r\n\t\tmultiple: true,\r\n\t\tmax: 0,\r\n\t\tdisabled: false,\r\n\t\treadonly: false,\r\n\t\tmediaType: 'image',\r\n\t\tsizeType: ['original', 'compressed'],\r\n\t\tsourceType: ['album', 'camera'],\r\n\t\tuploadIcon: 'camera',\r\n\t\tloadingText: '上传中...',\r\n\t\treloadText: '重新上传',\r\n\t\tfailedText: '上传失败',\r\n\t\tmode: 'grid'\r\n\t})\r\n\r\n\tconst isReadonly = computed(() : boolean => {\r\n\t\tuni.__f__('log','at uni_modules/lime-upload/components/l-upload/l-upload.uvue:150','isReadonly', props.readonly)\r\n\t\tif (props.readonly) return props.readonly;\r\n\t\treturn formReadonly?.value ?? false;\r\n\t})\r\n\tconst isDisabled = computed(() : boolean => {\r\n\t\tif (props.disabled) return props.disabled;\r\n\t\treturn formDisabled?.value ?? false;\r\n\t})\r\n\r\n\tconst transformFiles = (it : any) : UploadFile => {\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\t\tconst file : UTSJSONObject = { ...it }\r\n\r\n\r\n\r\n\r\n\t\treturn {\r\n\t\t\turl: file.getString('url') ?? '',\r\n\t\t\tpath: file.getString('path'),\r\n\t\t\tname: file.getString('name'),\r\n\t\t\tthumb: file.getString('thumb'),\r\n\t\t\tsize: file.getNumber('size'),\r\n\t\t\ttype: file.getString('type'),\r\n\t\t\tpercent: file.getNumber('percent'),\r\n\t\t\tstatus: file.getString('status') ?? 'done',\r\n\t\t} as UploadFile\r\n\t}\r\n\tconst customFiles = ref<UploadFile[]>((props.modelValue ?? props.defaultFiles)?.map(transformFiles) ?? []);\r\n\r\n\tconst listWidth = ref(0);\r\n\tconst uploadRef = ref<UniElement | null>(null);\r\n\tconst styles = computed(() : Map<string, any> => {\r\n\t\tconst style = new Map<string, any>();\r\n\t\tconst gutter = unitConvert(props.gutter ?? 8) / 2 * -1\r\n\t\tstyle.set('margin-left', `${gutter}px`)\r\n\t\tstyle.set('margin-right', `${gutter}px`)\r\n\t\tstyle.set('margin-top', `${gutter}px`)\r\n\t\treturn style\r\n\t})\r\n\tconst itemStyle = computed(() : Map<string, any> => {\r\n\t\tconst style = new Map<string, any>();\r\n\r\n\t\t// const gridWidth = unitConvert(props.gridWidth ?? 80)\r\n\t\tconst gutter = unitConvert(props.gutter ?? 8) / 2\r\n\t\tlet column = props.column ?? 4;\r\n\r\n\t\tif (props.gridWidth != null || props.column != null) {\r\n\r\n\r\n\r\n\r\n\r\n\t\t\tif (props.gridWidth) {\r\n\t\t\t\tstyle.set('--l-upload-width', props.gridWidth)\r\n\t\t\t} else {\r\n\t\t\t\tstyle.set('width', `${100 / column}%`)\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\t\treturn style\r\n\t})\r\n\r\n\tconst innerStyle = computed(() : Map<string, any> => {\r\n\t\tconst style = new Map<string, any>();\r\n\r\n\t\tconst gutter = unitConvert(props.gutter ?? 8) / 2\r\n\t\tstyle.set('margin', `${gutter}px`)\r\n\t\tif (props.gridBgColor != null) {\r\n\t\t\tstyle.set('background', props.gridBgColor!)\r\n\t\t}\r\n\t\tif (props.gridHeight != null) {\r\n\t\t\tstyle.set('height', props.gridHeight!)\r\n\t\t}\r\n\t\treturn style\r\n\t})\r\n\r\n\r\n\tconst onFileClick = (index : number) => {\r\n\t\tconst file = customFiles.value[index]\r\n\t\temits('click', { file })\r\n\t}\r\n\tconst onProofTap = (index : number) => {\r\n\t\tonFileClick(index);\r\n\t\tif (props.disablePreview) return\r\n\t\tuni.previewImage({\r\n\t\t\turls: customFiles.value.filter((file) : boolean => file.percent != -1).map((file) : string => file.url),\r\n\t\t\tcurrent: index\r\n\t\t});\r\n\t}\r\n\tconst onDelete = (index : number) => {\r\n\t\tif (isDisabled.value || isReadonly.value) return;\r\n\t\tconst delFile = customFiles.value[index]\r\n\t\tcustomFiles.value = customFiles.value.filter((file, i) : boolean => index != i)\r\n\t\temits('remove', { index, file: delFile })\r\n\t}\r\n\r\n\tlet last : number// = 0\r\n\tconst upload = (files : UploadFile[]) => {\r\n\t\tif (!props.autoUpload || props.action == null || props.action!.length < 5) return\r\n\t\tif (props.action == 'uniCloud') {\r\n\t\t\tlet uploadImgs : Promise<UniCloudUploadFileResult>[] = [];\r\n\t\t\tfiles.forEach((file, index) => {\r\n\t\t\t\t// props.beforeRead(file).then((res)=>{})\r\n\r\n\t\t\t\tconst promise = new Promise<UniCloudUploadFileResult>((resolve, reject) => {\r\n\t\t\t\t\tconst dotIndex = file.name!.lastIndexOf('.'); // 找到最后一个点的位置\r\n\t\t\t\t\tconst baseName = file.name!.substring(0, dotIndex);\r\n\t\t\t\t\tconst extension = file.name!.substring(dotIndex);\r\n\t\t\t\t\tconst timestamp = Date.now();\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\tuniCloud.uploadFile({\r\n\t\t\t\t\t\tfilePath: file.url,\r\n\t\t\t\t\t\tcloudPath: `${baseName}_${timestamp}${extension}`,\r\n\t\t\t\t\t\t// cloudPath: file.name!.substring(file.name!.lastIndexOf('.')),\r\n\t\t\t\t\t\tonUploadProgress: (res) => {\r\n\t\t\t\t\t\t\tfile.status = 'loading'\r\n\t\t\t\t\t\t\tfile.percent = Math.floor(res.loaded / res.total * 100)\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t}).then(res => {\r\n\t\t\t\t\t\tfile.path = res.fileID;\r\n\t\t\t\t\t\tfile.status = 'done'\r\n\t\t\t\t\t\t// 获取临时URL\r\n\t\t\t\t\t\tuniCloud.getTempFileURL({\r\n\t\t\t\t\t\t\tfileList: [res.fileID]\r\n\t\t\t\t\t\t}).then(result => {\r\n\t\t\t\t\t\t\tif (result.fileList.length > 0) {\r\n\t\t\t\t\t\t\t\tfile.url = result.fileList[0].tempFileURL;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tresolve(res)\r\n\t\t\t\t\t\t}).catch(error => {\r\n\t\t\t\t\t\t\tuni.__f__('error','at uni_modules/lime-upload/components/l-upload/l-upload.uvue:296','获取临时URL失败', error);\r\n\t\t\t\t\t\t\tresolve(res)\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t// resolve(res)\r\n\t\t\t\t\t}).catch(err => {\r\n\t\t\t\t\t\tfile.status = 'failed'\r\n\t\t\t\t\t\treject(err)\r\n\t\t\t\t\t})\r\n\t\t\t\t})\r\n\t\t\t\tuploadImgs.push(promise as Promise<UniCloudUploadFileResult>)\r\n\t\t\t})\r\n\r\n\t\t\tPromise.all(uploadImgs).then(res => {\r\n\t\t\t\temits('success', res)\r\n\t\t\t}).catch(err => {\r\n\t\t\t\temits('fail', err)\r\n\t\t\t})\r\n\t\t} else {\r\n\t\t\tlet uploadImgs : Promise<UploadFileSuccess>[] = [];\r\n\t\t\tfiles.forEach((file, index) => {\r\n\t\t\t\tconst promise = new Promise<UploadFileSuccess>((resolve, reject) => {\r\n\t\t\t\t\tconst task = uni.uploadFile({\r\n\t\t\t\t\t\turl: props.action!,\r\n\t\t\t\t\t\tfilePath: file.url,\r\n\t\t\t\t\t\tname: file.name,\r\n\t\t\t\t\t\tformData: props.formData,\r\n\t\t\t\t\t\theader: props.headers,\r\n\t\t\t\t\t\tsuccess: (res) => {\r\n\t\t\t\t\t\t\tfile.status = 'done'\r\n\t\t\t\t\t\t\tif (res.statusCode == 200) {\r\n\t\t\t\t\t\t\t\tif (typeof res.data == 'string') {\r\n\t\t\t\t\t\t\t\t\ttry {\r\n\t\t\t\t\t\t\t\t\t\tconst data = JSON.parse<UTSJSONObject>(res.data);\r\n\t\t\t\t\t\t\t\t\t\tconst url = data?.getString('url');\r\n\t\t\t\t\t\t\t\t\t\tif (url != null) {\r\n\t\t\t\t\t\t\t\t\t\t\tfile.path = url\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t} catch (e) {\r\n\t\t\t\t\t\t\t\t\t\t//TODO handle the exception\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tresolve(res)\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tfail(err) {\r\n\t\t\t\t\t\t\tfile.status = 'failed'\r\n\t\t\t\t\t\t\treject(err)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t\ttask.onProgressUpdate((res) => {\r\n\t\t\t\t\t\tfile.status = 'loading'\r\n\t\t\t\t\t\tfile.percent = res.progress\r\n\t\t\t\t\t});\r\n\t\t\t\t})\r\n\t\t\t\tuploadImgs.push(promise as Promise<UploadFileSuccess>)\r\n\t\t\t})\r\n\t\t\tPromise.all(uploadImgs).then(res => {\r\n\t\t\t\temits('success', res)\r\n\t\t\t}).catch(err => {\r\n\t\t\t\temits('fail', err)\r\n\t\t\t})\r\n\t\t}\r\n\t}\r\n\r\n\tconst customLimit = computed(() : number => props.max == 0 ? 20 : props.max - customFiles.value.length)\r\n\tconst onAddTap = () => {\r\n\t\tif (isDisabled.value || isReadonly.value) return;\r\n\t\tchooseFiles({\r\n\t\t\tmediaType: props.mediaType,\r\n\t\t\tcount: customLimit.value,\r\n\t\t\tsourceType: props.sourceType,\r\n\t\t\tsizeType: props.sizeType,\r\n\t\t\tsizeLimit: props.sizeLimit\r\n\t\t} as ChooseFileOptions).then((files) => {\r\n\t\t\tlast = customFiles.value.length\r\n\t\t\tcustomFiles.value = customFiles.value.concat(files)\r\n\t\t\t// @ts-ignore\r\n\t\t\tconst _files = customFiles.value.filter((it, i) : boolean => i > last - 1)\r\n\t\t\tupload(_files)\r\n\t\t\temits('add', _files)\r\n\t\t})\r\n\t}\r\n\r\n\r\n\r\n\r\n\tconst stop = watch(customFiles, (v : UploadFile[]) => {\r\n\t\temits('update:modelValue', v)\r\n\t})\r\n\r\n\tconst stopValue = watch(() : (UTSJSONObject[] | null) => props.modelValue, (v : UTSJSONObject[] | null) => {\r\n\t\tif (v != null && v.length != customFiles.value.length) {\r\n\t\t\tcustomFiles.value = v.map(transformFiles)\r\n\t\t}\r\n\t})\r\n\r\n\tdefineExpose({\r\n\t\tremove: onDelete\r\n\t})\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\tonUnmounted(() => {\r\n\t\tstop()\r\n\r\n\r\n\r\n\t})\r\n</script>\r\n<style lang=\"scss\">\r\n\t@import './index';\r\n</style>","import Component from '/Users/xyhc/Documents/veepai_uniappx/uni_modules/lime-upload/components/l-upload/l-upload.uvue'\nwx.createComponent(Component)"],"names":["inject","computed","uni","_a","_b","ref","unitConvert","uniCloud","chooseFiles","watch","onUnmounted","Component"],"mappings":"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"}