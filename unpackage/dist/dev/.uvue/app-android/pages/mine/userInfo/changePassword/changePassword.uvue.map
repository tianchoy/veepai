{"version":3,"sources":["pages/mine/userInfo/changePassword/changePassword.uvue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n\t<view class=\"container\">\r\n\t\t<view class=\"content\">\r\n\t\t\t<fui-input label=\"旧密码\" placeholder=\"请输入原密码\" type=\"password\" :modelValue=\"oldPassword\"\r\n\t\t\t\t@input=\"updateOldPassword\"></fui-input>\r\n\t\t\t<fui-input label=\"新密码\" placeholder=\"请输入新密码\" type=\"password\" :modelValue=\"newPassword\"\r\n\t\t\t\t@input=\"updateNewPassword\"></fui-input>\r\n\t\t\t<fui-input label=\"确认新密码\" placeholder=\"再次输入新密码\" type=\"password\" :modelValue=\"confirmPassword\"\r\n\t\t\t\t@input=\"updateConfirmPassword\"></fui-input>\r\n\t\t</view>\r\n\t\t<view v-if=\"errorMsg\">\r\n\t\t\t<text class=\"error-msg\">{{errorMsg}}</text>\r\n\t\t</view>\r\n\t\t<view class=\"tips\">\r\n\t\t\t<text class=\"tips-word\">密码8-16位,需包含英文字母、数字、特殊字符中两类及以上</text>\r\n\t\t</view>\r\n\t\t<view>\r\n\t\t\t<fui-button color=\"#fff\" :disabled=\"btnDisabled\" text=\"提交\" background=\"#1296db\" height=\"80rpx\"\r\n\t\t\t\t@onclick=\"submit\"></fui-button>\r\n\t\t</view>\r\n\t</view>\r\n</template>\r\n\r\n<script setup lang=\"uts\">\r\n\timport { ref } from 'vue'\r\n\r\n\tconst oldPassword = ref<string>('')\r\n\tconst newPassword = ref<string>('')\r\n\tconst confirmPassword = ref<string>('')\r\n\tconst btnDisabled = ref<boolean>(true)\r\n\tconst errorMsg = ref<string>('') // 错误提示信息\r\n\r\n\t// 增强密码规则：必须包含两类及以上字符\r\n\tconst passwordReg = /^(?:(?=.*[a-zA-Z])(?=.*\\d)|(?=.*[a-zA-Z])(?=.*[^a-zA-Z\\d])|(?=.*\\d)(?=.*[^a-zA-Z\\d])).{8,16}$/\r\n\r\n\t// 验证密码格式\r\n\tfunction verPassword(psw : string) : boolean {\r\n\t\treturn passwordReg.test(psw)\r\n\t}\r\n\r\n\t// 更新按钮状态\r\n\tconst updateBtnState = () => {\r\n\t\tconst allFieldsFilled = oldPassword.value.length > 0 &&\r\n\t\t\tnewPassword.value.length > 0 &&\r\n\t\t\tconfirmPassword.value.length > 0\r\n\r\n\t\tconst passwordsMatch = newPassword.value === confirmPassword.value\r\n\t\tconst newPwdValid = verPassword(newPassword.value)\r\n\r\n\t\tbtnDisabled.value = !(allFieldsFilled && newPwdValid && passwordsMatch)\r\n\t}\r\n\r\n\t// 更新旧密码\r\n\tconst updateOldPassword = (e : string) => {\r\n\t\toldPassword.value = e\r\n\t\tupdateBtnState()\r\n\t}\r\n\r\n\t// 更新新密码\r\n\tconst updateNewPassword = (e : string) => {\r\n\t\tnewPassword.value = e\r\n\t\terrorMsg.value = ''\r\n\r\n\t\tif (e.length > 0 && !verPassword(e)) {\r\n\t\t\terrorMsg.value = '密码格式不符合要求'\r\n\t\t} else if (confirmPassword.value.length > 0 && e != confirmPassword.value) {\r\n\t\t\terrorMsg.value = '两次输入的密码不一致'\r\n\t\t}\r\n\r\n\t\tupdateBtnState()\r\n\t}\r\n\r\n\t// 更新确认密码\r\n\tconst updateConfirmPassword = (e : string) => {\r\n\t\tconfirmPassword.value = e\r\n\t\terrorMsg.value = ''\r\n\r\n\t\tif (e.length > 0) {\r\n\t\t\tif (!verPassword(e)) {\r\n\t\t\t\terrorMsg.value = '确认密码格式不符合要求'\r\n\t\t\t} else if (e != newPassword.value) {\r\n\t\t\t\terrorMsg.value = '两次输入的密码不一致'\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tupdateBtnState()\r\n\t}\r\n\r\n\t// 提交表单\r\n\tconst submit = () => {\r\n\t\tif (!verPassword(newPassword.value)) {\r\n\t\t\tuni.showToast({\r\n\t\t\t\ttitle: '密码格式错误',\r\n\t\t\t\ticon: 'none'\r\n\t\t\t})\r\n\t\t\treturn\r\n\t\t}\r\n\t\tif (newPassword.value != confirmPassword.value) {\r\n\t\t\tuni.showToast({\r\n\t\t\t\ttitle: '两次密码不一致',\r\n\t\t\t\ticon: 'none'\r\n\t\t\t})\r\n\t\t\treturn\r\n\t\t}\r\n\t\tuni.showToast({\r\n\t\t\ttitle: '提交成功',\r\n\t\t\ticon: 'none'\r\n\t\t})\r\n\t}\r\n</script>\r\n\r\n<style lang=\"scss\">\r\n\t.container {\r\n\t\theight: 100%;\r\n\t\tbackground-color: #f5f5f5;\r\n\t\tpadding: 50rpx 20rpx;\r\n\r\n\t\t.fui-input__label-size {\r\n\t\t\tfont-size: 26rpx !important;\r\n\t\t}\r\n\r\n\t\t.content {\r\n\t\t\tbackground-color: #fff;\r\n\t\t\tborder-radius: 20rpx;\r\n\t\t\tpadding: 20rpx;\r\n\t\t}\r\n\r\n\t\t.tips {\r\n\t\t\tmargin: 40rpx 0;\r\n\r\n\t\t\t.tips-word {\r\n\t\t\t\tfont-size: 30rpx;\r\n\t\t\t\tcolor: #999;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t.error-msg {\r\n\t\t\tmargin-top: 10rpx;\r\n\t\t\tcolor: #e64340;\r\n\t\t\tfont-size: 24rpx;\r\n\t\t}\r\n\t}\r\n</style>"]}