{"version":3,"sources":["pages/mine/systemSetting/systemSetting.uvue"],"names":[],"mappings":"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","sourcesContent":["<template>\n\t<view class=\"container\">\n\t\t<view class=\"content\">\n\t\t\t<view class=\"items underline\">\n\t\t\t\t<view class=\"offline\">\n\t\t\t\t\t<text>离线提醒</text>\n\t\t\t\t\t<fui-switch :checked= \"checked\" @change=\"changeChecked\" @update:checked=\"isChecked\"></fui-switch>\n\t\t\t\t</view>\n\t\t\t\t<text class=\"tips\">设备离线8小时后,推送消息到APP</text>\n\t\t\t</view>\n\t\t\t<view class=\"items\">\n\t\t\t\t<fui-input label=\"自动播放\" :labelSize=\"28\" textAlign=\"right\" :borderBottom=\"false\"\n\t\t\t\t\tplaceholderStyle=\"font-size: 28rpx;\" :disabled=\"true\" :placeholder = \"playTypeItem\" @click=\"playType\">\n\t\t\t\t\t<text>\n\t\t\t\t\t\t<fui-icon name=\"arrowright\" :size=\"48\"></fui-icon>\n\t\t\t\t\t</text>\n\t\t\t\t</fui-input>\n\t\t\t\t<text class=\"tips\">摄像机视频是否自动播放</text>\n\t\t\t</view>\n\t\t</view>\n\t\t<view class=\"content\">\n\t\t\t<view v-for=\"(item,index) in permissionList\" :key=\"index\">\n\t\t\t\t<fui-input :label=\"item.name\" :labelSize=\"28\" textAlign=\"right\" :borderBottom=\"true\"\n\t\t\t\t\t:placeholderStyle=\"item.status == '未授权' ? 'font-size: 28rpx;color:red;' : 'font-size: 28rpx;color:green;'\" :disabled=\"true\" :placeholder = \"item.status\" @click=\"getSystemAuth(item)\">\n\t\t\t\t\t<text>\n\t\t\t\t\t\t<fui-icon name=\"arrowright\" :size=\"48\"></fui-icon>\n\t\t\t\t\t</text>\n\t\t\t\t</fui-input>\n\t\t\t</view>\n\t\t</view>\n\n\t\t<fui-bottom-popup :visible=\"showPicker\">\n\t\t\t<l-picker cancel-btn=\"取消\" confirm-btn=\"确定\" :columns=\"pickerOptions\" @cancel=\"oncancel\" @confirm=\"onConfirm\">\n\t\t\t</l-picker>\n\t\t</fui-bottom-popup>\n\t</view>\n</template>\n\n<script setup lang=\"uts\">\n\timport { ref } from 'vue'\n\timport { PickerColumn ,PickerConfirmEvent} from '@/uni_modules/lime-picker';\n\tconst checked = ref<boolean>(true)\n\tconst showPicker = ref<boolean>(false)\n\tconst pickerOptions = ref<PickerColumn[]>([])\n\tconst playTypeItem = ref<string>('WIFI下自动播放')\n\tconst systemNotifyState = ref<string>('')\n\n\t//授权类型\n\ttype AuthType = {\n\t\tcode:string\n\t\tstate: string\n\t}\n\n\tconst AuthState = ref<AuthType[]>([\n\t\t{\n\t\t\tcode:'authorized',\n\t\t\tstate: '已授权',\n\t\t},\n\t\t{\n\t\t\tcode:'not determined',\n\t\t\tstate: '未授权',\n\t\t},\n\t\t{\n\t\t\tcode:'denied',\n\t\t\tstate: '未授权',\n\t\t},\n\t])\n\n\t// 权限项类型\n\ttype PermissionItem = {\n\t\tname: string\n\t\tcode: string\n\t\tstatus: string\n\t}\n\n\t// 权限列表数据\n\tconst permissionList = ref<PermissionItem[]>([\n\t\t{ name: '位置信息', code: 'locationAuthorized', status: 'notDetermined' },\n\t\t{ name: '相册', code: 'albumAuthorized', status: 'notDetermined' },\n\t\t{ name: '麦克风', code: 'microphoneAuthorized', status: 'notDetermined' },\n\t\t{ name: '蓝牙', code: 'bluetoothAuthorized', status: 'notDetermined' },\n\t\t{ name: '系统通知', code: 'notificationAuthorized', status: 'notDetermined' },\n\t\t{ name: '相机', code: 'cameraAuthorized', status: 'notDetermined' },\n\t])\n\n\tconst getSystemAuth = (item:PermissionItem) => {\n\t\tconst res = uni.getAppAuthorizeSetting();\n\t\tconst code = item.code\n\t\tif(code == 'bluetoothAuthorized'){\n\t\t\tconst resu = uni.getSystemSetting();\n\t\t\tconsole.log(resu)\n\t\t\tif(resu.bluetoothEnabled == false){\n\t\t\t\tuni.showToast({\n\t\t\t\t\ttitle: '请先手动打开蓝牙',\n\t\t\t\t})\n\t\t\t}else{\n\t\t\t\tpermissionList.value.map(item => {\n\t\t\t\t\tif(item.code == 'bluetoothAuthorized'){\n\t\t\t\t\t\titem.status = '已授权'\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t}\n\t\t}else{\n\t\t\tconst status = res[code]\n\t\t\tif(status == 'denied' || status == \"not determined\"){\n\t\t\t\tuni.openAppAuthorizeSetting({\n\t\t\t\t\tsuccess: (res) => {\n\t\t\t\t\t\tconsole.log(res)\n\t\t\t\t\t\t// item.status = '已授权' \n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t}\n\t\t}\n\t\t\n\t}\n\n\n\tconst changeChecked = () => {\n\t\tconsole.log(checked.value)\n\t}\n\n\tconst isChecked = () => {\n\t\tchecked.value = !checked.value\n\t}\n\n\tconst getSystemNotify = () => {\n\t\tconst res = uni.getAppAuthorizeSetting();\n\t\tconsole.log(res.notificationAuthorized)\n\t\tif(res.notificationAuthorized == 'denied' || res.notificationAuthorized == \"not determined\"){\n\t\t\tuni.showToast({\n\t\t\t\ttitle: '请先授权通知权限',\n\t\t\t})\n\t\t\tuni.openAppAuthorizeSetting({\n\t\t\t\tsuccess: (res) => {\n\t\t\t\t\tconsole.log(res)\n\t\t\t\t\tsystemNotifyState.value = '已授权'\n\t\t\t\t}\n\t\t\t})\n\t\t}\n\t}\n\n\tconst playType = () => {\n\t\tpickerOptions.value = [\n\t\t\t[\n\t\t\t\t{\n\t\t\t\t\tlabel: 'WIFI下自动播放',\n\t\t\t\t\tvalue: 'WIFI下自动播放',\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tlabel: '总是播放',\n\t\t\t\t\tvalue: '总是播放',\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tlabel: '不播放',\n\t\t\t\t\tvalue: '不播放',\n\t\t\t\t}\n\t\t\t]\n\t\t]  as PickerColumn[]\n\t\tshowPicker.value = true\n\t}\n\n\tconst onConfirm = (context : PickerConfirmEvent) => {\n\t\tshowPicker.value = false\n\t\tplayTypeItem.value = context.values[0].toString()\n\t}\n\n\tconst oncancel = () => {\n\t\tshowPicker.value = false\n\t}\n\n\tonPageShow(() => {\n    const res = uni.getAppAuthorizeSetting();\n    const resu = uni.getSystemSetting();\n    \n    permissionList.value = permissionList.value.map(item => {\n        const newItem = {...item} as PermissionItem;\n        if (item.code == 'bluetoothAuthorized' && resu.bluetoothEnabled == true) {\n            newItem.status = '已授权';\n        } else {\n            AuthState.value.forEach((auth) => {\n                if (auth.code === res[item.code]) {\n                    newItem.status = auth.state;\n                }\n            });\n        }\n        \n        return newItem;\n    });\n})\n\n\t// onLoad(()=>{\n\t// \tconst res = uni.getAppAuthorizeSetting();\n\t// \tconsole.log(res)\n\t// })\n</script>\n\n<style lang=\"scss\" scoped>\n\t.container{\n\t\theight: 100%;\n\t\tbackground-color: #f5f5f5;\n\t\tpadding: 20rpx;\n\t\t.content{\n\t\t\tbackground-color: #fff;\n\t\t\tpadding: 20rpx;\n\t\t\tborder-radius: 20rpx;\n\t\t\tmargin-bottom: 20rpx;\n\t\t\t.items{\n\t\t\t\tdisplay: flex;\n\t\t\t\tflex-direction: column;\n\t\t\t\tpadding: 20rpx;\n\t\t\t\t.fui-input__wrap{\n\t\t\t\t\tpadding: 20rpx 0 !important;\n\t\t\t\t}\n\t\t\t\t.offline{\n\t\t\t\t\tdisplay: flex;\n\t\t\t\t\tflex-direction: row;\n\t\t\t\t\talign-items: center;\n\t\t\t\t\tjustify-content: space-between;\n\t\t\t\t\tpadding-bottom: 10rpx;\n\t\t\t\t}\n\t\t\t\t.tips{\n\t\t\t\t\t\tcolor:#999;\n\t\t\t\t\t\tfont-size: 24rpx;\n\t\t\t\t\t}\n\t\t\t}\n\t\t\t.underline{\n\t\t\t\tborder-bottom: 1rpx solid #f5f5f5;\n\t\t\t}\n\t\t}\n\t\t\n\t\t.l-picker{\n\t\t\twidth:100%\n\t\t}\n\t}\t\n</style>\n"]}