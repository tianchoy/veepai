{"version":3,"file":"index.uts","sourceRoot":"","sources":["uni_modules/lime-clipboard/utssdk/app-android/index.uts"],"names":[],"mappings":"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","sourcesContent":["import ClipData from \"android.content.ClipData\";\r\nimport ClipboardManager from \"android.content.ClipboardManager\";\r\nimport Context from \"android.content.Context\";\r\nimport { UTSAndroid } from \"io.dcloud.uts\";\r\n\r\nimport { SetClipboardDataOption, GetClipboardDataOption, GetClipboardDataSuccessCallbackOption } from '../interface.uts';\r\nimport { GeneralCallbackResultImpl } from '../unierror.uts';\r\n\r\n\r\n\r\n\r\nexport function setClipboardData(options : SetClipboardDataOption) {\r\n\tconst handleClipboardOperationFailure = () => {\r\n\t\tconst res = new GeneralCallbackResultImpl(9010002)\r\n\t\toptions.fail?.(res)\r\n\t\toptions.complete?.(res)\r\n\t}\r\n\ttry {\r\n\t\tconst context = UTSAndroid.getAppContext();\r\n\t\tif (context != null) {\r\n\t\t\tconst clipboard = context.getSystemService(Context.CLIPBOARD_SERVICE) as ClipboardManager;\r\n\t\t\tconst clip = ClipData.newPlainText('label', options.data);\r\n\t\t\tclipboard.setPrimaryClip(clip);\r\n\t\t\tconst res = new GeneralCallbackResultImpl(9010001)\r\n\t\t\tif(options.showToast != false){\r\n\t\t\t\tuni.showToast({\r\n\t\t\t\t\ticon: 'success',\r\n\t\t\t\t\ttitle: '内容已复制'\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t\toptions.success?.(res)\r\n\t\t\toptions.complete?.(res)\r\n\t\t} else {\r\n\t\t\thandleClipboardOperationFailure()\r\n\t\t}\r\n\r\n\t} catch (e) {\r\n\t\thandleClipboardOperationFailure()\r\n\t}\r\n\r\n}\r\n\r\n\r\nexport function getClipboardData(options : GetClipboardDataOption) {\r\n\tconst handleClipboardOperationFailure = () => {\r\n\t\tconst res = new GeneralCallbackResultImpl(9010002, 'get')\r\n\t\toptions.fail?.(res)\r\n\t\toptions.complete?.(res)\r\n\t}\r\n\ttry {\r\n\t\tconst context = UTSAndroid.getAppContext();\r\n\t\tif (context != null) {\r\n\t\t\tconst clipboard = context.getSystemService(Context.CLIPBOARD_SERVICE) as ClipboardManager;\r\n\t\t\tconst clip = clipboard.getPrimaryClip();\r\n\t\t\tif (clip != null && clip.getItemCount() > 0) {\r\n\t\t\t\tconst text = clip.getItemAt(0).getText();\r\n\t\t\t\tif (text != null) {\r\n\t\t\t\t\toptions.success?.({\r\n\t\t\t\t\t\tdata: text.toString(),\r\n\t\t\t\t\t\terrMsg: '成功'\r\n\t\t\t\t\t} as GetClipboardDataSuccessCallbackOption)\r\n\r\n\t\t\t\t} else {\r\n\t\t\t\t\t// 如果剪贴板没有文本数据，调用失败的处理函数\r\n\t\t\t\t\thandleClipboardOperationFailure();\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\t// 如果剪贴板没有内容，调用失败的处理函数\r\n\t\t\t\thandleClipboardOperationFailure();\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\t// 如果无法获取应用上下文，调用失败的处理函数\r\n\t\t\thandleClipboardOperationFailure();\r\n\t\t}\r\n\r\n\t} catch (e) {\r\n\t\thandleClipboardOperationFailure()\r\n\t}\r\n\r\n}"]}