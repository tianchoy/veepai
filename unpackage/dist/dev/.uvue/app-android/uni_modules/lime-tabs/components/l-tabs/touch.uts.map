{"version":3,"file":"touch.uts","sourceRoot":"","sources":["uni_modules/lime-tabs/components/l-tabs/touch.ts"],"names":[],"mappings":"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","sourcesContent":["// @ts-nocheck\n\n\n\n\n\ntype Direction = '' | 'vertical' | 'horizontal';\n\nfunction getDirection(x : number, y : number) : Direction {\n\tif (x > y) {\n\t\treturn 'horizontal';\n\t}\n\tif (y > x) {\n\t\treturn 'vertical';\n\t}\n\treturn '';\n}\n\ntype TouchEventHandler = (event : UniTouchEvent) => void\ntype BooleanFunction = () => boolean;\ntype UseTouchResult = {\n\tstart : TouchEventHandler,\n\tmove : TouchEventHandler,\n\tstartX : Ref<number>,\n\tstartY : Ref<number>,\n\tdeltaX : Ref<number>,\n\tdeltaY : Ref<number>,\n\toffsetX : Ref<number>,\n\toffsetY : Ref<number>,\n\tdirection : Ref<Direction>,\n\tisVertical : BooleanFunction,\n\tisHorizontal : BooleanFunction,\n\tisTap : Ref<Boolean>,\n}\nexport function useTouch() : UseTouchResult {\n\tconst startX = ref<number>(0);\n\tconst startY = ref<number>(0);\n\tconst deltaX = ref<number>(0);\n\tconst deltaY = ref<number>(0);\n\tconst offsetX = ref<number>(0);\n\tconst offsetY = ref<number>(0);\n\tconst direction = ref<Direction>('');\n\tconst isTap = ref(true);\n\n\tconst isVertical = () : boolean => direction.value === 'vertical';\n\tconst isHorizontal = () : boolean => direction.value === 'horizontal';\n\n\tconst reset = () => {\n\t\tdeltaX.value = 0;\n\t\tdeltaY.value = 0;\n\t\toffsetX.value = 0;\n\t\toffsetY.value = 0;\n\t\tdirection.value = '';\n\t\tisTap.value = true;\n\t};\n\n\tconst start = (event : UniTouchEvent) => {\n\t\treset();\n\t\tstartX.value = event.touches[0].clientX;\n\t\tstartY.value = event.touches[0].clientY;\n\t}\n\tconst move = (event : UniTouchEvent) => {\n\t\tconst touch = event.touches[0];\n\t\t// safari back will set clientX to negative number\n\t\tdeltaX.value = (touch.clientX < 0 ? 0 : touch.clientX) - startX.value;\n\t\tdeltaY.value = touch.clientY - startY.value;\n\t\toffsetX.value = Math.abs(deltaX.value);\n\t\toffsetY.value = Math.abs(deltaY.value);\n\n\t\t// lock direction when distance is greater than a certain value\n\t\tconst LOCK_DIRECTION_DISTANCE = 10;\n\t\tconst TAP_OFFSET = 5;\n\t\tif (\n\t\t\tdirection.value == '' ||\n\t\t\t(offsetX.value < LOCK_DIRECTION_DISTANCE &&\n\t\t\t\toffsetY.value < LOCK_DIRECTION_DISTANCE)\n\t\t) {\n\t\t\tdirection.value = getDirection(offsetX.value, offsetY.value);\n\t\t}\n\n\t\tif (\n\t\t\tisTap.value &&\n\t\t\t(offsetX.value > TAP_OFFSET || offsetY.value > TAP_OFFSET)\n\t\t) {\n\t\t\tisTap.value = false;\n\t\t}\n\t}\n\treturn {\n\t\tstart,\n\t\tmove,\n\t\tstartX,\n\t\tstartY,\n\t\tdeltaX,\n\t\tdeltaY,\n\t\toffsetX,\n\t\toffsetY,\n\t\tdirection,\n\t\tisVertical,\n\t\tisHorizontal,\n\t\tisTap,\n\t} as UseTouchResult\n}"]}