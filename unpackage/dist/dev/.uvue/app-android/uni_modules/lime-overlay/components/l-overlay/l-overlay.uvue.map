{"version":3,"sources":["uni_modules/lime-overlay/components/l-overlay/l-overlay.uvue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n\t<view v-if=\"inited\"\r\n\t\tclass=\"l-overlay\" \r\n\t\tref=\"overlayRef\"\r\n\t\t:class=\"[lClass, classes]\"\r\n\t\t:style=\"[styles, lStyle]\"\r\n\t\t@click.stop=\"onClick\" \r\n\t\t@touchmove.stop=\"noop\" \r\n\t\t@transitionend=\"finished\" \r\n\t\t:aria-role=\"ariaRole\" \r\n\t\t:aria-label=\"ariaLabel\">\r\n\t\t<slot></slot>\r\n\t</view>\r\n</template>\r\n\r\n<script lang=\"uts\" setup>\r\n\timport { useTransition, UseTransitionOptions, TransitionEmitStatus } from '@/uni_modules/lime-transition';\r\n\timport { OverlayProps } from './type';\r\n\tdefineOptions({\r\n\t\tname:'l-overlay'\t\r\n\t})\r\n\t\r\n\tconst props = withDefaults(defineProps<OverlayProps>(), {\r\n\t\tariaLabel: '关闭',\r\n\t\tariaRole: 'button',\r\n\t\tpreventScrollThrough: true,\r\n\t\tzIndex: 998,\r\n\t\tvisible: false,\r\n\t\tduration: 300,\r\n\t})\r\n\t\r\n\tconst emit = defineEmits(['click', 'before-enter', 'enter', 'after-enter', 'before-leave', 'leave', 'after-leave'])\r\n\t\r\n\tconst {inited, display, classes, finished} = useTransition({\r\n\t\tdefaultName: 'fade',\r\n\t\tappear: props.visible,\r\n\t\temits: (name:TransitionEmitStatus) => { emit(name) },\r\n\t\tvisible: (): boolean => props.visible,\r\n\t\tduration: props.duration,\r\n\t} as UseTransitionOptions)\r\n\t\r\n\tconst styles = computed<Map<string,any>>(():Map<string,any> => {\r\n\t\tconst style = new Map<string,any>();\r\n\t\tif (props.bgColor != null) {\r\n\t\t\tstyle.set(\"background\", props.bgColor!)\r\n\t\t}\r\n\t\tif (props.zIndex > 0) {\r\n\t\t\tstyle.set(\"z-index\", props.zIndex)\r\n\t\t}\r\n\r\n\r\n\r\n\r\n\r\n\r\n\t\treturn style\r\n\t})\r\n\t\r\n\tconst noop = () => {}\r\n\tconst onClick = (event: UniPointerEvent) =>{\r\n\t\t// event.stopPropagation()\r\n\t\temit('click', !props.visible)\r\n\t}\r\n\r\n\tconst overlayRef = ref<UniElement|null>(null)\r\n\t\r\n\twatchEffect(()=>{\r\n\t\toverlayRef.value?.style.setProperty('transition-duration', `${props.duration}ms`)\r\n\t\tif(!display.value){\r\n\t\t\toverlayRef.value?.style.setProperty('display', \"none\")\r\n\t\t} else {\r\n\t\t\toverlayRef.value?.style.setProperty('display', \"flex\")\r\n\t\t}\r\n\t})\r\n\r\n\t\r\n</script>\r\n<style lang=\"scss\">\r\n\t@import './index';\r\n</style>"]}