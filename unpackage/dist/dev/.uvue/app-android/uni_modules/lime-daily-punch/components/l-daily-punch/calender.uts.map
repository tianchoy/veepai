{"version":3,"file":"calender.uts","sourceRoot":"","sources":["uni_modules/lime-daily-punch/components/l-daily-punch/calender.uts"],"names":[],"mappings":"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","sourcesContent":["import { LDay, LYearMonth, LGridSize, LMonthData, LOptions } from '../../index'\r\n// import { LDay } from '../../utssdk/interface';\r\n\r\n\r\nexport class ArrowIcon {\r\n\tx : number = 0\r\n\ty : number = 0\r\n\tsize : number = 0\r\n\ttype : string = ''\r\n\tcolor : string = ''\r\n\tconstructor(x : number, y : number, size : number, type : string, color : string) {\r\n\t\tthis.x = x\r\n\t\tthis.y = y\r\n\t\tthis.size = size\r\n\t\tthis.type = type\r\n\t\tthis.color = color\r\n\t}\r\n\tdraw(ctx : CanvasRenderingContext2D) {\r\n\t\tconst { x, y, size, color, type } = this\r\n\t\t// 设置绘图的填充颜色\r\n\t\tctx.strokeStyle = color;\r\n\t\tctx.beginPath();\r\n\t\tctx.lineJoin = 'round'\r\n\t\tctx.lineWidth = 2\r\n\t\t// 根据箭头类型绘制不同的形状\r\n\t\tif (type === 'left') {\r\n\t\t\tctx.moveTo(x + size * 0.6042, y + size * 0.25);\r\n\t\t\tctx.lineTo(x + size * 0.3542, y + size * 0.5);\r\n\t\t\tctx.lineTo(x + size * 0.6042, y + size * 0.75);\r\n\r\n\t\t} else if (type === 'right') {\r\n\t\t\tctx.moveTo(x + size * (1 - 0.6042), y + size * 0.25);\r\n\t\t\tctx.lineTo(x + size * (1 - 0.3542), y + size * 0.5);\r\n\t\t\tctx.lineTo(x + size * (1 - 0.6042), y + size * 0.75);\r\n\t\t}\r\n\r\n\t\tctx.stroke()\r\n\t}\r\n\tisCoordinateInside(x : number, y : number) : boolean {\r\n\t\treturn x >= this.x && x <= this.x + this.size && y >= this.y && y <= this.y + this.size;\r\n\t}\r\n}\r\n\r\nexport class Day implements LDay {\r\n\tday : number = 0;\r\n\tmonth : number = 0;\r\n\tyear : number = 0;\r\n\tfullDay : string = '00';\r\n\tfullMonth : string = '00';\r\n\tfullDate : string = '';\r\n\tisBeforeToday : boolean = false;\r\n\tisToday : boolean = false\r\n\t// isCheckedIn: boolean = false;\r\n\tisCurrentMonth : boolean = false;\r\n\tprivate x : number = 0;\r\n\tprivate y : number = 0;\r\n\tprivate calendar : Calendar\r\n\twidth : number = 0;\r\n\theight : number = 0;\r\n\toriginalMonth : number = 0;\r\n\ttype : string = 'current'\r\n\tfontSize : number = 20\r\n\ttimestamp : number = 0\r\n\tconstructor(day : number, month : number, year : number, isCurrentMonth : boolean, isToday : boolean, isBeforeToday : boolean, calendar : Calendar) {\r\n\t\tthis.day = day;\r\n\t\tthis.month = month\r\n\t\tthis.year = year;\r\n\t\tthis.originalMonth = month - 1;\r\n\t\tthis.fullMonth = this.formatMonth(month)\r\n\t\tthis.fullDay = this.formatDay(day)\r\n\t\tthis.fullDate = `${year}-${this.fullMonth}-${this.fullDay}`;\r\n\t\tthis.isCurrentMonth = isCurrentMonth;\r\n\t\tthis.isBeforeToday = isBeforeToday;\r\n\t\tthis.isToday = isToday\r\n\t\tthis.calendar = calendar\r\n\t\tthis.timestamp = new Date(year, month - 1, day).getTime()\r\n\t}\r\n\r\n\tprivate formatDay(day : number) : string {\r\n\t\treturn `${day}`.padStart(2, '0');\r\n\t}\r\n\r\n\tprivate formatMonth(month : number) : string {\r\n\t\treturn `${month}`.padStart(2, '0');\r\n\t}\r\n\t\r\n\tisCoordinateInside(x : number, y : number) : boolean {\r\n\t\treturn x >= this.x && x <= this.x + this.width && y >= this.y && y <= this.y + this.height;\r\n\t}\r\n\r\n\tsetPosition(x : number, y : number) : void {\r\n\t\tthis.x = x;\r\n\t\tthis.y = y;\r\n\t}\r\n\r\n\tsetDimensions(width : number, height : number) : void {\r\n\t\tthis.width = width;\r\n\t\tthis.height = height;\r\n\t}\r\n\tprivate get opt(): LOptions{\r\n\t\treturn this.calendar.opt\r\n\t}\r\n\tget selectDate() : LDay | null {\r\n\t\treturn this.calendar.selectDate\r\n\t}\r\n\tset selectDate(_val: LDay| null) {\r\n\t\t\r\n\t}\r\n\tget canSupplement() : boolean {\r\n\t\t// 在今日之前 并且 未签到 并且 支持补签\r\n\t\treturn this.opt.canSupplement! && this.isBeforeToday && !this.isCheckedIn\r\n\t}\r\n\tset canSupplement(_v: boolean) {\r\n\t\t\r\n\t}\r\n\tget isCheckedIn() : boolean {\r\n\t\treturn this.calendar.signedDates.includes(this.timestamp)\r\n\t\t// return true\r\n\t\t// if (this.calendar.opt.signedDates == null) return false\r\n\t\t// return this.calendar.opt.signedDates.some((dateString : string) : boolean => {\r\n\t\t// \tconst [year, month, day] = dateString.split('-').map((v : string) : number => parseInt(v));\r\n\t\t// \treturn year == this.year && month == this.month && day == this.day\r\n\t\t// })\r\n\t}\r\n\tset isCheckedIn(_v:boolean) {\r\n\t\t\r\n\t}\r\n\tprivate drawCircle(ctx : CanvasRenderingContext2D, x : number, y : number, radius : number, color : string, border : boolean = false) {\r\n\t\tctx.beginPath();\r\n\t\tif (border) {\r\n\t\t\tctx.lineWidth = 1\r\n\t\t\tctx.strokeStyle = 'white'\r\n\t\t}\r\n\t\tctx.fillStyle = color;\r\n\t\tctx.arc(x, y, radius, 0, Math.PI * 2);\r\n\t\tctx.fill();\r\n\t\tif (border) {\r\n\t\t\tctx.stroke()\r\n\t\t}\r\n\t}\r\n\tdraw(ctx : CanvasRenderingContext2D) {\r\n\t\tconst size = Math.min(this.width, this.height) * 0.9\r\n\t\tconst centerX = this.x + this.width / 2\r\n\t\tconst centerY = this.y + this.height / 2\r\n\t\tconst color = this.opt.color!\r\n\t\tconst unsignedColor = this.opt.unsignedColor!\r\n\t\tconst selectedDayBgColor = this.opt.selectedDayBgColor!\r\n\t\tconst textColor = this.opt.textColor!\r\n\t\tconst disabledColor = this.opt.disabledColor!\r\n\t\tconst dayFontSize = this.opt.dayFontSize!\r\n\t\t\r\n\t\t\r\n\t\tctx.textAlign = 'center';\r\n\t\tctx.font = this.isToday ? `${dayFontSize - 2}px Arial` : `${dayFontSize}px Arial`;\r\n\t\tctx.textBaseline = 'middle';\r\n\r\n\t\t// 判断是否是当前选中日期\r\n\t\tconst isSelectedDate = this.selectDate == null || this.selectDate == this;\r\n\r\n\t\t// 设置字体颜色\r\n\t\tlet txtColor = this.type == 'current' ? textColor : disabledColor;\r\n\t\tif (this.isToday && !isSelectedDate) {\r\n\t\t\ttxtColor = color;\r\n\t\t}\r\n\r\n\t\t// 绘制选中效果\r\n\t\tif (this.selectDate != null && this.selectDate == this) {\r\n\t\t\tctx.beginPath();\r\n\t\t\tctx.fillStyle = selectedDayBgColor;\r\n\t\t\tctx.arc(centerX, centerY, size / 2, 0, Math.PI * 2);\r\n\t\t\tctx.fill();\r\n\t\t}\r\n\t\t\r\n\t\t// 绘制今日效果\r\n\t\tif (this.isToday && isSelectedDate) {\r\n\t\t\tthis.drawCircle(ctx, centerX, centerY, size / 2, color);\r\n\t\t\ttxtColor = 'white';\r\n\t\t\t\r\n\t\t}\r\n\t\t// 绘制已签到或可补签效果 小点\r\n\t\tif (this.type == 'current' && (this.isCheckedIn || this.canSupplement)) {\r\n\t\t\tthis.drawCircle(ctx, centerX, centerY + this.fontSize * 0.9, 4, this.isCheckedIn ? (this.isToday && isSelectedDate ? 'white' : color) : unsignedColor);\r\n\t\t}\r\n\r\n\t\t// 绘制文字\r\n\t\tctx.fillStyle = txtColor;\r\n\t\tctx.fillText(this.isToday ? '今天' : this.fullDay, centerX, centerY);\r\n\r\n\t}\r\n}\r\n\r\n\r\nexport class Calendar {\r\n\tprivate year : number = 0\r\n\tprivate month : number = 0\r\n\tprivate el : UniCanvasElement | null = null\r\n\tprivate ctx : CanvasRenderingContext2D | null = null\r\n\tprivate init : boolean = false\r\n\tprivate today : number = 0\r\n\tprivate currentMonth : number = 0\r\n\tprivate currentYear : number = 0\r\n\t// private headerHeight : number = 50\r\n\t// private weekHeight : number = 30\r\n\tprivate monthDateCache : Map<string, LMonthData>\r\n\tprivate week : string[] = []\r\n\tselectDate : LDay | null = null\r\n\tprivate containerHeight : number = 0\r\n\tprivate containerWidth : number = 0\r\n\tprivate arrowIcons : ArrowIcon[] = []\r\n\topt : LOptions = {\r\n\t\tcanSupplement: false,\r\n\t\tisFullCalendar: true,\r\n\t\tyearMonth: '',\r\n\t\tsignedDates: [],\r\n\t\tweek: ['周日', '周一', '周二', '周三', '周四', '周五', '周六'],\r\n\t\tweekStartsOn: 0,\r\n\t\tweekColor: '#BDC0C3',\r\n\t\tweekFontSize: 12,\r\n\t\tweekHeight: 40,\r\n\t\tselectedDayBgColor: 'rgba(0,0,0,0.06)',\r\n\t\tdayFontSize: 12,\r\n\t\ttextColor: '#1A1F24',\r\n\t\tdisabledColor: '#BDC0C3',\r\n\t\tmonthTitleHeight: 50,\r\n\t\tmonthTitleFontSize: 20,\r\n\t\tcolor: '#3B87F6',\r\n\t\tunsignedColor: '#F1A33A',\r\n\t}\r\n\r\n\tconstructor() {\r\n\t\tconst date = new Date()\r\n\t\tthis.currentYear = date.getFullYear()\r\n\t\tthis.currentMonth = date.getMonth() + 1\r\n\t\tthis.today = date.getDate()\r\n\t\tthis.monthDateCache = new Map<string, LMonthData>()\r\n\t\tthis.week = this.opt.week ?? []\r\n\t}\r\n\tget signedDates() : number[] {\r\n\t\tif (this.opt.signedDates == null) return []\r\n\t\tconst values : number[] = []\r\n\t\tthis.opt.signedDates!.forEach(item => {\r\n\t\t\tconst [year, month, day] = item.split('-').map((v : string) : number => parseInt(v));\r\n\t\t\tconst time = new Date(year, month - 1, day).getTime()\r\n\t\t\tif (!values.includes(time)) {\r\n\t\t\t\tvalues.push(time)\r\n\t\t\t}\r\n\t\t})\r\n\t\treturn values\r\n\t}\r\n\tget checkinDays() : number {\r\n\t\tif (this.signedDates.length == 0) return 0\r\n\t\tconst sortedDates = this.signedDates.sort((a, b):number => {\r\n\r\n\t\t\t// 这里的判断不能省略\r\n\t\t\tif (a.compareTo(b) == 0) {\r\n\t\t\t\treturn 0\r\n\t\t\t}\r\n\r\n\t\t\treturn b - a\r\n\t\t})\r\n\t\treturn this.calculateContinuousCheckinDays(sortedDates);\r\n\t}\r\n\tprivate calculateContinuousCheckinDays(sortedDates : number[]) : number {\r\n\t\tconst dayInMillis = 24 * 60 * 60 * 1000;\r\n\t\tconst todayTime = new Date(this.currentYear, this.currentMonth - 1, this.today).getTime();\r\n\t\tlet count = 0;\r\n\t\tlet streak = 0;\r\n\r\n\t\tfor (let i = 0; i < sortedDates.length; i++) {\r\n\t\t\tif (i == 0) {\r\n\t\t\t\t// 大于1天，即隔了一天就已经中断签到 不再计算\r\n\t\t\t\tif (todayTime - sortedDates[i] > dayInMillis) {\r\n\t\t\t\t\tbreak\r\n\t\t\t\t}\r\n\t\t\t\tif (sortedDates[i] == todayTime || todayTime - sortedDates[i] == dayInMillis) {\r\n\t\t\t\t\tstreak = 1;\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tif (sortedDates[i - 1] - sortedDates[i] == dayInMillis) {\r\n\t\t\t\t\tstreak++;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn streak;\r\n\t}\r\n\tsetCanvas(el : UniCanvasElement | null) {\r\n\t\tif (el == null) return\r\n\t\tthis.el = el\r\n\t\tthis.containerHeight = 6 * (this.opt.dayHeight ?? 0) + this.opt.weekHeight! + this.opt.monthTitleHeight! //6\r\n\t\tthis.containerWidth = this.el!.offsetWidth\r\n\t\tthis.el!.style.setProperty('height', this.containerHeight + 'px')\r\n\t\tthis.ctx = el.getContext('2d')!\r\n\t\tconst dpr = uni.getDeviceInfo().devicePixelRatio ?? 1;\r\n\t\t\r\n\t\tthis.el!.width = this.containerWidth * dpr;\r\n\t\tthis.el!.height = this.containerHeight * dpr;\r\n\t\tthis.ctx!.scale(dpr, dpr)\r\n\t\t// this.ctx = el.getDrawableContext()\r\n\t\t\r\n\t\t// this.ctx.fillStyle = 'red'\r\n\t\t// this.ctx.fillRect(0,0,100,100)\r\n\t}\r\n\tsetOptions(opt : LOptions) {\r\n\t\tlet datechange = false\r\n\t\tlet weekStartsOn = -1\r\n\t\tfor (let key in opt) {\r\n\t\t\tconst value = opt[key]\r\n\t\t\tif (key == 'yearMonth' && value != null && value != this.opt.yearMonth) {\r\n\t\t\t\tdatechange = true\r\n\t\t\t}\r\n\t\t\tif (key == 'weekStartsOn' && value != null && value != this.opt.weekStartsOn) {\r\n\t\t\t\tweekStartsOn = value as number\r\n\t\t\t}\r\n\t\t\tif (value != null) {\r\n\t\t\t\tthis.opt[key] = value\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (weekStartsOn != -1) {\r\n\t\t\tconst normalWeek = [...this.opt.week!]\r\n\t\t\tconst sIndex = weekStartsOn < 0 ? 0 : weekStartsOn >= normalWeek.length ? normalWeek.length - 1 : weekStartsOn\r\n\t\t\tnormalWeek.unshift(...normalWeek.slice(-sIndex))\r\n\t\t\tnormalWeek.length = 6\r\n\t\t\tthis.week = normalWeek\r\n\t\t}\r\n\r\n\t\tif (this.opt.yearMonth != '' && !this.init || datechange) {\r\n\t\t\tconst arr = this.opt.yearMonth!.split('-')\r\n\t\t\tthis.year = parseInt(arr[0])\r\n\t\t\tthis.month = parseInt(arr[1])\r\n\t\t\tthis.init = true\r\n\t\t}\r\n\t}\r\n\r\n\t/** 获取当月共多少天，也就是获取月的最后一天 */\r\n\tgetMonthDayLength(year : number, month : number) : number {\r\n\t\treturn new Date(year, month, 0).getDate()\r\n\t}\r\n\t// 获取当月第一天星期几\r\n\tgetFirstDayOfWeek(year : number, month : number, day : number = 1) : number {\r\n\t\treturn new Date(year, month - 1, day).getDay();\r\n\t}\r\n\t// 获取加/减一个月的日期\r\n\tgetOperateMonthDate(nowYear : number, nowMonth:number, num : number) : LYearMonth {\r\n\t\tlet month = nowMonth + num\r\n\t\tlet year = nowYear;\r\n\t\tif (month > 12) {\r\n\t\t\tmonth = 1;\r\n\t\t\tyear++;\r\n\t\t} else if (month < 1) {\r\n\t\t\tmonth = 12;\r\n\t\t\tyear--;\r\n\t\t}\r\n\t\treturn {\r\n\t\t\tmonth,\r\n\t\t\tyear,\r\n\t\t} as LYearMonth\r\n\t}\r\n\r\n\tgenerateMonthDateCache(year : number = this.year, month : number = this.month) : LMonthData {\r\n\t\t// 检查是否可以切换到下个月\r\n\t\t// const canSwitchToNextMonth = this.currentYear > year || (this.currentYear == year && this.currentMonth > month + 1);\r\n\t\tconst key = `${year}-${month}`\r\n\t\tif (this.monthDateCache.has(key)) {\r\n\t\t\treturn this.monthDateCache.get(key)!\r\n\t\t}\r\n\t\tconst arr : LDay[] = []\r\n\t\tconst days = this.getMonthDayLength(year, month);\r\n\t\tconst firstday = this.getFirstDayOfWeek(year, month);\r\n\t\tconst beforeEmptyLength = (firstday + this.opt.weekStartsOn!) % 7 //this.getFirstDayOfWeek(year, month);\r\n\t\t// Math.ceil((days + beforeEmptyLength) / 7)\r\n\t\tconst afterEmptyLength = 5 * 7 - beforeEmptyLength - days //6 - this.getFirstDayOfWeek(year, month, days); //6\r\n\r\n\t\tconst last = this.getOperateMonthDate(year, month, -1);\r\n\t\tconst lastMonthEndDay = this.getMonthDayLength(last.year, last.month);\r\n\t\tconst next = this.getOperateMonthDate(year, month, 1);\r\n\t\tconst today = new Date(this.currentYear, this.currentMonth - 1, this.today).getTime();\r\n\t\tlet index = 0\r\n\t\tconst getGridSize = (i : number) : LGridSize => {\r\n\t\t\t// 确保this.el存在并且可以获取到边界矩形\r\n\t\t\tconst rect = this.el?.getBoundingClientRect();\r\n\r\n\r\n\t\t\tconst height = this.opt.dayHeight ?? 0;\r\n\r\n\t\t\tconst width = rect == null ? 0 : rect.width / 7;\r\n\r\n\t\t\t// 计算行和列\r\n\t\t\tconst row = Math.floor(i / 7);\r\n\t\t\tconst col = i % 7;\r\n\r\n\t\t\t// 计算网格单元的位置\r\n\t\t\tconst x = col * width;\r\n\t\t\tconst y = row * height + this.opt.monthTitleHeight! + this.opt.weekHeight!;\r\n\r\n\t\t\treturn {\r\n\t\t\t\tx, // 使用计算得到的x值\r\n\t\t\t\ty, // 使用计算得到的y值\r\n\t\t\t\twidth, // 使用计算得到的width值\r\n\t\t\t\theight // 使用正确的变量名height\r\n\t\t\t} as LGridSize;\r\n\t\t};\r\n\t\tfor (var i = 0; i < beforeEmptyLength; i++) {\r\n\t\t\tconst { x, y, width, height } = getGridSize(index);\r\n\t\t\tconst date = lastMonthEndDay - beforeEmptyLength + i + 1;\r\n\t\t\tconst time = new Date(last.year, last.month - 1, date).getTime()\r\n\t\t\tconst day = new Day(\r\n\t\t\t\tdate,\r\n\t\t\t\tlast.month,\r\n\t\t\t\tlast.year,\r\n\t\t\t\tlast.year == this.currentYear && last.month == this.currentMonth,\r\n\t\t\t\ttime == today,\r\n\t\t\t\ttime < today,\r\n\t\t\t\tthis\r\n\t\t\t)\r\n\t\t\tday.type = 'last'\r\n\t\t\tday.setPosition(x, y)\r\n\t\t\tday.setDimensions(width, height)\r\n\t\t\tarr.push(day)\r\n\t\t\tindex++\r\n\t\t}\r\n\t\tfor (var i = 0; i < days; i++) {\r\n\t\t\tconst { x, y, width, height } = getGridSize(index)\r\n\t\t\tconst date = i + 1;\r\n\t\t\tconst time = new Date(year, month - 1, date).getTime()\r\n\t\t\tconst day = new Day(\r\n\t\t\t\tdate,\r\n\t\t\t\tmonth,\r\n\t\t\t\tyear,\r\n\t\t\t\tyear == this.currentYear && month == this.currentMonth,\r\n\t\t\t\ttime == today,\r\n\t\t\t\ttime < today,\r\n\t\t\t\tthis)\r\n\t\t\tday.setPosition(x, y)\r\n\t\t\tday.setDimensions(width, height)\r\n\t\t\tarr.push(day)\r\n\t\t\tindex++\r\n\t\t}\r\n\t\tfor (var i = 0; i < afterEmptyLength; i++) {\r\n\t\t\tconst { x, y, width, height } = getGridSize(index)\r\n\t\t\tconst date = i + 1;\r\n\t\t\tconst time = new Date(next.year, next.month - 1, date).getTime()\r\n\t\t\tconst day = new Day(date,\r\n\t\t\t\tnext.month,\r\n\t\t\t\tnext.year,\r\n\t\t\t\tnext.year == this.currentYear && next.month == this.currentMonth,\r\n\t\t\t\ttime == today,\r\n\t\t\t\ttime < today,\r\n\t\t\t\tthis)\r\n\t\t\tday.type = 'next'\r\n\t\t\tday.setPosition(x, y)\r\n\t\t\tday.setDimensions(width, height)\r\n\t\t\tarr.push(day)\r\n\t\t\tindex++\r\n\t\t}\r\n\r\n\t\tconst monthData : LMonthData = {\r\n\t\t\tyear,\r\n\t\t\tmonth,\r\n\t\t\tdays: arr,\r\n\t\t}\r\n\t\tthis.monthDateCache.set(key, monthData)\r\n\t\treturn monthData\r\n\t}\r\n\tnext() {\r\n\t\tconst { year, month } = this.getOperateMonthDate(this.year, this.month, 1)\r\n\t\t// 检查是否可以切换到下个月\r\n\t\tconst canSwitchToNextMonth = this.currentYear > year || (this.currentYear == year && month - this.currentMonth <= 1);\r\n\t\tif (canSwitchToNextMonth) {\r\n\t\t\tthis.year = year\r\n\t\t\tthis.month = month\r\n\t\t\tthis.render(year, month)\r\n\t\t} else {\r\n\t\t\tuni.showToast({\r\n\t\t\t\ticon: 'error',\r\n\t\t\t\ttitle: '往后最多查看一个月'\r\n\t\t\t})\r\n\t\t}\r\n\t}\r\n\tlast() {\r\n\t\tconst { year, month } = this.getOperateMonthDate(this.year, this.month, -1)\r\n\t\tthis.year = year\r\n\t\tthis.month = month\r\n\t\tthis.render(year, month)\r\n\t}\r\n\t/**\r\n\t* 前往某一天 \r\n\t* @param {string} date 格式 YYYY-MM-DD\r\n\t*/ \r\n\tgoToDate(date : string | null = null) {\r\n\t\tif (date == null) {\r\n\t\t\tthis.render(this.currentYear, this.currentMonth, this.today)\r\n\t\t} else {\r\n\t\t\ttry {\r\n\t\t\t\tconst [year, month, day] = date.split('-').map((item) : number => parseInt(item))\r\n\t\t\t\tthis.render(year, month, day)\r\n\t\t\t} catch (e) {\r\n\t\t\t\tthrow new Error('参数有误')\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\tprivate drawIcon(ctx : CanvasRenderingContext2D, size : number, x : number, y : number, arrow : string, color : string) {\r\n\t\t// 设置绘图的填充颜色\r\n\t\tctx.strokeStyle = color;\r\n\t\tctx.beginPath();\r\n\t\tctx.lineJoin = 'round'\r\n\t\tctx.lineWidth = 2\r\n\t\t// 根据箭头类型绘制不同的形状\r\n\t\tif (arrow === 'left') {\r\n\t\t\tctx.moveTo(x + size * 0.6042, y + size * 0.25);\r\n\t\t\tctx.lineTo(x + size * 0.3542, y + size * 0.5);\r\n\t\t\tctx.lineTo(x + size * 0.6042, y + size * 0.75);\r\n\r\n\t\t} else if (arrow === 'right') {\r\n\t\t\tctx.moveTo(x + size * (1 - 0.6042), y + size * 0.25);\r\n\t\t\tctx.lineTo(x + size * (1 - 0.3542), y + size * 0.5);\r\n\t\t\tctx.lineTo(x + size * (1 - 0.6042), y + size * 0.75);\r\n\t\t}\r\n\r\n\t\tctx.stroke()\r\n\t}\r\n\tprivate drawHead(monthData : LMonthData) {\r\n\t\tconst width = this.containerWidth\r\n\t\tif (this.ctx == null) return\r\n\t\tconst ctx = this.ctx!\r\n\t\tconst height = this.opt.monthTitleHeight!\r\n\t\t// ctx.fillStyle = 'rgba(0,0,0,0.1)'\r\n\t\t// ctx.rect(0,0,width, this.opt.monthTitleHeight!)\r\n\t\t// ctx.fill()\r\n\t\tctx.textAlign = 'center'\r\n\t\tctx.fillStyle = this.opt.textColor!\r\n\t\tctx.font = ` ${this.opt.monthTitleFontSize!}px sans-serif`\r\n\t\tctx.textBaseline = 'middle'\r\n\t\tctx.fillText(`${monthData.year}年` + `${monthData.month}`.padStart(2, '0') + '月', width * 0.5, height * 0.55)\r\n\t\tif (this.arrowIcons.length == 0) {\r\n\t\t\tconst offsetTop = (height - 30) / 2\r\n\t\t\tthis.arrowIcons.push(new ArrowIcon(0, offsetTop, 30, 'left', `#A0A5AA`))\r\n\t\t\tthis.arrowIcons.push(new ArrowIcon(width - 30, offsetTop, 30, 'right', `#A0A5AA`))\r\n\t\t}\r\n\t\tthis.arrowIcons.forEach(icon => {\r\n\t\t\ticon.draw(ctx)\r\n\t\t})\r\n\t}\r\n\tprivate drawWeek() {\r\n\t\tif (this.ctx == null) return\r\n\t\tconst ctx = this.ctx!\r\n\t\tctx.textAlign = 'center'\r\n\t\tctx.font = `${this.opt.weekFontSize}px Arial`\r\n\t\tctx.textBaseline = 'middle'\r\n\t\tctx.fillStyle = this.opt.weekColor!\r\n\t\tthis.week.forEach((week, index) => {\r\n\t\t\tctx.fillText(`${week}`, this.containerWidth / 7 * (index + 0.5), this.opt.monthTitleHeight! + this.opt.weekHeight! * 0.5)\r\n\t\t})\r\n\t}\r\n\trender(year : number = this.year, month : number = this.month, day : number | null = null) {\r\n\t\tconst monthData = this.generateMonthDateCache(year, month);\r\n\t\tif (day != null) {\r\n\t\t\tthis.selectDate = monthData.days.find((item) : boolean => item.day == day)\r\n\t\t}\r\n\t\tif (this.el != null && this.ctx != null) {\r\n\t\t\tthis.ctx!.clearRect(0, 0, this.containerWidth, this.containerHeight)\r\n\t\t\tthis.drawHead(monthData)\r\n\t\t\tthis.drawWeek()\r\n\r\n\t\t\tmonthData.days.forEach(day => {\r\n\t\t\t\tday.draw(this.ctx!)\r\n\t\t\t})\r\n\t\t}\r\n\r\n\t\treturn\r\n\t}\r\n\ttouch(e : UniPointerEvent) {\r\n\t\tif (this.el == null) return\r\n\t\tconst rect = this.el!.getBoundingClientRect()\r\n\t\tconst x = e.clientX - rect.left\r\n\t\tconst y = e.clientY - rect.top\r\n\r\n\t\t// 判断 是点了左右\r\n\t\tconst icon = this.arrowIcons.find((icon) : boolean => icon.isCoordinateInside(x, y))\r\n\r\n\t\tif (icon != null) {\r\n\t\t\tif (icon.type == 'left') {\r\n\t\t\t\tthis.last()\r\n\t\t\t} else {\r\n\t\t\t\tthis.next()\r\n\t\t\t}\r\n\t\t\tthis.opt.panelChange?.({\r\n\t\t\t\tyear: this.year,\r\n\t\t\t\tmonth: this.month\r\n\t\t\t} as LYearMonth)\r\n\t\t\treturn\r\n\t\t}\r\n\t\t// 判断是点了日历\r\n\t\tconst month = this.monthDateCache.get(`${this.year}-${this.month}`)\r\n\t\tif (month == null) return\r\n\t\tconst day = month.days.find((day) : boolean => day.isCoordinateInside(x, y))\r\n\t\t// 只有点击当前月的\r\n\t\tif (day != null && day.type == 'current') {\r\n\t\t\t// if(this.selectDate != day) {\r\n\t\t\t\tthis.selectDate = day\r\n\t\t\t\tthis.render()\r\n\t\t\t// }\r\n\t\t\tthis.opt.select?.(day)\r\n\t\t}\r\n\t}\r\n}"]}