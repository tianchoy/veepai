{"version":3,"file":"l-daily-punch.uvue","sourceRoot":"","sources":["uni_modules/lime-daily-punch/components/l-daily-punch/l-daily-punch.uvue.ts"],"names":[],"mappings":"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","sourcesContent":["import { Calendar} from './calender'\n\timport { PropType } from 'vue'\n\timport { unitConvert } from '@/uni_modules/lime-shared/unitConvert';\n\timport { LDay,  LOptions, LYearMonth } from '../../index';\n\t\nconst __sfc__ = defineComponent({\n  __name: 'l-daily-punch',\n  props: {\n\t\tcanSupplement: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: true\n\t\t},\n\t\tisFullCalendar: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: true\n\t\t},\n\t\tyearMonth: {\n\t\t\ttype: String,\n\t\t\tdefault: () : string => {\n\t\t\t\tconst date = new Date();\n\t\t\t\tconst year = date.getFullYear();\n\t\t\t\tconst month = (date.getMonth() + 1).toString().padStart(2, '0'); // 确保月份是两位数\n\t\t\t\treturn `${year}-${month}`;\n\t\t\t}\n\t\t},\n\t\tsignedDates: {\n\t\t\ttype: Array as PropType<string[]>,\n\t\t\tdefault: () : string[] => {\n\t\t\t\treturn [] as string[];\n\t\t\t},\n\t\t\tvalidator: (value : string[]):boolean => {\n\t\t\t\t// 简单的验证函数，确保每个元素都是有效的日期字符串\n\t\t\t\treturn value.every((date : string) : boolean => /^\\d{4}-\\d{2}-\\d{2}$/.test(date));\n\t\t\t}\n\t\t},\n\n\t\tdayHeight: {\n\t\t\ttype: Object,\n\t\t\tdefault: 76\n\t\t},\n\n\n\n\n\n\n\n\t\tweek: {\n\t\t\ttype: Array as PropType<string[]>,\n\t\t\tdefault: () : string[] => ['周日', '周一', '周二', '周三', '周四', '周五', '周六']\n\t\t},\n\t\tweekStartsOn: {\n\t\t\ttype: Number,\n\t\t\tdefault: 6,\n\t\t\tvalidator: (value:number):boolean => value <= 6\n\t\t},\n\t\tweekColor: {\n\t\t\ttype: String,\n\t\t\tdefault: '#BDC0C3'\n\t\t},\n\t\tweekFontSize: {\n\t\t\ttype: Number,\n\t\t\tdefault: 14\n\t\t},\n\t\tweekHeight: {\n\t\t\ttype: Number,\n\t\t\tdefault: 30\n\t\t},\n\t\tselectedDayBgColor: {\n\t\t\ttype: String,\n\t\t\tdefault: 'rgba(0,0,0,0.06)'\n\t\t},\n\t\tdayFontSize: {\n\t\t\ttype: Number,\n\t\t\tdefault: 16\n\t\t},\n\t\ttextColor: {\n\t\t\ttype: String,\n\t\t\tdefault: '#1A1F24'\n\t\t},\n\t\tdisabledColor: {\n\t\t\ttype: String,\n\t\t\tdefault: '#BDC0C3'\n\t\t},\n\t\tmonthTitleHeight: {\n\t\t\ttype: Number,\n\t\t\tdefault: 50\n\t\t},\n\t\tmonthTitleFontSize: {\n\t\t\ttype: Number,\n\t\t\tdefault: 20\n\t\t},\n\t\tcolor: {\n\t\t\ttype: String,\n\t\t\tdefault: '#3B87F6'\n\t\t},\n\t\tunsignedColor: {\n\t\t\ttype: String,\n\t\t\tdefault: '#F1A33A'\n\t\t},\n\t},\n  emits: ['select', 'panelChange', 'streak'],\n  setup(__props): any | null {\nconst __ins = getCurrentInstance()!;\nconst _ctx = __ins.proxy as InstanceType<typeof __sfc__>;\nconst _cache = __ins.renderCache;\n\n\tfunction emits(event: string, ...do_not_transform_spread: Array<any | null>) {\n__ins.emit(event, ...do_not_transform_spread)\n}\n\tconst props = __props\n\tlet drawRef = ref<UniCanvasElement|null>(null)\n\tlet calender:Calendar|null = null\n\t\n\t\n\tconst styles = computed(():Map<string, any> => {\n\t\tconst style = new Map<string, any>()\n\t\tstyle.set('height', `${6 * unitConvert(props.dayHeight) + props.weekHeight + props.monthTitleHeight}px`)\n\t\t\n\t\treturn style\n\t})\n\t\n\tconst onClick = (e: UniPointerEvent) => {\n\t\tcalender?.touch(e)\n\t}\n\t\n\tconst setOpt = () => {\n\t\tconst opt:LOptions = {\n\t\t\tcanSupplement: props.canSupplement,\n\t\t\tisFullCalendar: props.isFullCalendar,\n\t\t\tyearMonth: props.yearMonth,\n\t\t\tsignedDates: [...props.signedDates],\n\t\t\tdayHeight: unitConvert(props.dayHeight),\n\t\t\tweek: props.week as string[],\n\t\t\tweekStartsOn: props.weekStartsOn,\n\t\t\tweekColor: props.weekColor,\n\t\t\tweekFontSize: props.weekFontSize,\n\t\t\tweekHeight: props.weekHeight,\n\t\t\tselectedDayBgColor: props.selectedDayBgColor,\n\t\t\tdayFontSize: props.dayFontSize,\n\t\t\ttextColor: props.textColor,\n\t\t\tdisabledColor: props.disabledColor,\n\t\t\tmonthTitleHeight: props.monthTitleHeight,\n\t\t\tmonthTitleFontSize: props.monthTitleFontSize,\n\t\t\tcolor:props.color,\n\t\t\tunsignedColor: props.unsignedColor,\n\t\t\tselect: (e: LDay) => {\n\t\t\t\temits('select', e)\n\t\t\t},\n\t\t\tpanelChange: (e: LYearMonth) => {\n\t\t\t\temits('panelChange', e)\n\t\t\t}\n\t\t}\n\t\tif(calender == null) return\n\t\tcalender!.setOptions(opt)\n\t}\n\twatchEffect(() => {\n\t\tsetOpt()\n\t\tif(calender == null) return\n\t\tcalender!.render()\n\t\temits('streak', calender!.checkinDays)\n\t})\n\tconst instance = getCurrentInstance()!.proxy!\n\t\n\n\t// 异步调用方式, 跨平台写法\n\tuni.createCanvasContextAsync({\n\t\tid: 'l-daily-punch',\n\t\tcomponent: instance,\n\t\tsuccess: (context : CanvasContext) => {\n\t\t\tconst canvasContext = context.getContext('2d')!;\n\t\t\tconst canvas = canvasContext.canvas;\n\t\t\tcalender = new Calendar()\n\t\t\tsetOpt()\n\t\t\tcalender!.setCanvas(canvas)\n\t\t\tcalender!.render()\n\t\t\temits('streak', calender!.checkinDays)\n\t\t}\n\t})\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nreturn (): any | null => {\n\n  return createElementVNode(\"view\", utsMapOf({ class: \"calender\" }), [\n    createElementVNode(\"canvas\", utsMapOf({\n      ref: \"dailyRef\",\n      id: \"l-daily-punch\",\n      class: \"l-daily-punch\",\n      style: normalizeStyle([unref(styles)]),\n      onClick: onClick\n    }), null, 4 /* STYLE */)\n  ])\n}\n}\n\n})\nexport default __sfc__\nexport type LDailyPunchComponentPublicInstance = InstanceType<typeof __sfc__>;\nconst GenUniModulesLimeDailyPunchComponentsLDailyPunchLDailyPunchStyles = [utsMapOf([[\"l-daily-punch\", padStyleMapOf(utsMapOf([[\"width\", \"100%\"]]))], [\"calender\", padStyleMapOf(utsMapOf([[\"marginTop\", 0], [\"marginRight\", \"30rpx\"], [\"marginBottom\", 0], [\"marginLeft\", \"30rpx\"]]))]])]\n"]}