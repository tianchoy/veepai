{"version":3,"sources":["uni_modules/lime-popup/components/l-popup/l-popup.uvue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n\t<l-overlay\r\n\t\t:visible=\"innerValue\" \r\n\t\t:zIndex=\"overlayZIndex\"\r\n\t\t:appear=\"true\"\r\n\t\t:preventScrollThrough=\"preventScrollThrough\"\r\n\t\t:l-style=\"overlayStyle\"\r\n\t\t@click=\"handleOverlayClick\"\r\n\t\tv-if=\"destroyOnClose ? display && overlay : overlay\">\r\n\t</l-overlay>\r\n\t<view class=\"l-popup\" \r\n\t\tref=\"popupRef\"\r\n\t\tv-if=\"destroyOnClose ? display : inited\"\r\n\t\t:class=\"rootClass\" \r\n\t\t:style=\"[styles, lStyle]\"\r\n\t\t@transitionend=\"finished\">\r\n\t\t<slot></slot>\r\n\t\t<view class=\"l-popup__close\" v-if=\"closeable\" @click=\"handleClose\">\r\n\t\t\t<slot name=\"close-btn\">\r\n\t\t\t\t<l-icon class=\"l-popup__close-icon\" :name=\"closeIcon\" size=\"27px\" :color=\"iconColor\" />\r\n\t\t\t</slot>\r\n\t\t</view>\r\n\t</view>\r\n</template>\r\n<script lang=\"uts\" setup>\r\n\t/**\r\n\t * Popup 弹出层组件\r\n\t * @description 提供多种位置的弹窗展示能力，支持自定义内容和动画效果\r\n\t * <br>插件类型：LPopupComponentPublicInstance \r\n\t * @tutorial https://ext.dcloud.net.cn/plugin?name=lime-popup\r\n\t * \r\n\t * @property {boolean} closeable 显示关闭按钮（默认：false）\r\n\t * @property {boolean} closeOnClickOverlay 点击遮罩关闭（默认：true）\r\n\t * @property {boolean} destroyOnClose 关闭时销毁内容（默认：false）\r\n\t * @property {string} overlayStyle 遮罩层样式（支持CSS字符串）\r\n\t * @property {'top' | 'left' | 'right' | 'bottom' | 'center' | ''} position 弹出位置\r\n\t * @value top    从顶部滑入\r\n\t * @value bottom 从底部滑入\r\n\t * @value left   从左侧滑入  \r\n\t * @value right  从右侧滑入\r\n\t * @value center 居中显示（默认）\r\n\t * @property {boolean} preventScrollThrough 阻止滚动穿透（默认：true）\r\n\t * @property {boolean} overlay 显示遮罩层（默认：true）\r\n\t * @property {string} transitionName 自定义动画名称（配合transition使用）\r\n\t * @property {string|number|Array} radius 圆角 可以是字符，数值，数组\r\n\t * @property {boolean} visible 控制显示/隐藏（支持v-model）\r\n\t * @property {number} zIndex 组件层级（默认：999）\r\n\t * @property {number} duration 动画时长（单位ms，默认：300）\r\n\t * @property {string} bgColor 内容区域背景色（默认：#ffffff）\r\n\t * @property {string} closeIcon 关闭图标名称/路径（默认：'close'）\r\n\t * @property {string} iconColor 关闭图标颜色（默认：#333）\r\n\t * @property {string} lStyle 自定义内容区样式（支持CSS字符串）\r\n\t * @property {boolean} safeAreaInsetBottom 适配底部安全区域（默认：true）\r\n\t * @property {boolean} safeAreaInsetTop 适配顶部安全区域（默认：true）\r\n\t * @event {Function} close 关闭时触发（返回触发来源：'close-btn' | 'overlay'）\r\n\t * @event {Function} change 切换时触发\r\n\t * @event {Function} click-overlay 点击遮罩触发\r\n\t * @event {Function} click-close 点击关闭触发\r\n\t * @event {Function} open 打开触发\r\n\t * @event {Function} opened 打开完成触发\r\n\t * @event {Function} closed 关闭完成触发\r\n\t * @event {Function} before-enter\r\n\t * @event {Function} enter \r\n\t * @event {Function} after-enter\r\n\t * @event {Function} before-leave\r\n\t * @event {Function} leave\r\n\t * @event {Function} after-leave\r\n\t */\r\n\timport { useTransition, UseTransitionOptions, TransitionEmitStatus } from '@/uni_modules/lime-transition';\r\n\timport { convertRadius } from './utils'\r\n\timport { PopupProps } from './type';\r\n\t\r\n\tconst emit = defineEmits(['change', 'click-overlay', 'click-close', 'open', 'opened','close','closed', 'before-enter', 'enter', 'after-enter', 'before-leave', 'leave', 'after-leave'])\r\n\tconst props = withDefaults(defineProps<PopupProps>(),{\r\n\t\tcloseable: false,\r\n\t\toverlay: true,\r\n\t\tcloseOnClickOverlay: true,\r\n\t\tpreventScrollThrough: true,\r\n\t\tdestroyOnClose: false,\r\n\t\tsafeAreaInsetBottom: true,\r\n\t\tsafeAreaInsetTop: false,\r\n\t\tposition: 'center',\r\n\t\tzIndex: 999,\r\n\t\tduration: 300,\r\n\t\tcloseIcon: 'close'\r\n\t})\r\n\t\r\n\tconst modelValue = defineModel({type: Boolean});\r\n\tconst innerValue = computed({\r\n\t\tset(value: boolean) {\r\n\t\t\tmodelValue.value = value;\r\n\t\t\temit('change', value)\r\n\t\t},\r\n\t\tget():boolean {\r\n\r\n\t\t\treturn (props.visible ?? false) || modelValue.value// ?? false\r\n\r\n\r\n\r\n\r\n\t\t}\r\n\t} as WritableComputedOptions<boolean>)\r\n\tconst status = ref<TransitionEmitStatus>('before-enter')\r\n\tconst {inited, display, classes, finished} = useTransition({\r\n\t\tdefaultName: props.transitionName ?? 'popup-fade',\r\n\t\tappear: innerValue.value,\r\n\t\temits: (name:TransitionEmitStatus) => { \r\n\t\t\tstatus.value = name\r\n\t\t\tif(name == 'before-enter') {\r\n\t\t\t\temit('open')\r\n\t\t\t} else if(name == 'after-enter') {\r\n\t\t\t\temit('opened')\r\n\t\t\t} else if(name == 'before-leave') {\r\n\t\t\t\temit('close')\r\n\t\t\t} else if(name == 'after-leave') {\r\n\t\t\t\temit('closed')\r\n\t\t\t}\r\n\t\t\temit(name) \r\n\t\t},\r\n\t\tvisible: (): boolean => innerValue.value,\r\n\t\tduration: props.duration,\r\n\t} as UseTransitionOptions)\r\n\t\r\n\tconst overlayZIndex = computed(():number => props.zIndex > 0 ? props.zIndex - 1: 998);\r\n\t\r\n\tconst rootClass = computed(():string=>{\r\n\t\tconst safe = props.safeAreaInsetTop && props.position == 'top' \r\n\t\t\t?  'l-popup--safe-top' \r\n\t\t\t:  props.safeAreaInsetBottom && props.position == 'bottom' \r\n\t\t\t\t? 'l-popup--safe-bottom'\r\n\t\t\t\t: ''\r\n\t\t\t\r\n\t\treturn `l-popup--${props.position} ${safe} ${classes.value}`\r\n\t})\r\n\t\r\n\tconst {safeAreaInsets} = uni.getWindowInfo()\r\n\t\r\n\tconst styles = computed<Map<string,any>>(():Map<string,any> => {\r\n\t\tconst style = new Map<string,any>();\r\n\r\n\t\tstyle.set('transition-duration', (['after-leave', 'before-enter'].includes(status.value) ? 0 : props.duration) + 'ms')\r\n\r\n\r\n\r\n\r\n\t\tif (props.bgColor != null) {\r\n\t\t\tstyle.set(\"background\", props.bgColor!)\r\n\t\t}\r\n\t\tif (props.zIndex > 0) {\r\n\t\t\tstyle.set(\"z-index\", props.zIndex)\r\n\t\t}\r\n\t\t\r\n\t\tif(props.safeAreaInsetBottom && props.position == 'bottom') {\r\n\t\t\tstyle.set('padding-bottom', safeAreaInsets.bottom + 'px')\r\n\t\t}\r\n\t\tif(props.safeAreaInsetTop && props.position == 'top') {\r\n\t\t\tstyle.set('padding-top', safeAreaInsets.top + 'px')\r\n\t\t}\r\n\t\t\r\n\t\tif(props.radius != null) {\r\n\t\t\tconst values = convertRadius(props.radius!)\r\n\t\t\tstyle.set('border-top-left-radius', values[0])\r\n\t\t\tstyle.set('border-top-right-radius', values[1])\r\n\t\t\tstyle.set('border-bottom-right-radius', values[2])\r\n\t\t\tstyle.set('border-bottom-left-radius', values[3])\r\n\t\t}\r\n\t\t\r\n\r\n\r\n\r\n\r\n\r\n\t\t\r\n\t\treturn style\r\n\t})\r\n\tconst handleOverlayClick = () => {\r\n\t\tif(props.closeOnClickOverlay) {\r\n\t\t\tinnerValue.value = false;\r\n\t\t\temit('click-overlay')\r\n\t\t}\r\n\t}\r\n\tconst handleClose = () => {\r\n\t\tinnerValue.value = false;\r\n\t\temit('click-close')\r\n\t}\r\n\t\r\n\r\n\tconst popupRef = ref<UniElement|null>(null)\r\n\t\r\n\twatchEffect(()=>{\r\n\t\tif(!display.value) {\r\n\t\t\tpopupRef.value?.style.setProperty('display', 'none')\r\n\t\t} else {\r\n\t\t\tpopupRef.value?.style.setProperty('display', 'flex')\r\n\t\t}\r\n\t})\r\n\r\n</script>\r\n<style lang=\"scss\">\r\n\t@import \"./index-u\";\r\n</style>"]}