{"version":3,"sources":["uni_modules/lime-icon/components/l-icon/l-icon.uvue"],"names":[],"mappings":"AAoBC,OAAO,EAAE,OAAO,EAAE,MAAM,mCAAmC,CAAC;AAC5D,OAAO,EAAE,cAAc,EAAE,MAAM,SAAS,CAAC;AACzC,OAAO,EAAE,KAAK,EAAE,MAAM,SAAS,CAAA;AAC/B,kBAAkB;AAClB,kBAAkB;AAClB,KAAK;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;QAnBL;;;;;;;;;;;;WAYG;QAQH,MAAM,IAAI,GAAG,QAAQ,CAAA;QACrB,MAAM,UAAU,EAAG,MAAM,GAAG,6BAA6B,CAAC;QAC1D,MAAM,UAAU,EAAG,MAAM,GAAG,IAAI,GAAG,GAAG,CAAC,cAAc,CAAC,gBAAgB,CAAC,IAAI,MAAM,GAAG,IAAI,CAAA;QAExF,MAAM,KAAK,GAAG,OAyCZ,CAAA;QAEF,SAAA,KAAA,CAAA,KAAA,EAAA,MAAA,EAAA,GAAA,uBAAA,EAAA,KAAA,CAAA,GAAA,GAAA,IAAA,CAAA;YAAA,KAAA,CAAA,IAAA,CAAA,KAAA,EAAA,GAAA,uBAAA,CAAA,CAAA;QAAA,CAAoC;QACpC,MAAM,eAAe,GAAG,MAAM,CAAC,cAAc,EAAE,iBAAiB,EAAE,EAAC,GAAG,EAAE,KAAK,EAAE,KAAK,EAAE,IAAI,GAAG,CAAC,MAAM,EAAE,GAAG,GAAC,IAAI,GAAG,EAAC,IAAI,cAAc,CAAC,CAAA;QAKrI,MAAM,SAAS,GAAG,QAAQ,CAAC,IAAG,MAAM,CAAC,EAAE,CAAC,KAAK,CAAC,IAAI,CAAC,CAAA;QAEnD,MAAM,cAAc,GAAG,QAAQ,CAAC,IAAG,MAAM,GAAC,IAAI,CAAC,EAAE;YAChD,OAAO,eAAe,CAAC,KAAK,CAAC,GAAG,CAAC,SAAS,CAAC,KAAK,CAAC,IAAI,MAAM,GAAG,IAAI,CAAA;QACnE,CAAC,CAAC,CAAA;QACF,MAAM,UAAU,GAAG,GAAG,CAAC,iBAAiB,GAAG,IAAI,EAAE,IAAI,CAAC,CAAA;QACtD,MAAM,OAAO,GAAG,QAAQ,CAAC,OAAO,EAAE,IAAK,OAAO,CAAC,EAAE,CAAC,SAAS,CAAC,KAAK,CAAC,OAAO,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC,CAAC,CAAA;QACrF,MAAM,SAAS,GAAG,QAAQ,CAAC,OAAO,EAAE,IAAK,OAAO,CAAC,EAAE;YAClD,OAAO,CAAC,OAAO,CAAC,KAAK,IAAI,SAAS,CAAC,KAAK,CAAC,QAAQ,CAAC,GAAG,CAAC,CAAA;QACvD,CAAC,CAAC,CAAA;QACF,MAAM,OAAO,GAAG,QAAQ,CAAC,OAAO,EAAE,IAAK,OAAO,CAAC,EAAE;YAChD,OAAO,oCAAoC,CAAC,IAAI,CAAC,SAAS,CAAC,KAAK,CAAC,IAAI,mDAAmD,CAAC,IAAI,CAAC,SAAS,CAAC,KAAK,CAAC,CAAA;QAC/I,CAAC,CAAC,CAAA;QACF,MAAM,KAAK,GAAG,QAAQ,CAAC,OAAO,EAAE,IAAG,OAAO,CAAC,EAAE;YAC5C,OAAO,SAAS,CAAC,IAAI,CAAC,SAAS,CAAC,KAAK,CAAC,IAAI,SAAS,CAAC,KAAK,CAAC,UAAU,CAAC,oBAAoB,CAAC,IAAI,SAAS,CAAC,KAAK,CAAC,UAAU,CAAC,MAAM,CAAC,CAAA;QACjI,CAAC,CAAC,CAAA;QACF,MAAM,OAAO,GAAG,QAAQ,CAAC,GAAG,CAAC,MAAM,EAAE,GAAG,CAAC,EAAE,IAAK,GAAG,CAAC,MAAM,EAAE,GAAG,CAAC,CAAC,EAAE;YAClE,MAAM,GAAG,GAAG,IAAI,GAAG,CAAC,MAAM,EAAE,GAAG,GAAG,CAAA;YAClC,GAAG,CAAC,GAAG,CAAC,GAAG,IAAI,QAAQ,EAAE,CAAC,OAAO,CAAC,KAAK,IAAI,CAAC,SAAS,CAAC,KAAK,IAAI,CAAC,KAAK,CAAC,KAAK,CAAC,CAAA;YAC5E,GAAG,CAAC,GAAG,CAAC,GAAG,IAAI,SAAS,EAAE,OAAO,CAAC,KAAK,IAAI,SAAS,CAAC,KAAK,IAAI,KAAK,CAAC,KAAK,CAAC,CAAA;YAC1E,GAAG,CAAC,GAAG,CAAC,KAAK,CAAC,MAAM,EAAE,KAAK,CAAC,MAAM,CAAC,MAAM,GAAG,CAAC,CAAC,CAAA;YAC9C,GAAG,CAAC,GAAG,CAAC,KAAK,CAAC,MAAM,EAAE,KAAK,CAAC,MAAM,CAAC,MAAM,GAAG,CAAC,CAAC,CAAA;YAI9C,OAAO,GAAG,CAAA;QACX,CAAC,CAAC,CAAA;QACF,MAAM,MAAM,GAAG,QAAQ,CAAC,GAAG,CAAC,MAAM,EAAE,GAAG,CAAC,EAAE,IAAK,GAAG,CAAC,MAAM,EAAE,GAAG,CAAC,CAAC,EAAE;YACjE,MAAM,KAAK,GAAG,IAAI,GAAG,CAAC,MAAM,EAAE,GAAG,GAAG,CAAC;YAErC,IAAI,CAAC,KAAK,CAAC,KAAK,IAAI,EAAE,IAAI,KAAK,CAAC,KAAK,IAAI,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,KAAK,IAAI,CAAC,SAAS,CAAC,KAAK,EAAE;gBACrF,KAAK,CAAC,GAAG,CAAC,OAAO,EAAE,KAAK,CAAC,KAAK,CAAC,CAAC,CAAA;aAChC;YACD,MAAM,IAAI,GAAG,OAAO,CAAC,KAAK,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,OAAO,CAAC,KAAK,IAAI,SAAS,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC,IAAI,CAAC,CAAA;YAQxF,IAAI,IAAI,IAAI,IAAI,EAAE;gBACjB,IAAI,OAAO,CAAC,KAAK,IAAI,SAAS,CAAC,KAAK,IAAI,KAAK,CAAC,KAAK,EAAE;oBACpD,KAAK,CAAC,GAAG,CAAC,QAAQ,EAAE,IAAI,CAAC,CAAA;oBACzB,KAAK,CAAC,GAAG,CAAC,OAAO,EAAE,IAAI,CAAC,CAAA;iBACxB;qBAAM;oBACN,KAAK,CAAC,GAAG,CAAC,WAAW,EAAE,IAAI,CAAC,CAAA;iBAC5B;aAED;YACD,OAAO,KAAK,CAAA;QACb,CAAC,CAAC,CAAA;QACF,MAAM,QAAQ,GAAG,QAAQ,CAAC,MAAM,EAAE,IAAK,MAAM,CAAC,EAAE;YAC/C,OAAO,KAAK,CAAC,KAAK,CAAC,GAAG,CAAC,SAAS,CAAC,KAAK,CAAC,IAAI,MAAM,GAAG,IAAI,IAAI,CAAC,cAAc,CAAC,IAAI,CAAC,SAAS,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,SAAS,CAAC,KAAK,CAAC,CAAC,CAAC,EAAE,CAAC,CAAA;QAC1H,CAAC,CAAC,CAAA;QACF,MAAM,OAAO,GAAG,GAAG,CAAC,KAAK,CAAC,CAAA;QAC1B,MAAM,QAAQ,GAAG,IAAI,GAAG,CAAC,MAAM,EAAE,MAAM,GAAG,CAAA;QAC1C,MAAM,OAAO,GAAG,QAAQ,CAAC,IAAG,MAAM,CAAC,EAAE;YACpC,MAAM,YAAY,GAAG,UAAU,IAAI,IAAI,IAAI,UAAU,IAAI,EAAE,CAAA;YAC3D,gDAAgD;YAChD,IAAG,OAAO,CAAC,KAAK,EAAE;gBACjB,OAAO,OAAO,CAAC,KAAK,CAAC,CAAC,CAAC,SAAS,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,UAAU,IAAI,EAAE,CAAC,GAAG,SAAS,CAAC,KAAK,CAAA;aAC7E;iBAAM,IAAG,SAAS,CAAC,KAAK,EAAE;gBAC1B,OAAO;gBACP,IAAG,QAAQ,CAAC,GAAG,CAAC,SAAS,CAAC,KAAK,CAAC,IAAI,CAAC,OAAO,CAAC,KAAK,EAAE;oBACnD,OAAO,QAAQ,CAAC,GAAG,CAAC,SAAS,CAAC,KAAK,CAAC,CAAC,CAAA;iBACrC;gBACD,yBAAyB;gBACzB,qCAAqC;gBACrC,MAAM,KAAK,GAAG,GAAG,YAAY,CAAC,CAAC,CAAC,UAAU,CAAC,CAAC,CAAC,UAAU,EAAE,CAAA;gBACzD,MAAM,KAAK,GAAE,cAAc,CAAC,KAAK,IAAI,KAAK,GAAG,GAAG,SAAS,CAAC,KAAK,MAAM,CAAC,OAAO,CAAC,IAAI,EAAE,GAAG,CAAC,CAAA;gBACxF,QAAQ,CAAC,GAAG,CAAC,SAAS,CAAC,KAAK,EAAE,KAAK,CAAC,CAAA;gBACpC,OAAO,KAAK,CAAA;aACZ;iBAAM,IAAG,KAAK,CAAC,KAAK,EAAE;gBACtB,OAAO,CAAC,SAAS,CAAC,IAAI,CAAC,SAAS,CAAC,KAAK,CAAC,IAAI,UAAU,IAAI,IAAI,IAAI,CAAC,OAAO,CAAC,KAAK,CAAC,CAAC,CAAC,UAAU,CAAC,CAAC,CAAC,EAAE,CAAC,GAAG,SAAS,CAAC,KAAK,CAAC,OAAO,CAAC,IAAI,EAAE,GAAG,CAAC,CAAA;aACvI;iBAAM;gBACN,OAAO,EAAE,CAAA;aACT;QACF,CAAC,CAAC,CAAA;QAEF,MAAM,UAAU,GAAG,GAAG,EAAE;YACvB,OAAO,CAAC,KAAK,GAAG,IAAI,CAAA;QACrB,CAAC,CAAA;QACD,MAAM,SAAS,GAAG,GAAG,EAAE;YACtB,OAAO,CAAC,KAAK,GAAG,KAAK,CAAA;QACtB,CAAC,CAAA;;2BAnKgF,KAAA,CAAA,OAAA,CAAO,IAAA,CAAK,KAAA,CAAA,SAAA,CAAS,IAAA,CAAK,KAAA,CAAA,KAAA,CAAK,CAAA;kBAAhH,GAAA,CAA6J,MAAA,EAAA,GAAA,CAAA;;oBAAvJ,KAAK,EAAA,GAAA,CAAA,CAAC,QAAQ,EAAA,CAAU,KAAA,CAAA,OAAA,CAAO,EAAE,IAAA,CAAA,MAAM,CAAA,CAAA,CAAA;oBAAI,KAAK,EAAA,GAAA,CAAA,CAAG,KAAA,CAAA,MAAA,CAAM,EAAE,IAAA,CAAA,MAAM,CAAA,CAAA;oBAA4C,OAAK,EAAA,GAAA,EAAA,GAAE,IAAA,CAAA,KAAK,CAAA,OAAA,CAAA,CAAA,CAAA,CAAA;wBAAa,KAAA,CAAA,QAAA,CAAQ,CAAA,EAAA,EAAA,CAAA,+BAAA,EAAA,CAAA,SAAA,CAAA,CAAA;2BAC5D,KAAA,CAAA,KAAA,CAAK,IAAA,CAAK,KAAA,CAAA,SAAA,CAAS,CAAA,IAAK,KAAA,CAAA,OAAA,CAAO,CAAA;sBAAvH,GAAA,CAAwK,OAAA,EAAA,GAAA,CAAA;;wBAAjK,KAAK,EAAA,GAAA,CAAA,CAAC,QAAQ,EAAA,CAAU,KAAA,CAAA,OAAA,CAAO,EAAE,IAAA,CAAA,MAAM,CAAA,CAAA,CAAA;wBAAI,KAAK,EAAA,GAAA,CAAA,CAAG,KAAA,CAAA,MAAA,CAAM,EAAE,IAAA,CAAA,MAAM,CAAA,CAAA;wBAAkD,GAAG,EAAE,KAAA,CAAA,OAAA,CAAO;wBAAG,OAAK,EAAA,GAAA,EAAA,GAAE,IAAA,CAAA,KAAK,CAAA,OAAA,CAAA,CAAA,CAAA,CAAA","sourcesContent":["<template>\r\n\t<text class=\"l-icon\" :class=\"[classes, lClass]\" :style=\"[styles, lStyle]\" v-if=\"!isImage && !isIconify && !isSVG\" @click=\"$emit('click')\">{{iconCode}}</text>\r\n\t<image class=\"l-icon\" :class=\"[classes, lClass]\" :style=\"[styles, lStyle]\" v-else-if=\"(!isSVG && !isIconify) && isImage\" :src=\"iconUrl\" @click=\"$emit('click')\"></image>\r\n\t<!-- <l-svg class=\"l-icon\" :class=\"[classes, lClass]\" :style=\"[styles, lStyle]\" :color=\"color\" :src=\"iconUrl\" v-else :web=\"web\" @error=\"imageError\" @load=\"imageload\" @click=\"$emit('click')\"></l-svg> -->\r\n</template>\r\n<script lang=\"uts\" setup>\r\n\t/**\r\n\t * LimeIcon 图标\r\n\t * @description ICON集\r\n\t * <br> 插件类型：LIconComponentPublicInstance \r\n\t * @tutorial https://ext.dcloud.net.cn/plugin?id=14057\r\n\t * @property {String} name 图标名称\r\n\t * @property {String} color 颜色\r\n\t * @property {String} size 尺寸\r\n\t * @property {String} prefix 字体图标前缀  \r\n\t * @property {Boolean} inherit 是否继承颜色 \r\n\t * @property {Boolean} web 原生 app(nvue,uvue) 是否使用web渲染  \r\n\t * @event {Function} click 点击事件\r\n\t */\r\n\t\r\n\timport { addUnit } from '@/uni_modules/lime-shared/addUnit';\r\n\timport { IconCollection } from './types';\r\n\timport { icons } from './icons'\r\n\t// defineOptions({\r\n\t// \tname: 'l-icon'\r\n\t// })\r\n\tconst name = 'l-icon'\r\n\tconst IconifyURL : string = 'https://api.iconify.design/';\r\n\tconst $iconsHost : string | null = uni.getStorageSync('$limeIconsHost') as string | null\r\n\r\n\tconst props = defineProps({\r\n\t\tname: {\r\n\t\t\ttype: String,\r\n\t\t\tdefault: '',\r\n\t\t\trequired: true,\r\n\t\t\t// validator: (value: string) : boolean => {\r\n\t\t\t// \t// 确保是字符串类型且不为空\r\n\t\t\t// \treturn typeof value == 'string' && value.trim().length > 0\r\n\t\t\t// }\r\n\t\t},\r\n\t\tcolor: {\r\n\t\t\ttype: String,\r\n\t\t\t// default: ''\r\n\t\t},\r\n\t\tsize: {\r\n\t\t\ttype: [String, Number],\r\n\r\n\r\n\r\n\t\t},\r\n\t\tprefix: {\r\n\t\t\ttype: String,\r\n\t\t\tdefault: ''\r\n\t\t},\r\n\t\tlClass: {\r\n\t\t\ttype: String,\r\n\t\t\tdefault: ''\r\n\t\t},\r\n\t\t// 对安卓IOS无效\r\n\t\tinherit: {\r\n\t\t\ttype: Boolean,\r\n\t\t\tdefault: true\r\n\t\t},\r\n\t\tweb: {\r\n\t\t\ttype: Boolean,\r\n\t\t\tdefault: false\r\n\t\t},\r\n\t\tlStyle: {\r\n\t\t\ttype: [String, Object, Array],\r\n\t\t\tdefault: ''\r\n\t\t},\r\n\t})\r\n\r\n\tconst emits = defineEmits(['click'])\r\n\tconst $iconCollection = inject<IconCollection>('$iconCollection', {has: false, icons: new Map<string, any|null>()} as IconCollection)\r\n\r\n\r\n\r\n\r\n\tconst innerName = computed(():string => props.name)\r\n\r\n\tconst collectionIcon = computed(():string|null => {\r\n\t\treturn $iconCollection.icons.get(innerName.value) as string | null\r\n\t})\r\n\tconst webviewRef = ref<UniWebViewElement | null>(null)\r\n\tconst hasHost = computed<boolean>(() : boolean => innerName.value.indexOf('/') != -1)\r\n\tconst isIconify = computed<boolean>(() : boolean => {\r\n\t\treturn !hasHost.value && innerName.value.includes(':')\r\n\t})\r\n\tconst isImage = computed<boolean>(() : boolean => {\r\n\t\treturn /\\.(jpe?g|png|gif|bmp|webp|tiff?)$/i.test(innerName.value) || /^data:image\\/(jpeg|png|gif|bmp|webp|tiff);base64,/.test(innerName.value)\r\n\t})\r\n\tconst isSVG = computed<boolean>(():boolean => {\r\n\t\treturn /\\.svg$/i.test(innerName.value) || innerName.value.startsWith('data:image/svg+xml') || innerName.value.startsWith('<svg')\r\n\t})\r\n\tconst classes = computed<Map<string, any>>(() : Map<string, any> => {\r\n\t\tconst cls = new Map<string, any>()\r\n\t\tcls.set(`${name}--font`, !isImage.value && !isIconify.value && !isSVG.value)\r\n\t\tcls.set(`${name}--image`, isImage.value || isIconify.value || isSVG.value)\r\n\t\tcls.set(props.prefix, props.prefix.length > 0)\r\n\t\tcls.set(props.lClass, props.lClass.length > 0)\r\n\r\n\r\n\r\n\t\treturn cls\r\n\t})\r\n\tconst styles = computed<Map<string, any>>(() : Map<string, any> => {\r\n\t\tconst style = new Map<string, any>();\r\n\r\n\t\tif ((props.color != '' && props.color != null) && !isImage.value && !isIconify.value) {\r\n\t\t\tstyle.set('color', props.color!)\r\n\t\t}\r\n\t\tconst size = addUnit(props.size) ?? ((isImage.value || isIconify.value) ? '32px' : null)\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\t\tif (size != null) {\r\n\t\t\tif (isImage.value || isIconify.value || isSVG.value) {\r\n\t\t\t\tstyle.set('height', size)\r\n\t\t\t\tstyle.set('width', size)\r\n\t\t\t} else {\r\n\t\t\t\tstyle.set('font-size', size)\r\n\t\t\t}\r\n\t\t\t\r\n\t\t}\r\n\t\treturn style\r\n\t})\r\n\tconst iconCode = computed<string>(() : string => {\r\n\t\treturn icons.value.get(innerName.value) as string | null ?? (/[^\\x00-\\x7F]/.test(innerName.value) ? innerName.value : '')\r\n\t})\r\n\tconst isError = ref(false)\r\n\tconst cacheMap = new Map<string, string>()\r\n\tconst iconUrl = computed(():string => {\r\n\t\tconst hasIconsHost = $iconsHost != null && $iconsHost != '' \r\n\t\t// const hasIconCollection = $iconCollection.has\r\n\t\tif(isImage.value) {\r\n\t\t\treturn hasHost.value ? innerName.value : ($iconsHost ?? '') + innerName.value\r\n\t\t} else if(isIconify.value) {\r\n\t\t\t// 防止重绘\r\n\t\t\tif(cacheMap.has(innerName.value) && !isError.value) {\r\n\t\t\t\treturn cacheMap.get(innerName.value)!\r\n\t\t\t}\r\n\t\t\t// 如果存在collectionIcon则使用 \r\n\t\t\t// 如果设置的路径加载失败 就使用网络地址 就使用iconify api\r\n\t\t\tconst _host = `${hasIconsHost ? $iconsHost : IconifyURL}`\r\n\t\t\tconst _icon =collectionIcon.value ?? _host + `${innerName.value}.svg`.replace(/:/g, '/') \r\n\t\t\tcacheMap.set(innerName.value, _icon)\r\n\t\t\treturn _icon\r\n\t\t} else if(isSVG.value) {\r\n\t\t\treturn (/\\.svg$/i.test(innerName.value) && $iconsHost != null && !hasHost.value ? $iconsHost : '') + innerName.value.replace(/'/g, '\"')\r\n\t\t} else {\r\n\t\t\treturn ''\r\n\t\t}\r\n\t})\r\n\t\t\r\n\tconst imageError = () => {\r\n\t\tisError.value = true\r\n\t}\r\n\tconst imageload = () => {\r\n\t\tisError.value = false\r\n\t}\r\n</script>\r\n<style lang=\"scss\">\r\n\t@import './index.scss';\r\n</style>"]}