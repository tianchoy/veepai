{"version":3,"sources":["uni_modules/lime-picker/components/l-picker/l-picker.uvue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n\t<view class=\"l-picker\" :style=\"[styles]\" ref=\"pickerRef\">\r\n\t\t<view class=\"l-picker__toolbar\" :key=\"ohosShow\" v-if=\"cancelBtn != null || title != null || confirmBtn != null\">\r\n\t\t\t<text class=\"l-picker__cancel\" :key=\"ohosShow\" :style=\"cancelStyle??''\" v-if=\"cancelBtn != null\"\r\n\t\t\t\t@click=\"onCancel\">{{cancelBtn}}</text>\r\n\t\t\t<text class=\"l-picker__title\" :key=\"ohosShow\" :style=\"titleStyle??''\">{{title}}</text>\r\n\t\t\t<text class=\"l-picker__confirm\" :key=\"ohosShow\" :style=\"confirmStyle??''\" v-if=\"confirmBtn != null\"\r\n\t\t\t\t@click=\"onConfirm\">{{confirmBtn}}</text>\r\n\t\t</view>\r\n\t\t<slot name=\"header\"></slot>\r\n\t\t<view class=\"l-picker__main\" :style=\"[groupHeight != null ? { height:  groupHeight}: {}]\">\r\n\t\t\t<slot>\r\n\t\t\t\t<l-picker-item v-for=\"(options, i) in props.columns\" :options=\"options\" :key=\"i\" :column=\"i\"\r\n\t\t\t\t\t:value=\"pickerValue.length > i ? pickerValue[i]: null\"></l-picker-item>\r\n\t\t\t</slot>\r\n\t\t\t<view class=\"l-picker__empty\" v-if=\"isEmpty\">\r\n\t\t\t\t<slot name=\"empty\"></slot>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t\t<slot name=\"footer\" />\r\n\t\t<view class=\"l-picker__loading\" ref=\"loadingRef\" v-if=\"loading\"\r\n\t\t\t:style=\"[loadingMaskColor != null ? {background: loadingMaskColor}: {}]\">\r\n\r\n\r\n\r\n\t\t</view>\r\n\t</view>\r\n</template>\r\n<script lang=\"uts\" setup>\r\n\t/**\r\n\t * Picker 选择器组件\r\n\t * @description 多列数据选择器，支持级联数据展示和自定义样式配置\r\n\t * <br>插件类型：LPickerComponentPublicInstance \r\n\t * @tutorial https://ext.dcloud.net.cn/plugin?name=lime-picker\r\n\t * \r\n\t * @property {string} cancelBtn 取消按钮文字\r\n\t * @property {string | UTSJSONObject} cancelStyle 取消按钮样式\r\n\t * @property {string} confirmBtn 确定按钮文字\r\n\t * @property {string | UTSJSONObject} confirmStyle 确定按钮样式\r\n\t * @property {string} title 标题文字\r\n\t * @property {string | UTSJSONObject} titleStyle 标题样式\r\n\t * @property {UTSJSONObject} keys 字段别名配置（例：{value: 'id', label: 'name'}）\r\n\t * @property {PickerColumn[]} columns 选择器列数据（必填）\r\n\t * @property {PickerValue[]} modelValue 选中值（支持v-model）\r\n\t * @property {PickerValue[]} defaultValue 默认选中值\r\n\t * @property {PickerValue[]} value 选中值（兼容旧版）\r\n\t * @property {boolean} loading 是否显示加载状态\r\n\t * @property {string} loadingColor 加载图标颜色\r\n\t * @property {string} loadingMaskColor 加载遮罩颜色\r\n\t * @property {string} loadingSize 加载图标尺寸\r\n\t * @property {string} itemHeight 选项行高度\r\n\t * @property {string} itemColor 选项文字颜色\r\n\t * @property {string} itemFontSize 选项字体大小\r\n\t * @property {string} itemActiveColor 选中项颜色\r\n\t * @property {string} indicatorStyle 指示器样式\r\n\t * @property {string} bgColor 背景颜色\r\n\t * @property {string} groupHeight 选项组高度\r\n\t * @property {string} radius 圆角半径\r\n\t * @property {boolean} resetIndex 是否重置选中索引\r\n\t * \r\n\t * @event {Function} confirm 点击确定时触发（事件参数：PickerConfirmEvent）\r\n\t * @event {Function} cancel 点击取消时触发\r\n\t * @event {Function} change 值变化时触发（事件参数：PickerPickEvent）\r\n\t * @event {Function} column-change 列数据变化时触发（事件参数：PickerChangeInfo）\r\n\t */\r\n\timport { PickerProps, PickerColumn, PickerValue, PickerColumnItem, PickerConfirmEvent, PickerPickEvent } from './type';\r\n\timport { pushAt } from './utils';\r\n\timport { unitConvert } from '@/uni_modules/lime-shared/unitConvert'\r\n\r\n\timport { useLoading } from '@/uni_modules/lime-loading'\r\n\r\n\tconst emit = defineEmits(['change', 'cancel', 'pick', 'confirm', 'update:modelValue', 'update:value']);\r\n\tconst props = withDefaults(defineProps<PickerProps>(), {\r\n\t\tcolumns: [] as PickerColumn[],\r\n\t\tloading: false,\r\n\t\tresetIndex: false,\r\n\t\tloadingSize: '64rpx'\r\n\t})\r\n\tconst pickerItemInstanceArray = reactive<LPickerItemComponentPublicInstance[]>([]);\r\n\tconst ohosShow = ref(0)\r\n\tconst modelValue = ref<PickerValue[]>(props.value ?? props.modelValue ?? props.defaultValue ?? [])\r\n\tconst pickerValue = computed({\r\n\t\tset(value : PickerValue[]) {\r\n\t\t\tif (value.join('') == modelValue.value.join('')) return\r\n\t\t\tmodelValue.value = value;\r\n\t\t\temit('update:modelValue', value)\r\n\t\t\temit('change', value)\r\n\t\t},\r\n\t\tget() : PickerValue[] {\r\n\t\t\treturn props.value ?? props.modelValue ?? modelValue.value\r\n\t\t}\r\n\t} as WritableComputedOptions<PickerValue[]>)\r\n\r\n\tconst isEmpty = computed(() : boolean => {\r\n\t\treturn props.columns.length == 0 && pickerItemInstanceArray.every(child => child.options.length == 0)\r\n\t})\r\n\tconst styles = computed(() : Map<string, any> => {\r\n\t\tconst style = new Map<string, any>()\r\n\t\tif (props.bgColor != null) {\r\n\t\t\tstyle.set('background', props.bgColor!)\r\n\t\t}\r\n\t\tif (props.radius != null) {\r\n\t\t\tstyle.set('border-top-left-radius', props.radius!)\r\n\t\t\tstyle.set('border-top-right-radius', props.radius!)\r\n\t\t}\r\n\t\treturn style\r\n\t})\r\n\r\n\tconst curIndexArray = ref<number[]>([]);\r\n\tconst curValueArray = ref([...pickerValue.value]);\r\n\tconst curItemArray : PickerColumnItem[] = []\r\n\tconst realColumns = computed(() : PickerColumn[] => {\r\n\t\tconst pickerColumns = pickerItemInstanceArray.map((child) : PickerColumn => child.options)\r\n\t\tif (pickerColumns.length > 0) {\r\n\t\t\treturn pickerColumns\r\n\t\t}\r\n\t\treturn props.columns\r\n\t})\r\n\r\n\tconst manageChildInList = (child : LPickerItemComponentPublicInstance, shouldAdd : boolean) => {\r\n\t\tconst index = pickerItemInstanceArray.indexOf(child);\r\n\t\tif (shouldAdd) {\r\n\t\t\tif (index != -1) return\r\n\t\t\tpickerItemInstanceArray.push(child)\r\n\t\t} else {\r\n\t\t\tif (index == -1) return\r\n\t\t\tpickerItemInstanceArray.splice(index, 1);\r\n\t\t}\r\n\t}\r\n\r\n\tconst updateItems = (item : PickerColumnItem, index : number, column : number) => {\r\n\t\tpushAt(curIndexArray.value, column, index)\r\n\t\tpushAt(curValueArray.value, column, item.value)\r\n\t\tpushAt(curItemArray, column, item)\r\n\t};\r\n\t\r\n\tconst updatePickerItems = () => {\r\n\t\tconst _indexs : number[] = []\r\n\t\tconst _values : any[] = []\r\n\t\tpickerItemInstanceArray.forEach((child, column) => {\r\n\t\t\tif (child.options.length == 0) return\r\n\t\t\tconst value = curValueArray.value.length > column ? curValueArray.value[column] : null;\r\n\r\n\r\n\r\n\r\n\r\n\t\t\t// const index = value == null ? 0 : child.getIndexByValue(value)\r\n\t\t\t// child.setIndex(index)\r\n\t\t\tconst index : number = (value == null ? 0 : child.$callMethod('getIndexByValue', value)) as number\r\n\t\t\tchild.$callMethod('setIndex', index)\r\n\r\n\t\t\tconst item = child.options[index]\r\n\t\t\t_indexs.push(index)\r\n\t\t\t_values.push(item.value)\r\n\r\n\t\t\tpushAt(curItemArray, column, item)\r\n\t\t\t// pushAt(curIndexArray.value, column, index)\r\n\t\t\t// pushAt(curValueArray.value, column, item.value)\r\n\t\t\t// // 不能改变单向数据流, 只有值不存在时候才处理\r\n\t\t\t// if(pickerValue.value.length == 0) {\r\n\t\t\t// \tpickerValue.value = [...curValueArray.value]\r\n\t\t\t// }\r\n\t\t\t// if(pickerValue.value.join('') == curValueArray.value.join('')) return\r\n\t\t\t// pickerValue.value = [...curValueArray.value]\r\n\t\t})\r\n\t\tif (curIndexArray.value.join('') == _indexs.join('')) return\r\n\t\tcurIndexArray.value = _indexs\r\n\t\tcurValueArray.value = _values\r\n\t\t// if(pickerValue.value.length == 0) {\r\n\t\tpickerValue.value = [...curValueArray.value]\r\n\t\t// }\r\n\t}\r\n\r\n\tconst onPick = (item : PickerColumnItem, index : number, column : number) => {\r\n\t\tif (curIndexArray.value[column] == index) return\r\n\t\tpushAt(curIndexArray.value, column, index)\r\n\t\tpushAt(curValueArray.value, column, item.value)\r\n\t\tpushAt(curItemArray, column, item)\r\n\t\tconst obj : PickerPickEvent = {\r\n\t\t\tvalues: curValueArray.value,\r\n\t\t\tcolumn,\r\n\t\t\tindex\r\n\t\t}\r\n\t\tpickerValue.value = [...curValueArray.value]\r\n\t\temit('pick', obj)\r\n\t};\r\n\r\n\tconst onCancel = (e : UniPointerEvent) => {\r\n\t\tupdatePickerItems()\r\n\t\temit('cancel', e)\r\n\t}\r\n\tconst onConfirm = (e : UniPointerEvent) => {\r\n\t\tconst values = [...curValueArray.value];\r\n\t\tconst indexs = [...curIndexArray.value];\r\n\t\tconst items = curItemArray.map((item) : PickerColumnItem => toRaw(item))\r\n\t\tif (pickerValue.value.join('') != values.join('')) {\r\n\t\t\tpickerValue.value = values;\r\n\t\t}\r\n\t\tconst obj : PickerConfirmEvent = {\r\n\t\t\tvalues,\r\n\t\t\tindexs,\r\n\t\t\titems\r\n\t\t}\r\n\t\temit('confirm', obj)\r\n\t}\r\n\tconst stopPickerValue = watch(pickerValue, () => {\r\n\t\tif (pickerValue.value.join('') == curValueArray.value.join('')) return\r\n\t\tcurValueArray.value = pickerValue.value.map((item : PickerValue) => item);\r\n\t\tupdatePickerItems()\r\n\t})\r\n\r\n\tconst stopColumns = watch(realColumns, () => {\r\n\t\tupdatePickerItems()\r\n\t\t// nextTick(() => {\r\n\t\t// \tsetTimeout(()=>{\r\n\t\t// \t\tupdatePickerItems()\r\n\t\t// \t},2000)\r\n\t\t\t\r\n\t\t// })\r\n\t})\r\n\t\r\n\t\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\t\r\n\tonMounted(() => {\r\n\t\tnextTick(() => {\r\n\t\t\t\r\n\t\t\tif (pickerValue.value.join('') != curValueArray.value.join('') && pickerValue.value.length > 0) {\r\n\t\t\t\tcurValueArray.value = [...pickerValue.value]\r\n\t\t\t\tupdatePickerItems()\r\n\t\t\t}\r\n\t\t})\r\n\t})\r\n\r\n\tconst loadingRef = ref<UniElement | null>(null);\r\n\t// const {play, clear, failed} = useLoading(loadingRef, 'circular', props.loadingColor?? '#3283ff', unitConvert(props.loadingSize))\r\n\tconst loadingAni = useLoading(loadingRef)\r\n\tloadingAni.type = 'circular'\r\n\tloadingAni.color = props.loadingColor ?? '#3283ff'\r\n\tloadingAni.ratio = unitConvert(props.loadingSize)\r\n\twatchEffect(() => {\r\n\t\tif (props.loading) {\r\n\t\t\tloadingAni.play()\r\n\t\t} else {\r\n\t\t\tloadingAni.clear()\r\n\t\t}\r\n\t})\r\n\r\n\r\n\tonBeforeUnmount(() => {\r\n\t\tstopPickerValue()\r\n\t\tstopColumns()\r\n\t})\r\n\r\n\tprovide('limePicker', props)\r\n\tprovide('limePickerOnPick', onPick)\r\n\tprovide('limePickerUpdateItems', updateItems)\r\n\tprovide('limePickerItems', pickerItemInstanceArray)\r\n\tprovide('limePickerManageChildInList', manageChildInList)\r\n</script>\r\n<style lang=\"scss\">\r\n\t@import './index.scss';\r\n</style>"]}