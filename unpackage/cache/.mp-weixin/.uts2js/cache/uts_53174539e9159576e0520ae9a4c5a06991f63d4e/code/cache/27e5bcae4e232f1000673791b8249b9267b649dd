{"code":"import { __read } from \"tslib\";\nimport { defineComponent as _defineComponent } from 'vue';\nimport { unref as _unref, toDisplayString as _toDisplayString, t as _t, s as _s, f as _f, o as _o, gei as _gei, sei as _sei } from \"vue\";\nimport { unitConvert } from '@/uni_modules/lime-shared/unitConvert';\nimport { clamp } from '@/uni_modules/lime-shared/clamp';\nimport {} from './type';\nimport {} from '../l-picker/type';\nexport default /*#__PURE__*/ _defineComponent({\n    __name: 'l-picker-item',\n    props: {\n        options: { default: [] },\n        value: {},\n        column: { default: -1 },\n        name: {}\n    },\n    setup(__props, _a) {\n        var __expose = _a.expose;\n        /**\n         * PickerItem 选择器子项组件\n         * @description 用于构建多列选择器的单个列项，通常作为 Picker 组件的子组件使用\n         * <br>插件类型：LPickerItemComponentPublicInstance\n         * @tutorial https://ext.dcloud.net.cn/plugin?name=lime-picker\n         *\n         * @property {PickerColumnItem[]} options 当前列的选项列表（必填）\n         * @property {PickerValue} value 当前选中值\n         * @property {number} column 列索引标识（从0开始计数）\n         * @property {string | number} name 列名称标识符\n         */\n        const instance = getCurrentInstance();\n        const props = __props;\n        const picker = inject('limePicker', null);\n        const pickerItemInstanceArray = inject('limePickerItems', null);\n        const manageChildInList = inject('limePickerManageChildInList', null);\n        manageChildInList === null || manageChildInList === void 0 ? null : manageChildInList(instance.proxy, true);\n        const onPick = inject('limePickerOnPick', null);\n        const updateItems = inject('limePickerUpdateItems', null);\n        // web 如果初始是0 当数据加载后 无法指向0\n        const curIndex = ref(0);\n        const curValue = ref(props.value);\n        const column = computed(() => { var _a; return props.column != -1 ? props.column : (_a = pickerItemInstanceArray === null || pickerItemInstanceArray === void 0 ? null : pickerItemInstanceArray.indexOf(instance.proxy)) !== null && _a !== void 0 ? _a : props.column; });\n        const elementPosition = computed(() => {\n            var _a;\n            const totalElements = (_a = pickerItemInstanceArray === null || pickerItemInstanceArray === void 0 ? null : pickerItemInstanceArray.length) !== null && _a !== void 0 ? _a : 0;\n            return [column.value == 0, column.value == totalElements - 1];\n        });\n        const innerIndex = computed(() => { return [curIndex.value]; });\n        const indicatorStyles = computed(() => {\n            var _a;\n            const _b = __read(elementPosition.value, 2), isFirst = _b[0], isLast = _b[1];\n            let style = ``;\n            if (isFirst) {\n                style += 'border-top-left-radius:12rpx; border-bottom-left-radius:12rpx;';\n            }\n            if (isLast) {\n                style += 'border-top-right-radius:12rpx; border-bottom-right-radius:12rpx;';\n            }\n            return `\r\n\t\t\t${style}\r\n\t\t\theight: ${(_a = picker === null || picker === void 0 ? null : picker.itemHeight) !== null && _a !== void 0 ? _a : '50px'};\r\n\t\t\tbackground-color: rgba(0, 0, 0, 0.04); ${picker === null || picker === void 0 ? null : picker.indicatorStyle}`;\n        });\n        const itemStyles = computed(() => {\n            const style = new Map();\n            if ((picker === null || picker === void 0 ? null : picker.itemColor) != null) {\n                style.set('color', picker.itemColor);\n            }\n            if ((picker === null || picker === void 0 ? null : picker.itemFontSize) != null) {\n                style.set('font-size', picker.itemFontSize);\n            }\n            if ((picker === null || picker === void 0 ? null : picker.itemHeight) != null) {\n                style.set('line-height', picker.itemHeight);\n                style.set('height', picker.itemHeight);\n            }\n            return style;\n        });\n        const itemActiveStyles = computed(() => {\n            const style = new Map();\n            if ((picker === null || picker === void 0 ? null : picker.itemActiveColor) != null) {\n                style.set('color', picker.itemActiveColor);\n            }\n            if ((picker === null || picker === void 0 ? null : picker.itemActiveFontWeight) != null) {\n                style.set('font-weight', picker.itemActiveFontWeight);\n            }\n            return style;\n        });\n        const getIndexByValue = (val = null) => {\n            let defaultIndex = 0;\n            if (val != null) {\n                defaultIndex = props.options.findIndex((item = null) => { return item.value == val; });\n            }\n            return defaultIndex < 0 ? 0 : defaultIndex;\n        };\n        const setIndex = (index) => {\n            let lastIndex = curIndex.value;\n            let _index = clamp(index, 0, props.options.length - 1);\n            if (props.options.length > _index) {\n                curIndex.value = _index;\n                curValue.value = props.options[_index].value;\n            }\n        };\n        const setValue = (value = null) => {\n            if (value == curValue.value)\n                return null;\n            curValue.value = value;\n            const index = getIndexByValue(value);\n            setIndex(index);\n        };\n        const setOptions = () => { };\n        const setUpdateItems = () => {\n            const index = clamp(curIndex.value, 0, props.options.length - 1);\n            const curItem = props.options.length > index ? props.options[index] : null;\n            if (curItem == null)\n                return null;\n            updateItems === null || updateItems === void 0 ? null : updateItems(curItem, index, column.value);\n        };\n        const handlePick = (e) => {\n            if (props.options.length == 0)\n                return null;\n            const index = clamp(e.detail.value[0], 0, props.options.length - 1);\n            const curItem = props.options[index];\n            if (index == curIndex.value)\n                return null;\n            setIndex(index);\n            onPick === null || onPick === void 0 ? null : onPick(curItem, index, column.value);\n        };\n        const stopValue = watch(() => { return props.value; }, (v = null) => {\n            setValue(v);\n            setUpdateItems();\n        }, { immediate: true });\n        onBeforeUnmount(() => {\n            manageChildInList === null || manageChildInList === void 0 ? null : manageChildInList(instance.proxy, false);\n        });\n        // onMounted(()=>{\n        // \tif(props.options.length > 0 && curIndex.value == -1) {\n        // \t\tcurIndex.value = 0\n        // \t}\n        // })\n        __expose(new UTSJSONObject({\n            setIndex,\n            setValue,\n            // setOptions,\n            // setUpdateItems,\n            getIndexByValue\n        }));\n        return (_ctx = null, _cache = null) => {\n            const __returned__ = {\n                a: _f(_ctx.options, (item = null, i = null, i0 = null) => {\n                    return {\n                        a: _t(item.label),\n                        b: _s(_unref(curIndex) == i ? _unref(itemActiveStyles) : {}),\n                        c: _unref(curIndex) == i ? 1 : '',\n                        d: item.value\n                    };\n                }),\n                b: _s(_unref(itemStyles)),\n                c: _sei(_gei(_ctx, ''), 'picker-view'),\n                d: _ctx.options.length > 0 ? 1 : 0,\n                e: _unref(indicatorStyles),\n                f: _unref(innerIndex),\n                g: _o(handlePick)\n            };\n            return __returned__;\n        };\n    }\n});\n//# sourceMappingURL=/Users/xyhc/Documents/veepai_uniappx/uni_modules/lime-picker/components/l-picker-item/l-picker-item.uvue?vue&type=script&setup=true&lang.uts.js.map","references":["/Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli-vite/node_modules/@vue/runtime-core/dist/runtime-core.d.ts","/Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli-vite/node_modules/@vue/runtime-core/dist/runtime-core.d.ts","/Users/xyhc/Documents/veepai_uniappx/uni_modules/lime-shared/unitConvert/index.ts","/Users/xyhc/Documents/veepai_uniappx/uni_modules/lime-shared/clamp/index.ts","/Users/xyhc/Documents/veepai_uniappx/uni_modules/lime-picker/components/l-picker-item/type.ts","/Users/xyhc/Documents/veepai_uniappx/uni_modules/lime-picker/components/l-picker/type.ts"],"uniExtApis":[],"map":"{\"version\":3,\"file\":\"l-picker-item.uvue?vue&type=script&setup=true&lang.uts.js\",\"sourceRoot\":\"\",\"sources\":[\"l-picker-item.uvue?vue&type=script&setup=true&lang.uts\"],\"names\":[],\"mappings\":\"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\"}"}
