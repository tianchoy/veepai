{"code":"import { defineComponent as _defineComponent } from 'vue';\nimport { unref as _unref, o as _o, sei as _sei, s as _s, gei as _gei } from \"vue\";\nimport { Calendar } from './calender';\nimport {} from 'vue';\nimport { unitConvert } from '@/uni_modules/lime-shared/unitConvert';\nimport {} from '../../index';\nexport default /*#__PURE__*/ _defineComponent({\n    __name: 'l-daily-punch',\n    props: {\n        canSupplement: {\n            type: Boolean,\n            default: true\n        },\n        isFullCalendar: {\n            type: Boolean,\n            default: true\n        },\n        yearMonth: {\n            type: String,\n            default: () => {\n                const date = new Date();\n                const year = date.getFullYear();\n                const month = (date.getMonth() + 1).toString().padStart(2, '0'); // 确保月份是两位数\n                return `${year}-${month}`;\n            }\n        },\n        signedDates: {\n            type: Array,\n            default: () => {\n                return [];\n            },\n            validator: (value) => {\n                // 简单的验证函数，确保每个元素都是有效的日期字符串\n                return value.every((date) => { return /^\\d{4}-\\d{2}-\\d{2}$/.test(date); });\n            }\n        },\n        dayHeight: {\n            type: [String, Number],\n            default: 76\n        },\n        week: {\n            type: Array,\n            default: () => { return ['周日', '周一', '周二', '周三', '周四', '周五', '周六']; }\n        },\n        weekStartsOn: {\n            type: Number,\n            default: 6,\n            validator: (value) => { return value <= 6; }\n        },\n        weekColor: {\n            type: String,\n            default: '#BDC0C3'\n        },\n        weekFontSize: {\n            type: Number,\n            default: 14\n        },\n        weekHeight: {\n            type: Number,\n            default: 30\n        },\n        selectedDayBgColor: {\n            type: String,\n            default: 'rgba(0,0,0,0.06)'\n        },\n        dayFontSize: {\n            type: Number,\n            default: 16\n        },\n        textColor: {\n            type: String,\n            default: '#1A1F24'\n        },\n        disabledColor: {\n            type: String,\n            default: '#BDC0C3'\n        },\n        monthTitleHeight: {\n            type: Number,\n            default: 50\n        },\n        monthTitleFontSize: {\n            type: Number,\n            default: 20\n        },\n        color: {\n            type: String,\n            default: '#3B87F6'\n        },\n        unsignedColor: {\n            type: String,\n            default: '#F1A33A'\n        },\n    },\n    emits: ['select', 'panelChange', 'streak'],\n    setup(__props, _a) {\n        var __emit = _a.emit;\n        const emits = __emit;\n        const props = __props;\n        let drawRef = ref(null);\n        let calender = null;\n        const styles = computed(() => {\n            const style = new Map();\n            style.set('height', `${6 * unitConvert(props.dayHeight) + props.weekHeight + props.monthTitleHeight}px`);\n            return style;\n        });\n        const onClick = (e) => {\n            calender === null || calender === void 0 ? null : calender.touch(e);\n        };\n        const setOpt = () => {\n            const opt = {\n                canSupplement: props.canSupplement,\n                isFullCalendar: props.isFullCalendar,\n                yearMonth: props.yearMonth,\n                signedDates: [...props.signedDates],\n                dayHeight: unitConvert(props.dayHeight),\n                week: props.week,\n                weekStartsOn: props.weekStartsOn,\n                weekColor: props.weekColor,\n                weekFontSize: props.weekFontSize,\n                weekHeight: props.weekHeight,\n                selectedDayBgColor: props.selectedDayBgColor,\n                dayFontSize: props.dayFontSize,\n                textColor: props.textColor,\n                disabledColor: props.disabledColor,\n                monthTitleHeight: props.monthTitleHeight,\n                monthTitleFontSize: props.monthTitleFontSize,\n                color: props.color,\n                unsignedColor: props.unsignedColor,\n                select: (e) => {\n                    emits('select', e);\n                },\n                panelChange: (e) => {\n                    emits('panelChange', e);\n                }\n            };\n            if (calender == null)\n                return null;\n            calender.setOptions(opt);\n        };\n        watchEffect(() => {\n            setOpt();\n            if (calender == null)\n                return null;\n            calender.render();\n            emits('streak', calender.checkinDays);\n        });\n        const instance = getCurrentInstance().proxy;\n        // 异步调用方式, 跨平台写法\n        uni.createCanvasContextAsync({\n            id: 'l-daily-punch',\n            component: instance,\n            success: (context) => {\n                const canvasContext = context.getContext('2d');\n                const canvas = canvasContext.canvas;\n                calender = new Calendar();\n                setOpt();\n                calender.setCanvas(canvas);\n                calender.render();\n                emits('streak', calender.checkinDays);\n            }\n        });\n        return (_ctx = null, _cache = null) => {\n            const __returned__ = {\n                a: _sei('l-daily-punch', 'canvas', 'dailyRef'),\n                b: _s(_unref(styles)),\n                c: _o(onClick),\n                d: _sei(_gei(_ctx, ''), 'view')\n            };\n            return __returned__;\n        };\n    }\n});\n//# sourceMappingURL=/Users/xyhc/Documents/veepai_uniappx/uni_modules/lime-daily-punch/components/l-daily-punch/l-daily-punch.uvue?vue&type=script&setup=true&lang.uts.js.map","references":["/Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli-vite/node_modules/@vue/runtime-core/dist/runtime-core.d.ts","/Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli-vite/node_modules/@vue/runtime-core/dist/runtime-core.d.ts","/Users/xyhc/Documents/veepai_uniappx/uni_modules/lime-daily-punch/components/l-daily-punch/calender.uts","/Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli-vite/node_modules/@vue/runtime-core/dist/runtime-core.d.ts","/Users/xyhc/Documents/veepai_uniappx/uni_modules/lime-shared/unitConvert/index.ts","/Users/xyhc/Documents/veepai_uniappx/uni_modules/lime-daily-punch/index.ts"],"uniExtApis":["uni.createCanvasContextAsync"],"map":"{\"version\":3,\"file\":\"l-daily-punch.uvue?vue&type=script&setup=true&lang.uts.js\",\"sourceRoot\":\"\",\"sources\":[\"l-daily-punch.uvue?vue&type=script&setup=true&lang.uts\"],\"names\":[],\"mappings\":\"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\"}"}
