{"code":"import { defineComponent as _defineComponent } from 'vue';\nimport { unref as _unref, toDisplayString as _toDisplayString, t as _t, o as _o, n as _n, s as _s, e as _e } from \"vue\";\nimport { addUnit } from '@/uni_modules/lime-shared/addUnit';\nimport {} from './types';\nimport { icons } from './icons';\n// defineOptions({\n// \tname: 'l-icon'\n// })\nconst name = 'l-icon';\nconst IconifyURL = 'https://api.iconify.design/';\nexport default /*#__PURE__*/ _defineComponent({\n    __name: 'l-icon',\n    props: {\n        name: {\n            type: String,\n            default: '',\n            required: true,\n            // validator: (value: string) : boolean => {\n            // \t// 确保是字符串类型且不为空\n            // \treturn typeof value == 'string' && value.trim().length > 0\n            // }\n        },\n        color: {\n            type: String,\n            // default: ''\n        },\n        size: {\n            type: [String, Number],\n        },\n        prefix: {\n            type: String,\n            default: ''\n        },\n        lClass: {\n            type: String,\n            default: ''\n        },\n        // 对安卓IOS无效\n        inherit: {\n            type: Boolean,\n            default: true\n        },\n        web: {\n            type: Boolean,\n            default: false\n        },\n        lStyle: {\n            type: [String, Object, Array],\n            default: ''\n        },\n    },\n    emits: ['click'],\n    setup(__props, _a) {\n        /**\n         * LimeIcon 图标\n         * @description ICON集\n         * <br> 插件类型：LIconComponentPublicInstance\n         * @tutorial https://ext.dcloud.net.cn/plugin?id=14057\n         * @property {String} name 图标名称\n         * @property {String} color 颜色\n         * @property {String} size 尺寸\n         * @property {String} prefix 字体图标前缀\n         * @property {Boolean} inherit 是否继承颜色\n         * @property {Boolean} web 原生 app(nvue,uvue) 是否使用web渲染\n         * @event {Function} click 点击事件\n         */\n        var __emit = _a.emit;\n        const $iconsHost = uni.getStorageSync('$limeIconsHost');\n        const props = __props;\n        const emits = __emit;\n        const $iconCollection = inject('$iconCollection', { has: false, icons: new Map() });\n        const innerName = computed(() => { var _a; return (_a = props.name) !== null && _a !== void 0 ? _a : ''; });\n        const collectionIcon = computed(() => {\n            return UTS.mapGet($iconCollection.icons, innerName.value);\n        });\n        const webviewRef = ref(null);\n        const hasHost = computed(() => { return innerName.value.indexOf('/') != -1; });\n        const isIconify = computed(() => {\n            return !hasHost.value && innerName.value.includes(':');\n        });\n        const isImage = computed(() => {\n            return /\\.(jpe?g|png|gif|bmp|webp|tiff?)$/i.test(innerName.value) || /^data:image\\/(jpeg|png|gif|bmp|webp|tiff);base64,/.test(innerName.value);\n        });\n        const isSVG = computed(() => {\n            return /\\.svg$/i.test(innerName.value) || innerName.value.startsWith('data:image/svg+xml') || innerName.value.startsWith('<svg');\n        });\n        const classes = computed(() => {\n            const cls = new Map();\n            cls.set(`${name}--font`, !isImage.value && !isIconify.value && !isSVG.value);\n            cls.set(`${name}--image`, isImage.value || isIconify.value || isSVG.value);\n            cls.set(props.prefix, props.prefix.length > 0);\n            cls.set(props.lClass, props.lClass.length > 0);\n            cls.set(`is-inherit`, (isIconify.value) && (props.color && props.color.length > 0 || props.inherit));\n            return cls;\n        });\n        const styles = computed(() => {\n            const style = new Map();\n            if (props.color) {\n                style.set('color', props.color);\n            }\n            const size = addUnit(props.size);\n            if (size != null) {\n                if (isImage.value || isIconify.value || isSVG.value) {\n                    style.set('height', size);\n                    style.set('width', size);\n                }\n                else {\n                    style.set('font-size', size);\n                }\n            }\n            return style;\n        });\n        const iconCode = computed(() => {\n            var _a;\n            return (_a = icons.value.get(innerName.value)) !== null && _a !== void 0 ? _a : (/[^\\x00-\\x7F]/.test(innerName.value) ? innerName.value : '');\n        });\n        const isError = ref(false);\n        const cacheMap = new Map();\n        const iconUrl = computed(() => {\n            var _a;\n            const hasIconsHost = $iconsHost != null && $iconsHost != '';\n            // const hasIconCollection = $iconCollection.has\n            if (isImage.value) {\n                return hasHost.value ? innerName.value : ($iconsHost !== null && $iconsHost !== void 0 ? $iconsHost : '') + innerName.value;\n            }\n            else if (isIconify.value) {\n                // 防止重绘\n                if (cacheMap.has(innerName.value) && !isError.value) {\n                    return UTS.mapGet(cacheMap, innerName.value);\n                }\n                // 如果存在collectionIcon则使用 \n                // 如果设置的路径加载失败 就使用网络地址 就使用iconify api\n                const _host = `${hasIconsHost ? $iconsHost : IconifyURL}`;\n                const _icon = (_a = collectionIcon.value) !== null && _a !== void 0 ? _a : _host + `${innerName.value}.svg`.replace(/:/g, '/');\n                cacheMap.set(innerName.value, _icon);\n                return _icon;\n            }\n            else if (isSVG.value) {\n                return (/\\.svg$/i.test(innerName.value) && $iconsHost != null && !hasHost.value ? $iconsHost : '') + innerName.value.replace(/'/g, '\"');\n            }\n            else {\n                return '';\n            }\n        });\n        const imageError = () => {\n            isError.value = true;\n        };\n        const imageload = () => {\n            isError.value = false;\n        };\n        return (_ctx = null, _cache = null) => {\n            const __returned__ = _e(new UTSJSONObject({\n                a: !_unref(isImage) && !_unref(isIconify) && !_unref(isSVG)\n            }), !_unref(isImage) && !_unref(isIconify) && !_unref(isSVG) ? new UTSJSONObject({\n                b: _t(_unref(iconCode)),\n                c: _n(_unref(classes)),\n                d: _n(__props.lClass),\n                e: _s(_unref(styles)),\n                f: _s(__props.lStyle),\n                g: _o(($event = null) => { return _ctx.$emit('click'); })\n            }) : !_unref(isSVG) && !_unref(isIconify) && _unref(isImage) ? new UTSJSONObject({\n                i: _n(_unref(classes)),\n                j: _n(__props.lClass),\n                k: _s(_unref(styles)),\n                l: _s(__props.lStyle),\n                m: _unref(iconUrl),\n                n: _o(($event = null) => { return _ctx.$emit('click'); })\n            }) : new UTSJSONObject({}), new UTSJSONObject({\n                h: !_unref(isSVG) && !_unref(isIconify) && _unref(isImage)\n            }));\n            return __returned__;\n        };\n    }\n});\n//# sourceMappingURL=/Users/xyhc/Documents/veepai_uniappx/uni_modules/lime-icon/components/l-icon/l-icon.uvue?vue&type=script&setup=true&lang.uts.js.map","references":["/Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli-vite/node_modules/@vue/runtime-core/dist/runtime-core.d.ts","/Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli-vite/node_modules/@vue/runtime-core/dist/runtime-core.d.ts","/Users/xyhc/Documents/veepai_uniappx/uni_modules/lime-shared/addUnit/index.ts","/Users/xyhc/Documents/veepai_uniappx/uni_modules/lime-icon/components/l-icon/types.ts","/Users/xyhc/Documents/veepai_uniappx/uni_modules/lime-icon/components/l-icon/icons.uts"],"uniExtApis":["uni.getStorageSync"],"map":"{\"version\":3,\"file\":\"l-icon.uvue?vue&type=script&setup=true&lang.uts.js\",\"sourceRoot\":\"\",\"sources\":[\"l-icon.uvue?vue&type=script&setup=true&lang.uts\"],\"names\":[],\"mappings\":\"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\"}"}
