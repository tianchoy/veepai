{"code":"import { defineComponent } from \"vue\";\n/**\n * BottomPopup 底部弹出层\n * @description BottomPopup 底部弹出层，从底部弹出的浮层，引导用户进行相关操作。\n * @tutorial https://unix.firstui.cn/\n * @property {Boolean} visible {Boolean} 是否显示底部弹出层\n * @property {String} background {String} 底部弹出层背景颜色\n * @property {Number} radius {Number} 底部弹出层左上/右上圆角值，单位rpx\n * @property {Number} zIndex {Number} 底部弹出层z-index值\n * @property {Boolean} maskClosable {Boolean} 点击遮罩 是否可关闭\n * @property {String} maskBackground {String} 遮罩背景色\n * @property {Boolean} safeArea {Boolean} 是否适配底部安全区\n * @event {Function} close 点击遮罩层（maskClosable=true）时触发，() => void\n * @event {Function} update:visible 点击遮罩层（maskClosable=true）时触发，用于双向绑定\t，(event: boolean) => void\n */\nexport default defineComponent({\n    name: 'fui-bottom-popup',\n    emits: ['close', 'update:visible'],\n    props: {\n        visible: {\n            type: Boolean,\n            default: false\n        },\n        background: {\n            type: String,\n            default: '#fff'\n        },\n        radius: {\n            type: Number,\n            default: 24\n        },\n        zIndex: {\n            type: Number,\n            default: 996\n        },\n        maskClosable: {\n            type: Boolean,\n            default: true\n        },\n        maskBackground: {\n            type: String,\n            default: 'rgba(0,0,0,.6)'\n        },\n        safeArea: {\n            type: Boolean,\n            default: true\n        }\n    },\n    data() {\n        const refId = `fui_bp_${parseInt(Math.ceil(Math.random() * 10e5).toString(), 36)}`;\n        const refMkId = `fui_bpmk_${parseInt(Math.ceil(Math.random() * 10e5).toString(), 36)}`;\n        return {\n            refId: refId,\n            refMkId: refMkId,\n            iphoneX: false,\n            isShow: false,\n            element: null,\n            mkElement: null\n        };\n    },\n    watch: {\n        visible: {\n            handler(newVal) {\n                if (newVal) {\n                    this.open();\n                }\n                else {\n                    if (this.isShow)\n                        this.close();\n                }\n            },\n            immediate: true\n        }\n    },\n    created() {\n        this.iphoneX = this.isPhoneX();\n    },\n    mounted() {\n        this.$nextTick(() => {\n            setTimeout(() => {\n                if (!this.visible)\n                    this.close();\n            }, 50);\n        });\n    },\n    methods: {\n        handleClose() {\n            if (!this.maskClosable)\n                return null;\n            this.$emit('close');\n            this.$emit('update:visible', false);\n        },\n        isPhoneX() {\n            if (!this.safeArea)\n                return false;\n            //34px\n            const res = uni.getSystemInfoSync();\n            let iphonex = false;\n            let models = ['iphonex', 'iphonexr', 'iphonexsmax'];\n            for (let i = 11; i < 20; i++) {\n                models.push(`iphone${i}`);\n                models.push(`iphone${i}mini`);\n                models.push(`iphone${i}pro`);\n                models.push(`iphone${i}promax`);\n            }\n            const model = res.model.replace(/\\s/g, \"\").toLowerCase();\n            const newModel = model.split('<')[0];\n            if (models.includes(model) || models.includes(newModel) || res.safeAreaInsets.bottom > 0) {\n                iphonex = true;\n            }\n            return iphonex;\n        },\n        open() {\n            this.isShow = true;\n            this.$nextTick(() => {\n                setTimeout(() => {\n                    this._animation(true);\n                }, 50);\n            });\n        },\n        close() {\n            this.isShow = false;\n            this._animation(false);\n        },\n        _animation(visible) {\n            if (this.element == null) {\n                this.element = this.$refs[this.refId];\n            }\n            if (this.mkElement == null) {\n                this.mkElement = this.$refs[this.refMkId];\n            }\n            this.element.style.setProperty('transform', `translateY(${visible ? '0' : '100%'})`);\n            this.element.style.setProperty('opacity', visible ? '1' : '0');\n            this.mkElement.style.setProperty('opacity', visible ? '1' : '0');\n            if (visible) {\n                this.mkElement.style.setProperty('visibility', 'visible');\n                this.element.style.setProperty('visibility', 'visible');\n            }\n            else {\n                setTimeout(() => {\n                    this.mkElement.style.setProperty('visibility', 'hidden');\n                    this.element.style.setProperty('visibility', 'hidden');\n                }, 300);\n            }\n        },\n        stop() { }\n    }\n});\n//# sourceMappingURL=/Users/xyhc/Documents/veepai_uniappx/uni_modules/firstui-unix/components/fui-bottom-popup/fui-bottom-popup.uvue?vue&type=script&lang.uts.js.map","references":[],"uniExtApis":["uni.getSystemInfoSync"],"map":"{\"version\":3,\"file\":\"fui-bottom-popup.uvue?vue&type=script&lang.uts.js\",\"sourceRoot\":\"\",\"sources\":[\"fui-bottom-popup.uvue?vue&type=script&lang.uts\"],\"names\":[],\"mappings\":\"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\"}"}
