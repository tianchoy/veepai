{"code":"import { defineComponent } from \"vue\";\n/**\n * Badge 徽章\n * @description Badge 徽章，可自定义颜色。\n * @tutorial https://unix.firstui.cn/\n * @property {Number} value {Number | String} badge显示文本\n * @property {Number} max {Number} 最大值，当值超过max时使用+号代替，仅为数字时有效，-1表示不限制\n * @property {String} type {String}\t类型，有效值：primary，success，warning，danger，purple，white\n * @property {String} background {String} 背景色，如果设置背景色则type失效\n * @property {String} color\t{String} 字体颜色\n * @property {Boolean} dot {Boolean} 是否显示为圆点\n * @property {Number} marginTop {Number} margin-top值，单位rpx\n * @property {Number} marginLeft {Number} margin-left值，单位rpx\n * @property {Number} marginRight {Number} margin-right值，单位rpx\n * @property {Boolean} absolute {Boolean} 是否绝对定位\n * @property {String} top {String} top值，需带单位，absolute为true时生效\n * @property {String} right {String} right值，需带单位，absolute为true时生效\n * @property {Number} scaleRatio {Number} 缩放比例，当比例大于1时，外层容器需要设置 overflow: visible或者留出足够空间，避免显示不全\n * @event {Function} onclick 点击badge时触发，无返回值，() => void\n */\nexport default defineComponent({\n    name: \"fui-badge\",\n    emits: ['onclick'],\n    props: {\n        value: {\n            type: [Object, String, Number],\n            default: ''\n        },\n        max: {\n            type: Number,\n            default: -1\n        },\n        type: {\n            type: String,\n            default: 'primary'\n        },\n        background: {\n            type: String,\n            default: ''\n        },\n        color: {\n            type: String,\n            default: '#FFFFFF'\n        },\n        dot: {\n            type: Boolean,\n            default: false\n        },\n        marginTop: {\n            type: Number,\n            default: 0\n        },\n        marginLeft: {\n            type: Number,\n            default: 0\n        },\n        marginRight: {\n            type: Number,\n            default: 0\n        },\n        absolute: {\n            type: Boolean,\n            default: false\n        },\n        top: {\n            type: String,\n            default: '-8rpx'\n        },\n        right: {\n            type: String,\n            default: '-18rpx'\n        },\n        scaleRatio: {\n            type: Number,\n            default: 1\n        }\n    },\n    data() {\n        return {\n            width: '0',\n            showValue: ''\n        };\n    },\n    watch: {\n        value() {\n            this.getWidth();\n        }\n    },\n    mounted() {\n        this.getWidth();\n    },\n    methods: {\n        rpx2px(rpx) {\n            let px;\n            const sys = uni.getSystemInfoSync();\n            px = sys.windowWidth / 750 * rpx;\n            return px;\n        },\n        _getTextWidth(text) {\n            let sum = 0;\n            for (let i = 0, len = text.length; i < len; i++) {\n                const code = text.charCodeAt(i);\n                if (code <= 255)\n                    sum = sum + 1;\n                else\n                    sum = sum + 2;\n            }\n            const rpx = (text.length > 1 ? 32 : 24);\n            const px = this.rpx2px(rpx);\n            const strCode = text.charCodeAt(0);\n            let multiplier = 12;\n            if (strCode >= 65 && strCode <= 90) {\n                multiplier = 15;\n            }\n            return `${(sum / 2 * multiplier) + px}px`;\n        },\n        getWidth() {\n            let max = this.max;\n            let value;\n            if (typeof this.value == 'string') {\n                value = this.value;\n            }\n            else {\n                if (typeof this.value == 'number') {\n                    const val_num = this.value;\n                    if (max == -1) {\n                        value = val_num.toString();\n                    }\n                    else {\n                        value = val_num > max ? `${max}+` : val_num.toString();\n                    }\n                }\n                else {\n                    if (max == -1) {\n                        value = this.value.toString();\n                    }\n                    else {\n                        value = parseFloat(this.value.toString()) > max ? `${max}+` : `${this.value}`;\n                    }\n                }\n            }\n            this.showValue = value;\n            this.width = this.dot ? '8px' : this._getTextWidth(value);\n        },\n        handleClick() {\n            this.$emit('onclick');\n        }\n    }\n});\n//# sourceMappingURL=/Users/xyhc/Documents/veepai_uniappx/uni_modules/firstui-unix/components/fui-badge/fui-badge.uvue?vue&type=script&lang.uts.js.map","references":[],"uniExtApis":["uni.getSystemInfoSync"],"map":"{\"version\":3,\"file\":\"fui-badge.uvue?vue&type=script&lang.uts.js\",\"sourceRoot\":\"\",\"sources\":[\"fui-badge.uvue?vue&type=script&lang.uts\"],\"names\":[],\"mappings\":\"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\"}"}
