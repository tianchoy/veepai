{"code":"import { defineComponent as _defineComponent } from 'vue';\nimport { unref as _unref, o as _o, gei as _gei, sei as _sei, s as _s } from \"vue\";\nimport { LSvpProps } from './type';\nimport { pathToDataUrl, svgToDataUrl } from './utils';\nexport default /*#__PURE__*/ _defineComponent({\n    __name: 'l-svg',\n    props: {\n        src: new UTSJSONObject({ default: '' }),\n        color: new UTSJSONObject({ default: '' }),\n        web: new UTSJSONObject({ type: Boolean, default: false }),\n        inherit: new UTSJSONObject({ type: Boolean, default: false })\n    },\n    emits: ['load', 'error'],\n    setup(__props, _a) {\n        /**\n         * Svg SVG组件\n         * @description 用于渲染SVG路径元素，支持动态颜色和继承属性\n         * <br>插件类型：LSvpComponentPublicInstance\n         * @tutorial https://ext.dcloud.net.cn/plugin?name=lime-svg\n         *\n         * @property {string} src SVG路径\n         * @property {string} color 路径颜色（默认：\"currentColor\"）\n         * @property {boolean} web 是否启用Web优化模式（默认：false）\n         * @property {boolean} inherit 是否继承父级SVG属性（默认：true）\n         * @event {Function} load SVG路径加载完成时触发\n         * @event {Function} error SVG路径加载失败时触发\n         */\n        var __emit = _a.emit;\n        const props = __props;\n        const emit = __emit;\n        const path = ref(props.src);\n        const svgRef = ref(null);\n        const isInherit = computed(() => {\n            return props.color != '';\n        });\n        const imageURL = ref('');\n        const formatUrl = (url, action) => {\n            if (url.indexOf(`'`) > 0)\n                return `${action}(\"${url}\")`;\n            return `${action}('${url}')`;\n        };\n        const styles = computed(() => {\n            const style = new Map();\n            if (path.value != '') {\n                // style.set('--svg', formatUrl(props.src, 'url'))\n                style.set('--svg', formatUrl(path.value, 'url'));\n            }\n            if (props.color != '') {\n                style.set('color', props.color);\n            }\n            return style;\n        });\n        const errorDetaill = new UTSJSONObject({\n            errMsg: '加载失败'\n        });\n        const errorEvent = new UTSJSONObject({\n            type: 'error',\n            detaill: errorDetaill\n        });\n        const onError = () => {\n            emit('error', errorEvent);\n        };\n        const onLoad = (e) => {\n            const detail = new UTSJSONObject({\n                width: 512,\n                height: 512\n            });\n            const loadEvent = new UTSJSONObject({\n                type: 'load',\n                detail\n            });\n            emit('load', loadEvent);\n        };\n        // app\n        // 小程序\n        watchEffect(() => {\n            if (props.src == '')\n                return null;\n            if (props.src.startsWith('<svg')) {\n                path.value = svgToDataUrl(props.src);\n            }\n            else if (props.src.startsWith('/static')) {\n                pathToDataUrl(props.src).then((res = null) => {\n                    path.value = res;\n                }).catch((err = null) => {\n                    emit('error', errorEvent);\n                    uni.__f__('warn', 'at uni_modules/lime-svg/components/l-svg/l-svg.uvue:263', \"[lime-svg]\" + props.src + UTS.JSON.stringify(err));\n                });\n            }\n            else {\n                path.value = props.src;\n            }\n        });\n        return (_ctx = null, _cache = null) => {\n            const __returned__ = {\n                a: _unref(path),\n                b: _o(onError),\n                c: _o(onLoad),\n                d: _sei(_gei(_ctx, ''), 'view'),\n                e: _unref(isInherit) ? 1 : '',\n                f: _s(_unref(styles))\n            };\n            return __returned__;\n        };\n    }\n});\n//# sourceMappingURL=/Users/xyhc/Documents/veepai_uniappx/uni_modules/lime-svg/components/l-svg/l-svg.uvue?vue&type=script&setup=true&lang.uts.js.map","references":["/Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli-vite/node_modules/@vue/runtime-core/dist/runtime-core.d.ts","/Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli-vite/node_modules/@vue/runtime-core/dist/runtime-core.d.ts"],"uniExtApis":["uni.__f__"],"map":"{\"version\":3,\"file\":\"l-svg.uvue?vue&type=script&setup=true&lang.uts.js\",\"sourceRoot\":\"\",\"sources\":[\"l-svg.uvue?vue&type=script&setup=true&lang.uts\"],\"names\":[],\"mappings\":\"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\"}"}
