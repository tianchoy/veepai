{"version":3,"sources":["uni_modules/lime-overlay/components/l-overlay/l-overlay.uvue"],"sourcesContent":["<template>\r\n\t<view v-if=\"inited\"\r\n\t\tclass=\"l-overlay\" \r\n\t\tref=\"overlayRef\"\r\n\t\t:class=\"[lClass, classes]\"\r\n\t\t:style=\"[styles, lStyle]\"\r\n\t\t@click.stop=\"onClick\" \r\n\t\t@touchmove.stop=\"noop\" \r\n\t\t@transitionend=\"finished\" \r\n\t\t:aria-role=\"ariaRole\" \r\n\t\t:aria-label=\"ariaLabel\">\r\n\t\t<slot></slot>\r\n\t</view>\r\n</template>\r\n\r\n<script lang=\"uts\" setup>\r\n\timport { useTransition, UseTransitionOptions, TransitionEmitStatus } from '@/uni_modules/lime-transition';\r\n\timport { OverlayProps } from './type';\r\n\tdefineOptions({\r\n\t\tname:'l-overlay'\t\r\n\t})\r\n\t\r\n\tconst props = withDefaults(defineProps<OverlayProps>(), {\r\n\t\tariaLabel: '关闭',\r\n\t\tariaRole: 'button',\r\n\t\tpreventScrollThrough: true,\r\n\t\tzIndex: 998,\r\n\t\tvisible: false,\r\n\t\tduration: 300,\r\n\t})\r\n\t\r\n\tconst emit = defineEmits(['click', 'before-enter', 'enter', 'after-enter', 'before-leave', 'leave', 'after-leave'])\r\n\t\r\n\tconst {inited, display, classes, finished} = useTransition({\r\n\t\tdefaultName: 'fade',\r\n\t\tappear: props.visible,\r\n\t\temits: (name:TransitionEmitStatus) => { emit(name) },\r\n\t\tvisible: (): boolean => props.visible,\r\n\t\tduration: props.duration,\r\n\t} as UseTransitionOptions)\r\n\t\r\n\tconst styles = computed<Map<string,any>>(():Map<string,any> => {\r\n\t\tconst style = new Map<string,any>();\r\n\t\tif (props.bgColor != null) {\r\n\t\t\tstyle.set(\"background\", props.bgColor!)\r\n\t\t}\r\n\t\tif (props.zIndex > 0) {\r\n\t\t\tstyle.set(\"z-index\", props.zIndex)\r\n\t\t}\r\n\r\n\r\n\r\n\r\n\r\n\r\n\t\treturn style\r\n\t})\r\n\t\r\n\tconst noop = () => {}\r\n\tconst onClick = (event: UniPointerEvent) =>{\r\n\t\t// event.stopPropagation()\r\n\t\temit('click', !props.visible)\r\n\t}\r\n\r\n\tconst overlayRef = ref<UniElement|null>(null)\r\n\t\r\n\twatchEffect(()=>{\r\n\t\toverlayRef.value?.style.setProperty('transition-duration', `${props.duration}ms`)\r\n\t\tif(!display.value){\r\n\t\t\toverlayRef.value?.style.setProperty('display', \"none\")\r\n\t\t} else {\r\n\t\t\toverlayRef.value?.style.setProperty('display', \"flex\")\r\n\t\t}\r\n\t})\r\n\r\n\t\r\n</script>\r\n<style lang=\"scss\">\r\n\t@import './index';\r\n</style>"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;YAsBC,IAAM,QAAQ;YASd,IAAA,KAAA,OAAA,MAAA,EAAA,OAAA,yBAAA,GAAA,CAAA,EAAA;gBAAA,MAAA,IAAA,CAAA,QAAA;YAAA;YAEA,IAA6C,iBAAA,qCAC5C,cAAa,QACb,SAAQ,MAAM,OAAO,EACrB,QAAO,IAAC,2BAA6B;gBAAG,KAAK;YAAM;cACnD,UAAS,OAAI,OAAO;uBAAI,MAAM,OAAO;;cACrC,WAAU,MAAM,QAAQ;gBALlB,SAAsC,eAAtC;gBAAQ,UAA8B,eAA9B;gBAAS,UAAqB,eAArB;gBAAS,WAAY,eAAZ;YAQjC,IAAM,SAAS,SAAS,IAAI,MAAM,EAAC,GAAG,GAAG,OAAG,IAAI,MAAM,EAAC,GAAG,EAAI;gBAC7D,IAAM,QAAQ,AAAI,IAAI,MAAM,EAAC,GAAG;gBAChC,IAAI,MAAM,OAAO,IAAI,IAAI,EAAE;oBAC1B,MAAM,GAAG,CAAC,cAAc,MAAM,OAAO;;gBAEtC,IAAI,MAAM,MAAM,GAAG,CAAC,EAAE;oBACrB,MAAM,GAAG,CAAC,WAAW,MAAM,MAAM;;gBAQlC,OAAO;YACR;;YAEA,IAAM,OAAO,KAAK,CAAE;YACpB,IAAM,UAAU,IAAC,OAAO,gBAAmB;gBAE1C,KAAK,SAAS,CAAC,MAAM,OAAO;YAC7B;YAEA,IAAM,aAAa,IAAI,aAAiB,IAAI;YAE5C,YAAY,KAAI;gBACf,WAAW,KAAK,EAAE,OAAM,YAAY,uBAAuB,KAAG,MAAM,QAAQ,GAAA;gBAC5E,IAAG,CAAC,QAAQ,KAAK,EAAC;oBACjB,WAAW,KAAK,EAAE,OAAM,YAAY,WAAW;uBACzC;oBACN,WAAW,KAAK,EAAE,OAAM,YAAY,WAAW;;YAEjD;;;uBAxEA,IAAA,OAAA,MAAA;wDACC,SAAK,CAAA,4BACW;wBAAA;wBAAA;4BAAA,KAAA,MAAA;4BAAA,MAAA;yBAAA;qBAAA,GAAhB,aAAI,cAEH,SAAK,YACL,WAAK,eAAA;wBAAO,MAAA;wBAAO,KAAA,MAAA;qBAAA,GACnB,aAAA,cAAS,SAAW;wBAAA;qBAAA,GACpB,iBAAA,cAAe,MAAQ;wBAAA;qBAAA,GACvB,qBAAW,MAAA,WACX,eAAU,KAAE,QAAA,mCACb"}