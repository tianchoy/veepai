{"version":3,"sources":["uni_modules/lime-search/components/l-search/l-search.uvue"],"sourcesContent":["<template>\n\t<view class=\"l-search\" :style=\"[lStyle]\">\n\t\t<slot name=\"left\"></slot>\n\t\t<view class=\"l-search__content\" :style=\"[contextStyle]\" :class=\"contentClass\">\n\n\n\n\t\t\t\t<slot name=\"left-icon\">\n\t\t\t\t\t<l-icon class=\"l-search__icon\" size=\"42rpx\" :color=\"iconColor\" :name=\"leftIcon\" v-if=\"leftIcon.length > 0\" />\n\t\t\t\t</slot>\n\n\n\n\t\t\t<input  \n\t\t\t\tname=\"input\"\n\t\t\t\tclass=\"l-search__keyword\"\n\t\t\t\t:style=\"[inputStyle, center ? 'text-align:center':'']\"\n\t\t\t\t:type=\"type\"\n\t\t\t\t:maxlength=\"maxlength\"\n\t\t\t\t:disabled=\"disabled\"\n\t\t\t\t:focus=\"focus\"\n\t\t\t\t:value=\"searchValue\"\n\t\t\t\t:confirm-type=\"confirmType\"\n\t\t\t\t:confirm-hold=\"confirmHold\"\n\t\t\t\t:cursor=\"cursor\"\n\t\t\t\t:cursor-color=\"cursorColor\"\n\t\t\t\t:adjust-position=\"adjustPosition\"\n\t\t\t\t:always-embed=\"alwaysEmbed\"\n\t\t\t\t:selection-start=\"selectionStart\"\n\t\t\t\t:selection-end=\"selectionEnd\"\n\t\t\t\t:hold-keyboard=\"holdKeyboard\"\n\t\t\t\t:cursor-spacing=\"cursorSpacing\"\n\t\t\t\t:placeholder=\"placeholder\"\n\t\t\t\t:placeholder-style=\"(placeholderStyle ?? ' ') +  (center ? 'text-align:center':'')\"\n\t\t\t\tplaceholder-class=\"l-search__placeholder\"\n\t\t\t\t@input=\"handleInput\"\n\t\t\t\t@focus=\"handleFocus\"\n\t\t\t\t@blur=\"handleBlur\"\n\t\t\t\t@confirm=\"handleConfirm\"/>\n\t\t\t<view\n\t\t\t\tclass=\"l-search__clear\"\n\t\t\t\t:class=\"{\n\t\t\t\t\t'l-search__clear--right': $slots['right-icon'] != null\n\t\t\t\t}\"\n\t\t\t\tv-if=\"clearable\"\n\t\t\t\tv-show=\"searchValue.length>0\"\n\t\t\t\t@click=\"handleClear\"\n\t\t\t\taria-role=\"button\"\n\t\t\t\taria-label=\"清除\">\n\n\n\n\t\t\t\t<l-icon class=\"l-search__icon l-search__clear-icon\" name=\"close-circle-filled\" size=\"48rpx\" :color=\"clearIconColor\"  />\n\n\n\n\t\t\t</view>\t\n\t\t\t<slot name=\"right-icon\"/>\n\t\t</view>\n\t\t<slot name=\"action\">\n\t\t\t<text class=\"l-search__action\" :class=\"{'l-search__action--focused': focused}\" @click=\"handleActionClick\" v-if=\"action != null\"> {{action}}</text>\n\t\t</slot>\n\t</view>\n</template>\n<script lang=\"uts\" setup>\n\timport { SearchProps } from './type';\n\timport { characterLimit } from '@/uni_modules/lime-shared/characterLimit';\n\t\n\tconst emit = defineEmits(['change', 'blur', 'clear', 'focus', 'submit', 'action-click'])\n\tconst props = withDefaults(defineProps<SearchProps>(), {\n\t\tadjustPosition: true,\n\t\talwaysEmbed: false,\n\t\tcenter: false,\n\t\tclearable: true,\n\t\tconfirmHold: false,\n\t\tconfirmType: 'search',\n\t\t// cursor: 0,\n\t\tcursorSpacing: 0,\n\t\tdisabled: false,\n\t\tfocus: false,\n\t\tholdKeyboard: false,\n\t\tleftIcon: 'search',\n\t\tmaxlength: -1,\n\t\tselectionEnd: -1,\n\t\tselectionStart: -1,\n\t\tshape: 'square',\n\t\ttype: 'text',\n\t})\n\t\n\tconst focused = ref(props.focus)\n\tconst modelValue = defineModel({type: String, default: ''})\n\tconst searchValue = computed({\n\t\tset(value: string) {\n\t\t\tmodelValue.value = value;\n\t\t\temit('change', value)\n\t\t},\n\t\tget():string {\n\t\t\treturn props.value ?? modelValue.value\n\t\t}\n\t} as WritableComputedOptions<string>)\n\t\n\tconst contentClass = computed(():Map<string, any>=>{\n\t\tconst cls = new Map<string, any>()\n\t\t// cls.set(focused.value ? 'is-focused': 'not-focused', true)\n\t\tcls.set('l-search__content--focused', focused.value)\n\t\tcls.set('l-search__content--center', props.center)\n\t\tcls.set('l-search__content--' + props.shape, true)\n\t\treturn cls\n\t})\n\t\n\tconst contextStyle = computed(():Map<string, any>=>{\n\t\tconst style = new Map<string, any>()\n\t\tif(props.padding != null) {\n\t\t\tstyle.set('padding', props.padding!)\n\t\t}\n\t\tif(props.radius != null) {\n\t\t\tstyle.set('border-radius', props.radius!)\n\t\t}\n\t\tif(props.height != null) {\n\t\t\tstyle.set('height', props.height!)\n\t\t}\n\t\tif(props.bgColor != null) {\n\t\t\tstyle.set('background', props.bgColor!)\n\t\t}\n\t\treturn style\n\t})\n\t\n\tconst inputStyle = computed(():Map<string, any>=>{\n\t\tconst style = new Map<string, any>()\n\t\tif(props.fontSize != null) {\n\t\t\tstyle.set('font-size', props.fontSize!)\n\t\t}\n\t\tif(props.textColor != null) {\n\t\t\tstyle.set('color', props.textColor!)\n\t\t}\n\t\treturn style\n\t})\n\t\n\tconst handleInput = (e: UniInputEvent) => {\n\t\tlet { value } = e.detail;\n\t\tconst { maxlength, maxcharacter } = props;\n\t\tif(maxcharacter != null && maxcharacter > 0) {\n\t\t\tconst { characters } = characterLimit('maxcharacter', value, maxcharacter)\n\t\t\tvalue = characters;\n\t\t} \n\t\t// else if(maxlength > 0) {\n\t\t// \tconst { characters } = characterLimit('maxlength', value, maxlength)\n\t\t// \tvalue = characters;\n\t\t// }\n\t\tsearchValue.value = value\n\t}\n\tconst handleClear = (_e: UniPointerEvent) => {\n\t\tsearchValue.value = '';\n\t\tfocused.value = true\n\t\temit('clear')\n\t}\n\tconst handleFocus = (e: UniInputFocusEvent) => {\n\t\tconst { value } = e.detail;\n\t\tfocused.value = true\n\t\temit('focus', value)\n\t}\n\tconst handleBlur = (e: UniInputBlurEvent) => {\n\t\tconst { value } = e.detail;\n\t\tfocused.value = false\n\t\temit('blur', value)\n\t}\n\tconst handleConfirm = (e: UniInputConfirmEvent) => {\n\t\tconst { value } = e.detail;\n\t\temit('submit', value)\n\t}\n\tconst handleActionClick = (_e: UniPointerEvent) => {\n\t\temit('action-click')\n\t}\n</script>\n<style lang=\"scss\">\n\t@import './index';\n</style>\n"],"names":[],"mappings":"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"}