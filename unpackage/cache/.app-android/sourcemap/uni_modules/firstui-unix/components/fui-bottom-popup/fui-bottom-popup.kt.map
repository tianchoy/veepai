{"version":3,"sources":["uni_modules/firstui-unix/components/fui-bottom-popup/fui-bottom-popup.uvue"],"sourcesContent":["<template>\r\n\t<view class=\"fui-bottom__popup-wrap\" :style=\"{ zIndex: zIndex,background:maskBackground}\" @tap.stop=\"handleClose\"\r\n\t\t:ref=\"refMkId\">\r\n\t\t<view @tap.stop=\"stop\" :ref=\"refId\" class=\"fui-bottom__popup\" :class=\"{'fui-bp__safe-weex':iphoneX && safeArea}\"\r\n\t\t\t:style=\"{borderTopLeftRadius:`${radius}rpx`,borderTopRightRadius:`${radius}rpx`,background: background}\">\r\n\t\t\t<slot></slot>\r\n\t\t</view>\r\n\t</view>\r\n</template>\r\n\r\n<script>\r\n\t/**\r\n\t * BottomPopup 底部弹出层\r\n\t * @description BottomPopup 底部弹出层，从底部弹出的浮层，引导用户进行相关操作。\r\n\t * @tutorial https://unix.firstui.cn/\r\n\t * @property {Boolean} visible {Boolean} 是否显示底部弹出层\r\n\t * @property {String} background {String} 底部弹出层背景颜色\r\n\t * @property {Number} radius {Number} 底部弹出层左上/右上圆角值，单位rpx\r\n\t * @property {Number} zIndex {Number} 底部弹出层z-index值\r\n\t * @property {Boolean} maskClosable {Boolean} 点击遮罩 是否可关闭\r\n\t * @property {String} maskBackground {String} 遮罩背景色\r\n\t * @property {Boolean} safeArea {Boolean} 是否适配底部安全区\r\n\t * @event {Function} close 点击遮罩层（maskClosable=true）时触发，() => void\r\n\t * @event {Function} update:visible 点击遮罩层（maskClosable=true）时触发，用于双向绑定\t，(event: boolean) => void\r\n\t */\r\n\texport default {\r\n\t\tname: 'fui-bottom-popup',\r\n\t\temits: ['close', 'update:visible'],\r\n\t\tprops: {\r\n\t\t\tvisible: {\r\n\t\t\t\ttype: Boolean,\r\n\t\t\t\tdefault: false\r\n\t\t\t},\r\n\t\t\tbackground: {\r\n\t\t\t\ttype: String,\r\n\t\t\t\tdefault: '#fff'\r\n\t\t\t},\r\n\t\t\tradius: {\r\n\t\t\t\ttype: Number,\r\n\t\t\t\tdefault: 24\r\n\t\t\t},\r\n\t\t\tzIndex: {\r\n\t\t\t\ttype: Number,\r\n\t\t\t\tdefault: 996\r\n\t\t\t},\r\n\t\t\tmaskClosable: {\r\n\t\t\t\ttype: Boolean,\r\n\t\t\t\tdefault: true\r\n\t\t\t},\r\n\t\t\tmaskBackground: {\r\n\t\t\t\ttype: String,\r\n\t\t\t\tdefault: 'rgba(0,0,0,.6)'\r\n\t\t\t},\r\n\t\t\tsafeArea: {\r\n\t\t\t\ttype: Boolean,\r\n\t\t\t\tdefault: true\r\n\t\t\t}\r\n\t\t},\r\n\t\tdata() {\r\n\t\t\tconst refId = `fui_bp_${parseInt(Math.ceil(Math.random() * 10e5).toString(), 36)}`\r\n\t\t\tconst refMkId = `fui_bpmk_${parseInt(Math.ceil(Math.random() * 10e5).toString(), 36)}`\r\n\t\t\treturn {\r\n\t\t\t\trefId: refId,\r\n\t\t\t\trefMkId: refMkId,\r\n\t\t\t\tiphoneX: false,\r\n\t\t\t\tisShow: false,\r\n\t\t\t\telement: null as UniElement | null,\r\n\t\t\t\tmkElement: null as UniElement | null\r\n\t\t\t}\r\n\t\t},\r\n\t\twatch: {\r\n\t\t\tvisible: {\r\n\t\t\t\thandler(newVal : boolean) {\r\n\t\t\t\t\tif (newVal) {\r\n\t\t\t\t\t\tthis.open();\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tif (this.isShow) this.close();\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\timmediate: true\r\n\t\t\t}\r\n\t\t},\r\n\t\tcreated() {\r\n\r\n\r\n\r\n\t\t},\r\n\t\tmounted() {\r\n\t\t\tthis.$nextTick(() => {\r\n\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\tif (!this.visible) this.close();\r\n\t\t\t\t}, 50);\r\n\t\t\t})\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\thandleClose() {\r\n\t\t\t\tif (!this.maskClosable) return;\r\n\t\t\t\tthis.$emit('close');\r\n\t\t\t\tthis.$emit('update:visible', false)\r\n\t\t\t},\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\t\t\topen() {\r\n\t\t\t\tthis.isShow = true;\r\n\t\t\t\tthis.$nextTick(() => {\r\n\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t\tthis._animation(true);\r\n\t\t\t\t\t}, 50);\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tclose() {\r\n\t\t\t\tthis.isShow = false;\r\n\t\t\t\tthis._animation(false);\r\n\t\t\t},\r\n\t\t\t_animation(visible : boolean) {\r\n\t\t\t\tif (this.element == null) {\r\n\t\t\t\t\tthis.element = this.$refs[this.refId] as UniElement;\r\n\t\t\t\t}\r\n\t\t\t\tif (this.mkElement == null) {\r\n\t\t\t\t\tthis.mkElement = this.$refs[this.refMkId] as UniElement;\r\n\t\t\t\t}\r\n\t\t\t\tthis.element!.style.setProperty('transform', `translateY(${visible ? '0' : '100%'})`);\r\n\t\t\t\tthis.element!.style.setProperty('opacity', visible ? '1' : '0')\r\n\t\t\t\tthis.mkElement!.style.setProperty('opacity', visible ? '1' : '0')\r\n\t\t\t\tif (visible) {\r\n\t\t\t\t\tthis.mkElement!.style.setProperty('visibility', 'visible');\r\n\t\t\t\t\tthis.element!.style.setProperty('visibility', 'visible');\r\n\t\t\t\t} else {\r\n\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t\tthis.mkElement!.style.setProperty('visibility', 'hidden');\r\n\t\t\t\t\t\tthis.element!.style.setProperty('visibility', 'hidden');\r\n\t\t\t\t\t}, 300)\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tstop() { }\r\n\t\t}\r\n\t};\r\n</script>\r\n\r\n<style scoped>\r\n\t.fui-bottom__popup-wrap {\r\n\t\tposition: fixed;\r\n\t\tleft: 0;\r\n\t\tright: 0;\r\n\t\ttop: 0;\r\n\t\tbottom: 0;\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: row;\r\n\t\talign-items: flex-end;\r\n\t\tjustify-content: center;\r\n\t\ttransition-property: opacity, visibility;\r\n\t\ttransition-timing-function: ease-in-out;\r\n\t\ttransition-duration: 0.3s;\r\n\t\tvisibility: hidden;\r\n\t\tborder-bottom-width: 0;\r\n\t\toverflow: hidden;\r\n\t\topacity: 0;\r\n\t}\r\n\r\n\t.fui-bottom__popup {\r\n\t\twidth: 100%;\r\n\t\ttransition-property: transform, opacity, visibility;\r\n\t\ttransition-timing-function: ease-in-out;\r\n\t\ttransition-duration: 0.3s;\r\n\t\tmin-height: 20rpx;\r\n\t\toverflow: hidden;\r\n\t\ttransform: translateY(100%);\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: row;\r\n\t\tposition: relative;\r\n\t}\r\n\r\n\t.fui-bp__safe-weex {\r\n\t\tpadding-bottom: 34px;\r\n\t}\r\n</style>"],"names":[],"mappings":"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"}