{"version":3,"sources":["uni_modules/firstui-unix/components/fui-badge/fui-badge.uvue"],"sourcesContent":["<template>\r\n\t<text\r\n\t\t:class=\"[dot?'fui-badge__dot':'fui-badge__wrap',background!=''?'':('fui-badge__bg-'+type),absolute?'fui-badge__absolute':'',scaleRatio!=1 ?'fui-badge__trans-origin':'',background=='' && type=='white'?'fui-badge__text-color':'']\"\r\n\t\t:style=\"{top:absolute?top:'auto',right:absolute?right:'auto',transform:`scale(${scaleRatio})`,marginTop:`${marginTop}rpx`,marginLeft:`${marginLeft}rpx`,marginRight:`${marginRight}rpx`,width:width,color:color,background:background}\"\r\n\t\t@tap=\"handleClick\" v-if=\"showValue!='' || dot\">{{dot?'':showValue}}</text>\r\n</template>\r\n\r\n<script>\r\n\t/**\r\n\t * Badge 徽章\r\n\t * @description Badge 徽章，可自定义颜色。\r\n\t * @tutorial https://unix.firstui.cn/\r\n\t * @property {Number} value {Number | String} badge显示文本\r\n\t * @property {Number} max {Number} 最大值，当值超过max时使用+号代替，仅为数字时有效，-1表示不限制\r\n\t * @property {String} type {String}\t类型，有效值：primary，success，warning，danger，purple，white\r\n\t * @property {String} background {String} 背景色，如果设置背景色则type失效\r\n\t * @property {String} color\t{String} 字体颜色\r\n\t * @property {Boolean} dot {Boolean} 是否显示为圆点\r\n\t * @property {Number} marginTop {Number} margin-top值，单位rpx\r\n\t * @property {Number} marginLeft {Number} margin-left值，单位rpx\r\n\t * @property {Number} marginRight {Number} margin-right值，单位rpx\r\n\t * @property {Boolean} absolute {Boolean} 是否绝对定位\r\n\t * @property {String} top {String} top值，需带单位，absolute为true时生效\r\n\t * @property {String} right {String} right值，需带单位，absolute为true时生效\r\n\t * @property {Number} scaleRatio {Number} 缩放比例，当比例大于1时，外层容器需要设置 overflow: visible或者留出足够空间，避免显示不全\r\n\t * @event {Function} onclick 点击badge时触发，无返回值，() => void\r\n\t */\r\n\texport default {\r\n\t\tname: \"fui-badge\",\r\n\t\temits: ['onclick'],\r\n\t\tprops: {\r\n\t\t\tvalue: {\r\n\t\t\t\ttype: [Object, String, Number],\r\n\t\t\t\tdefault: ''\r\n\t\t\t},\r\n\t\t\tmax: {\r\n\t\t\t\ttype: Number,\r\n\t\t\t\tdefault: -1\r\n\t\t\t},\r\n\t\t\ttype: {\r\n\t\t\t\ttype: String,\r\n\t\t\t\tdefault: 'primary'\r\n\t\t\t},\r\n\t\t\tbackground: {\r\n\t\t\t\ttype: String,\r\n\t\t\t\tdefault: ''\r\n\t\t\t},\r\n\t\t\tcolor: {\r\n\t\t\t\ttype: String,\r\n\t\t\t\tdefault: '#FFFFFF'\r\n\t\t\t},\r\n\t\t\tdot: {\r\n\t\t\t\ttype: Boolean,\r\n\t\t\t\tdefault: false\r\n\t\t\t},\r\n\t\t\tmarginTop: {\r\n\t\t\t\ttype: Number,\r\n\t\t\t\tdefault: 0\r\n\t\t\t},\r\n\t\t\tmarginLeft: {\r\n\t\t\t\ttype: Number,\r\n\t\t\t\tdefault: 0\r\n\t\t\t},\r\n\t\t\tmarginRight: {\r\n\t\t\t\ttype: Number,\r\n\t\t\t\tdefault: 0\r\n\t\t\t},\r\n\t\t\tabsolute: {\r\n\t\t\t\ttype: Boolean,\r\n\t\t\t\tdefault: false\r\n\t\t\t},\r\n\t\t\ttop: {\r\n\t\t\t\ttype: String,\r\n\t\t\t\tdefault: '-8rpx'\r\n\t\t\t},\r\n\t\t\tright: {\r\n\t\t\t\ttype: String,\r\n\t\t\t\tdefault: '-18rpx'\r\n\t\t\t},\r\n\t\t\tscaleRatio: {\r\n\t\t\t\ttype: Number,\r\n\t\t\t\tdefault: 1\r\n\t\t\t}\r\n\t\t},\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\twidth: '0',\r\n\t\t\t\tshowValue: ''\r\n\t\t\t};\r\n\t\t},\r\n\t\twatch: {\r\n\t\t\tvalue() {\r\n\t\t\t\tthis.getWidth()\r\n\t\t\t}\r\n\t\t},\r\n\t\tmounted() {\r\n\t\t\tthis.getWidth()\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\trpx2px(rpx : number) : number {\r\n\t\t\t\tlet px : number;\r\n\r\n\t\t\t\tpx = UTSAndroid.rpx2px(rpx)\r\n\r\n\r\n\r\n\r\n\r\n\r\n\t\t\t\treturn px;\r\n\t\t\t},\r\n\t\t\t_getTextWidth(text : string) : string {\r\n\t\t\t\tlet sum = 0;\r\n\t\t\t\tfor (let i = 0, len = text.length; i < len; i++) {\r\n\t\t\t\t\tconst code = text.charCodeAt(i) as number\r\n\t\t\t\t\tif (code <= 255)\r\n\t\t\t\t\t\tsum = sum + 1;\r\n\t\t\t\t\telse\r\n\t\t\t\t\t\tsum = sum + 2;\r\n\t\t\t\t}\r\n\t\t\t\tconst rpx = (text.length > 1 ? 32 : 24) as number;\r\n\t\t\t\tconst px = this.rpx2px(rpx);\r\n\t\t\t\tconst strCode = text.charCodeAt(0) as number;\r\n\t\t\t\tlet multiplier = 12;\r\n\t\t\t\tif (strCode >= 65 && strCode <= 90) {\r\n\t\t\t\t\tmultiplier = 15;\r\n\t\t\t\t}\r\n\t\t\t\treturn `${(sum / 2 * multiplier) + px}px`;\r\n\t\t\t},\r\n\t\t\tgetWidth() {\r\n\t\t\t\tlet max = this.max;\r\n\t\t\t\tlet value : string;\r\n\t\t\t\tif (typeof this.value == 'string') {\r\n\t\t\t\t\tvalue = this.value as string;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tif (typeof this.value == 'number') {\r\n\t\t\t\t\t\tconst val_num = this.value as number;\r\n\t\t\t\t\t\tif (max == -1) {\r\n\t\t\t\t\t\t\tvalue = val_num.toString()\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tvalue = val_num > max ? `${max}+` : val_num.toString()\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tif (max == -1) {\r\n\t\t\t\t\t\t\tvalue = this.value.toString()\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tvalue = parseFloat(this.value.toString()) > max ? `${max}+` : `${this.value}`\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tthis.showValue = value;\r\n\t\t\t\tthis.width = this.dot ? '8px' : this._getTextWidth(value)\r\n\t\t\t},\r\n\t\t\thandleClick() {\r\n\t\t\t\tthis.$emit('onclick');\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n</script>\r\n\r\n<style scoped lang=\"scss\">\r\n\t$fui-color-primary: #465CFF !default;\r\n\t$fui-color-success: #09BE4F !default;\r\n\t$fui-color-warning: #FFB703 !default;\r\n\t$fui-color-danger: #FF2B2B !default;\r\n\t$fui-color-purple: #6831FF !default;\r\n\t$fui-color-white: #FFFFFF !default;\r\n\r\n\t.fui-badge__wrap {\r\n\t\theight: 36rpx;\r\n\t\tcolor: #FFFFFF;\r\n\t\tfont-size: 24rpx;\r\n\t\tline-height: 36rpx;\r\n\t\tborder-radius: 100px;\r\n\t\tmin-width: 36rpx;\r\n\t\tbox-sizing: border-box;\r\n\t\ttext-align: center;\r\n\t\tz-index: 10;\r\n\t}\r\n\r\n\t.fui-badge__dot {\r\n\t\theight: 8px !important;\r\n\t\twidth: 8px !important;\r\n\t\tborder-radius: 100px;\r\n\t\tz-index: 10;\r\n\t}\r\n\r\n\t.fui-badge__bg-primary {\r\n\t\tbackground-color: $fui-color-primary !important;\r\n\t}\r\n\r\n\t.fui-badge__bg-success {\r\n\t\tbackground-color: $fui-color-success !important;\r\n\t}\r\n\r\n\t.fui-badge__bg-warning {\r\n\t\tbackground-color: $fui-color-warning !important;\r\n\t}\r\n\r\n\t.fui-badge__bg-danger {\r\n\t\tbackground-color: $fui-color-danger !important;\r\n\t}\r\n\r\n\t.fui-badge__bg-purple {\r\n\t\tbackground-color: $fui-color-purple !important;\r\n\t}\r\n\r\n\t.fui-badge__bg-white {\r\n\t\tbackground-color: $fui-color-white !important;\r\n\t}\r\n\r\n\t.fui-badge__text-color {\r\n\t\tcolor: $fui-color-danger !important;\r\n\t}\r\n\r\n\t.fui-badge__trans-origin {\r\n\t\ttransform-origin: center center;\r\n\t}\r\n\r\n\t.fui-badge__absolute {\r\n\t\tposition: absolute;\r\n\t}\r\n</style>"],"names":[],"mappings":"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"}