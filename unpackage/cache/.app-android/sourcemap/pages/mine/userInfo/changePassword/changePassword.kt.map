{"version":3,"sources":["pages/mine/userInfo/changePassword/changePassword.uvue","App.uvue","pages/mine/userInfo/changePassword/changePassword.uvue?type=page"],"sourcesContent":["<template>\r\n\t<view class=\"container\">\r\n\t\t<view class=\"content\">\r\n\t\t\t<fui-input label=\"旧密码\" placeholder=\"请输入原密码\" type=\"password\" :modelValue=\"oldPassword\"\r\n\t\t\t\t@input=\"updateOldPassword\"></fui-input>\r\n\t\t\t<fui-input label=\"新密码\" placeholder=\"请输入新密码\" type=\"password\" :modelValue=\"newPassword\"\r\n\t\t\t\t@input=\"updateNewPassword\"></fui-input>\r\n\t\t\t<fui-input label=\"确认新密码\" placeholder=\"再次输入新密码\" type=\"password\" :modelValue=\"confirmPassword\"\r\n\t\t\t\t@input=\"updateConfirmPassword\"></fui-input>\r\n\t\t</view>\r\n\t\t<view v-if=\"errorMsg\">\r\n\t\t\t<text class=\"error-msg\">{{errorMsg}}</text>\r\n\t\t</view>\r\n\t\t<view class=\"tips\">\r\n\t\t\t<text class=\"tips-word\">密码8-16位,需包含英文字母、数字、特殊字符中两类及以上</text>\r\n\t\t</view>\r\n\t\t<view>\r\n\t\t\t<fui-button color=\"#fff\" :disabled=\"btnDisabled\" text=\"提交\" background=\"#1296db\" height=\"80rpx\"\r\n\t\t\t\t@onclick=\"submit\"></fui-button>\r\n\t\t</view>\r\n\t</view>\r\n</template>\r\n\r\n<script setup lang=\"uts\">\r\n\timport { ref } from 'vue'\r\n\r\n\tconst oldPassword = ref<string>('')\r\n\tconst newPassword = ref<string>('')\r\n\tconst confirmPassword = ref<string>('')\r\n\tconst btnDisabled = ref<boolean>(true)\r\n\tconst errorMsg = ref<string>('') // 错误提示信息\r\n\r\n\t// 增强密码规则：必须包含两类及以上字符\r\n\tconst passwordReg = /^(?:(?=.*[a-zA-Z])(?=.*\\d)|(?=.*[a-zA-Z])(?=.*[^a-zA-Z\\d])|(?=.*\\d)(?=.*[^a-zA-Z\\d])).{8,16}$/\r\n\r\n\t// 验证密码格式\r\n\tfunction verPassword(psw : string) : boolean {\r\n\t\treturn passwordReg.test(psw)\r\n\t}\r\n\r\n\t// 更新按钮状态\r\n\tconst updateBtnState = () => {\r\n\t\tconst allFieldsFilled = oldPassword.value.length > 0 &&\r\n\t\t\tnewPassword.value.length > 0 &&\r\n\t\t\tconfirmPassword.value.length > 0\r\n\r\n\t\tconst passwordsMatch = newPassword.value === confirmPassword.value\r\n\t\tconst newPwdValid = verPassword(newPassword.value)\r\n\r\n\t\tbtnDisabled.value = !(allFieldsFilled && newPwdValid && passwordsMatch)\r\n\t}\r\n\r\n\t// 更新旧密码\r\n\tconst updateOldPassword = (e : string) => {\r\n\t\toldPassword.value = e\r\n\t\tupdateBtnState()\r\n\t}\r\n\r\n\t// 更新新密码\r\n\tconst updateNewPassword = (e : string) => {\r\n\t\tnewPassword.value = e\r\n\t\terrorMsg.value = ''\r\n\r\n\t\tif (e.length > 0 && !verPassword(e)) {\r\n\t\t\terrorMsg.value = '密码格式不符合要求'\r\n\t\t} else if (confirmPassword.value.length > 0 && e != confirmPassword.value) {\r\n\t\t\terrorMsg.value = '两次输入的密码不一致'\r\n\t\t}\r\n\r\n\t\tupdateBtnState()\r\n\t}\r\n\r\n\t// 更新确认密码\r\n\tconst updateConfirmPassword = (e : string) => {\r\n\t\tconfirmPassword.value = e\r\n\t\terrorMsg.value = ''\r\n\r\n\t\tif (e.length > 0) {\r\n\t\t\tif (!verPassword(e)) {\r\n\t\t\t\terrorMsg.value = '确认密码格式不符合要求'\r\n\t\t\t} else if (e != newPassword.value) {\r\n\t\t\t\terrorMsg.value = '两次输入的密码不一致'\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tupdateBtnState()\r\n\t}\r\n\r\n\t// 提交表单\r\n\tconst submit = () => {\r\n\t\tif (!verPassword(newPassword.value)) {\r\n\t\t\tuni.showToast({\r\n\t\t\t\ttitle: '密码格式错误',\r\n\t\t\t\ticon: 'none'\r\n\t\t\t})\r\n\t\t\treturn\r\n\t\t}\r\n\t\tif (newPassword.value != confirmPassword.value) {\r\n\t\t\tuni.showToast({\r\n\t\t\t\ttitle: '两次密码不一致',\r\n\t\t\t\ticon: 'none'\r\n\t\t\t})\r\n\t\t\treturn\r\n\t\t}\r\n\t\tuni.showToast({\r\n\t\t\ttitle: '提交成功',\r\n\t\t\ticon: 'none'\r\n\t\t})\r\n\t}\r\n</script>\r\n\r\n<style lang=\"scss\">\r\n\t.container {\r\n\t\theight: 100%;\r\n\t\tbackground-color: #f5f5f5;\r\n\t\tpadding: 50rpx 20rpx;\r\n\r\n\t\t.fui-input__label-size {\r\n\t\t\tfont-size: 26rpx !important;\r\n\t\t}\r\n\r\n\t\t.content {\r\n\t\t\tbackground-color: #fff;\r\n\t\t\tborder-radius: 20rpx;\r\n\t\t\tpadding: 20rpx;\r\n\t\t}\r\n\r\n\t\t.tips {\r\n\t\t\tmargin: 40rpx 0;\r\n\r\n\t\t\t.tips-word {\r\n\t\t\t\tfont-size: 30rpx;\r\n\t\t\t\tcolor: #999;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t.error-msg {\r\n\t\t\tmargin-top: 10rpx;\r\n\t\t\tcolor: #e64340;\r\n\t\t\tfont-size: 24rpx;\r\n\t\t}\r\n\t}\r\n</style>",null,null],"names":[],"mappings":";;;;;;;;;;;;;;;;;+BAgCC;;;;;;;;;YANA,IAAM,cAAc,IAAI,MAAM,EAAE;YAChC,IAAM,cAAc,IAAI,MAAM,EAAE;YAChC,IAAM,kBAAkB,IAAI,MAAM,EAAE;YACpC,IAAM,cAAc,IAAI,OAAO,EAAE,IAAI;YACrC,IAAM,WAAW,IAAI,MAAM,EAAE;YAG7B,IAAM,cAAc;YAGpB,IAAS,mBAAY,KAAM,MAAM,GAAI,OAAO,CAAA;gBAC3C,OAAO,YAAY,IAAI,CAAC;YACzB;gBAFS;YAKT,IAAM,iBAAiB,KAAK;gBAC3B,IAAM,kBAAkB,YAAY,KAAK,CAAC,MAAM,GAAG,CAAC,IACnD,YAAY,KAAK,CAAC,MAAM,GAAG,CAAC,IAC5B,gBAAgB,KAAK,CAAC,MAAM,GAAG,CAAC;gBAEjC,IAAM,iBAAiB,YAAY,KAAK,KAAK,gBAAgB,KAAK;gBAClE,IAAM,cAAc,YAAY,YAAY,KAAK;gBAEjD,YAAY,KAAK,GAAG,CAAC,CAAC,mBAAmB,eAAe,cAAc;YACvE;YAGA,IAAM,oBAAoB,IAAC,GAAI,MAAM,CAAI;gBACxC,YAAY,KAAK,GAAG;gBACpB;YACD;YAGA,IAAM,oBAAoB,IAAC,GAAI,MAAM,CAAI;gBACxC,YAAY,KAAK,GAAG;gBACpB,SAAS,KAAK,GAAG;gBAEjB,IAAI,EAAE,MAAM,GAAG,CAAC,IAAI,CAAC,YAAY,IAAI;oBACpC,SAAS,KAAK,GAAG;uBACX,IAAI,gBAAgB,KAAK,CAAC,MAAM,GAAG,CAAC,IAAI,KAAK,gBAAgB,KAAK,EAAE;oBAC1E,SAAS,KAAK,GAAG;;gBAGlB;YACD;YAGA,IAAM,wBAAwB,IAAC,GAAI,MAAM,CAAI;gBAC5C,gBAAgB,KAAK,GAAG;gBACxB,SAAS,KAAK,GAAG;gBAEjB,IAAI,EAAE,MAAM,GAAG,CAAC,EAAE;oBACjB,IAAI,CAAC,YAAY,IAAI;wBACpB,SAAS,KAAK,GAAG;2BACX,IAAI,KAAK,YAAY,KAAK,EAAE;wBAClC,SAAS,KAAK,GAAG;;;gBAInB;YACD;YAGA,IAAM,SAAS,KAAK;gBACnB,IAAI,CAAC,YAAY,YAAY,KAAK,GAAG;oBACpC,+BACC,QAAO,UACP,OAAM;oBAEP;;gBAED,IAAI,YAAY,KAAK,IAAI,gBAAgB,KAAK,EAAE;oBAC/C,+BACC,QAAO,WACP,OAAM;oBAEP;;gBAED,+BACC,QAAO,QACP,OAAM;YAER;;;;uBA1GC,mBAOO,QAAA,SAPI,WAAC,cAAS;uCAEoB,QAAA,SAAA,WAAA,YAAA;oCADvB,sBAAK,SAAC,WAAA,OAAqB,iBAAK,UAAY,UAAA,YAC3D,gBAAO,YAAA,KAAiB,mCAC1B,IAAA,EAAA,CAAA,EACwC;4BAAA;yBAAA;oCADvB,sBAAK,SAAC,WAAA,OAAqB,iBAAK,UAAY,UAAA,YAC3D,gBAAO,YAAA,KAAiB,mCAC1B,IAAA,EAAA,CAAA,EAC4C;4BAAA;yBAAA;oCAD3B,sBAAO,SAAC,WAAA,SAAsB,iBAAK,WAAY,UAAA,YAC9D,gBAAO,gBAAA,KAAqB;;;;+BAE/B,SAAA,KAAA;2CACC,QAA2C,SAAA,SAArC,CAAA,GAAM;;;;wBAEb,mBAEO,QAAA,IAAA;;oBAAA;uCADN,QAA4D,SAAA,WAAjD,SAAC;;qBAEb;uCAEiC,QAAA,IAAA,EAAA;oCADd,uBAAM,SAAE,WAAA,QAAuB,cAAS,YAAA,KAAA,EAAC,UAAA,MAAqB,gBAAO,WACrF,YAAA"}