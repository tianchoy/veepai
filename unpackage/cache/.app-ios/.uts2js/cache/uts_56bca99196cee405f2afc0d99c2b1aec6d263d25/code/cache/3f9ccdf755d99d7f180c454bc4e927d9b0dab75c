{"code":"import { defineComponent as _defineComponent } from 'vue';\nimport { ref } from 'vue';\nimport {} from '@/uni_modules/lime-picker';\nclass AuthType extends UTS.UTSType {\n    static get$UTSMetadata$() {\n        return {\n            kind: 2,\n            get fields() {\n                return {\n                    code: { type: String, optional: false },\n                    state: { type: String, optional: false }\n                };\n            },\n            name: \"AuthType\"\n        };\n    }\n    constructor(options, metadata = AuthType.get$UTSMetadata$(), isJSONParse = false) {\n        super();\n        this.__props__ = UTS.UTSType.initProps(options, metadata, isJSONParse);\n        this.code = this.__props__.code;\n        this.state = this.__props__.state;\n        delete this.__props__;\n    }\n}\nclass PermissionItem extends UTS.UTSType {\n    static get$UTSMetadata$() {\n        return {\n            kind: 2,\n            get fields() {\n                return {\n                    name: { type: String, optional: false },\n                    code: { type: String, optional: false },\n                    status: { type: String, optional: false }\n                };\n            },\n            name: \"PermissionItem\"\n        };\n    }\n    constructor(options, metadata = PermissionItem.get$UTSMetadata$(), isJSONParse = false) {\n        super();\n        this.__props__ = UTS.UTSType.initProps(options, metadata, isJSONParse);\n        this.name = this.__props__.name;\n        this.code = this.__props__.code;\n        this.status = this.__props__.status;\n        delete this.__props__;\n    }\n}\n// 权限列表数据\nexport default /*#__PURE__*/ _defineComponent(new UTSJSONObject({\n    __name: 'systemSetting',\n    setup(__props, _a) {\n        var __expose = _a.expose;\n        __expose();\n        const checked = ref(true);\n        const showPicker = ref(false);\n        const pickerOptions = ref([]);\n        const playTypeItem = ref('WIFI下自动播放');\n        const systemNotifyState = ref('');\n        //授权类型\n        const AuthState = ref([\n            new AuthType({\n                code: 'authorized',\n                state: '已授权',\n            }),\n            new AuthType({\n                code: 'not determined',\n                state: '未授权',\n            }),\n            new AuthType({\n                code: 'denied',\n                state: '未授权',\n            }),\n        ]);\n        // 权限项类型\n        const permissionList = ref([\n            new PermissionItem({ name: '位置信息', code: 'locationAuthorized', status: 'notDetermined' }),\n            new PermissionItem({ name: '相册', code: 'albumAuthorized', status: 'notDetermined' }),\n            new PermissionItem({ name: '麦克风', code: 'microphoneAuthorized', status: 'notDetermined' }),\n            new PermissionItem({ name: '蓝牙', code: 'bluetoothAuthorized', status: 'notDetermined' }),\n            new PermissionItem({ name: '系统通知', code: 'notificationAuthorized', status: 'notDetermined' }),\n            new PermissionItem({ name: '相机', code: 'cameraAuthorized', status: 'notDetermined' }),\n        ]);\n        const getSystemAuth = (item) => {\n            const res = uni.getAppAuthorizeSetting();\n            const code = item.code;\n            if (code == 'bluetoothAuthorized') {\n                const resu = uni.getSystemSetting();\n                uni.__log__('log', 'at pages/mine/systemSetting/systemSetting.uvue:91', resu);\n                if (resu.bluetoothEnabled == false) {\n                    uni.showToast({\n                        title: '请先手动打开蓝牙',\n                    });\n                }\n                else {\n                    permissionList.value.map(item => {\n                        if (item.code == 'bluetoothAuthorized') {\n                            item.status = '已授权';\n                        }\n                    });\n                }\n            }\n            else {\n                const status = res[code];\n                if (status == 'denied' || status == \"not determined\") {\n                    uni.openAppAuthorizeSetting(new UTSJSONObject({\n                        success: (res) => {\n                            uni.__log__('log', 'at pages/mine/systemSetting/systemSetting.uvue:108', res);\n                            // item.status = '已授权' \n                        }\n                    }));\n                }\n            }\n        };\n        const changeChecked = () => {\n            uni.__log__('log', 'at pages/mine/systemSetting/systemSetting.uvue:119', checked.value);\n        };\n        const isChecked = () => {\n            checked.value = !checked.value;\n        };\n        const getSystemNotify = () => {\n            const res = uni.getAppAuthorizeSetting();\n            uni.__log__('log', 'at pages/mine/systemSetting/systemSetting.uvue:128', res.notificationAuthorized);\n            if (res.notificationAuthorized == 'denied' || res.notificationAuthorized == \"not determined\") {\n                uni.showToast({\n                    title: '请先授权通知权限',\n                });\n                uni.openAppAuthorizeSetting(new UTSJSONObject({\n                    success: (res) => {\n                        uni.__log__('log', 'at pages/mine/systemSetting/systemSetting.uvue:135', res);\n                        systemNotifyState.value = '已授权';\n                    }\n                }));\n            }\n        };\n        const playType = () => {\n            pickerOptions.value = [\n                [\n                    {\n                        label: 'WIFI下自动播放',\n                        value: 'WIFI下自动播放',\n                    },\n                    {\n                        label: '总是播放',\n                        value: '总是播放',\n                    },\n                    {\n                        label: '不播放',\n                        value: '不播放',\n                    }\n                ]\n            ];\n            showPicker.value = true;\n        };\n        const onConfirm = (context) => {\n            showPicker.value = false;\n            playTypeItem.value = context.values[0].toString();\n        };\n        const oncancel = () => {\n            showPicker.value = false;\n        };\n        onPageShow(() => {\n            const res = uni.getAppAuthorizeSetting();\n            const resu = uni.getSystemSetting();\n            permissionList.value = permissionList.value.map(item => {\n                const newItem = new PermissionItem(Object.assign({}, item));\n                if (item.code == 'bluetoothAuthorized' && resu.bluetoothEnabled == true) {\n                    newItem.status = '已授权';\n                }\n                else {\n                    AuthState.value.forEach((auth) => {\n                        if (auth.code === res[item.code]) {\n                            newItem.status = auth.state;\n                        }\n                    });\n                }\n                return newItem;\n            });\n        });\n        // onLoad(()=>{\n        // \tconst res = uni.getAppAuthorizeSetting();\n        // \tuni.__log__('log','at pages/mine/systemSetting/systemSetting.uvue:193',res)\n        // })\n        const __returned__ = { checked, showPicker, pickerOptions, playTypeItem, systemNotifyState, AuthState, permissionList, getSystemAuth, changeChecked, isChecked, getSystemNotify, playType, onConfirm, oncancel };\n        Object.defineProperty(__returned__, '__isScriptSetup', { enumerable: false, value: true });\n        return __returned__;\n    }\n}));\n//# sourceMappingURL=/Users/xyhc/Documents/veepai_uniappx/pages/mine/systemSetting/systemSetting.uvue?vue&type=script&setup=true&lang.uts.js.map","references":["/Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli-vite/node_modules/@vue/runtime-core/dist/runtime-core.d.ts","/Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli-vite/node_modules/@vue/runtime-core/dist/runtime-core.d.ts","/Users/xyhc/Documents/veepai_uniappx/uni_modules/lime-picker/index.uts"],"uniExtApis":["uni.getAppAuthorizeSetting","uni.getSystemSetting","uni.__log__","uni.showToast","uni.openAppAuthorizeSetting"],"map":"{\"version\":3,\"file\":\"systemSetting.uvue?vue&type=script&setup=true&lang.uts.js\",\"sourceRoot\":\"\",\"sources\":[\"systemSetting.uvue?vue&type=script&setup=true&lang.uts\"],\"names\":[],\"mappings\":\"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\"}"}
