{"code":"import { __awaiter } from \"tslib\";\nimport { useModel as _useModel, mergeModels as _mergeModels, defineComponent as _defineComponent } from 'vue';\nimport { unitConvert } from '@/uni_modules/lime-shared/unitConvert';\nimport {} from './types';\nimport { addUnit } from '@/uni_modules/lime-shared/addUnit';\nexport default /*#__PURE__*/ _defineComponent({\n    __name: 'l-progress',\n    props: /*#__PURE__*/ _mergeModels(new UTSJSONObject({\n        showInfo: { type: Boolean, required: true, default: false },\n        infoType: { type: String, required: true, default: 'outer' },\n        infoAlign: { type: String, required: true, default: 'end' },\n        strokeColor: { type: String, required: false },\n        trailColor: { type: String, required: false },\n        linecap: { type: String, required: false },\n        infoColor: { type: String, required: false },\n        fontSize: { type: [String, Number], required: false },\n        strokeWidth: { type: [String, Number], required: false }\n    }), new UTSJSONObject({\n        \"percent\": { type: Number, default: 0 },\n        \"percentModifiers\": {},\n    })),\n    emits: [\"update:percent\"],\n    setup(__props, _a) {\n        var __expose = _a.expose;\n        __expose();\n        /**\n         * Progress 进度条组件\n         * @description 用于展示操作或任务的进度，支持线性进度显示和多种样式配置\n         * <br>插件类型：LProgressComponentPublicInstance\n         * @tutorial https://ext.dcloud.net.cn/plugin?name=lime-progress\n         *\n         * @property {boolean} showInfo 是否显示进度文本（默认：false）\n         * @property {string} infoType 进度信息显示方式\n         * @value outer 在进度条外部显示\n         * @property {string} infoAlign 文本对齐方式（默认：end）\n         * @value start\n         * @value end\n         * @property {string | string[]} strokeColor 进度条颜色（支持渐变色数组）\n         * @property {string} trailColor 轨道背景色（默认：rgba(0, 0, 0, 0.06)）\n         * @property {string} linecap 进度条端点形状（'round' | 'square'）\n         * @value round\n         * @value square\n         * @property {string} infoColor 进度文本颜色\n         * @property {string | number} fontSize 文本字号（支持CSS单位）\n         * @property {string | number} strokeWidth 进度条粗细（支持CSS单位，默认：4px）\n         */\n        const props = __props;\n        const percent = _useModel(__props, 'percent');\n        const classes = computed(() => {\n            const _class = new Map();\n            if (props.infoType == 'outer') {\n                _class.set('l-progress--outer', true);\n            }\n            if (props.infoType == 'inner') {\n                _class.set('l-progress--inner', true);\n            }\n            return _class;\n        });\n        const textRef = ref(null);\n        const progressBgRef = ref(null);\n        const styles = computed(() => {\n            var _a;\n            const _style = new Map();\n            if (props.strokeColor != null) {\n                _style.set('background', props.strokeColor);\n            }\n            if (props.strokeWidth != null) {\n                _style.set('height', addUnit(props.strokeWidth));\n            }\n            if (props.infoType == 'inner') {\n                if (props.infoAlign == 'end') {\n                    _style.set('align-items', `flex-end`);\n                }\n                else {\n                    _style.set('align-items', `flex-start`);\n                }\n                // const width = props.showInfo ? Math.max(percent.value, textRef.value?.offsetWidth ?? 10) : percent.value\n                // _style.set('width', `${ width }%`)\n                if (props.strokeWidth != null) {\n                    _style.set('height', addUnit((_a = props.strokeWidth) !== null && _a !== void 0 ? _a : 20));\n                }\n            }\n            return _style;\n        });\n        const textStyle = computed(() => {\n            const _style = new Map();\n            if (props.infoColor != null) {\n                _style.set('color', props.infoColor);\n            }\n            if (props.showInfo && props.infoType == 'outer') {\n                _style.set(props.infoAlign == 'end' ? 'margin-left' : 'margin-right', '5px');\n            }\n            return _style;\n        });\n        const innerStyle = computed(() => {\n            const _style = new Map();\n            if (props.trailColor != null) {\n                _style.set('background', props.trailColor);\n            }\n            return _style;\n        });\n        const progressInnerRef = ref(null);\n        watchEffect(() => { return __awaiter(this, void 0, void 0, function* () {\n            var _a, _b, _c, _d, _e;\n            if (percent.value >= 0) {\n                if (props.infoType == 'inner') {\n                    const rect = yield ((_a = progressInnerRef.value) === null || _a === void 0 ? null : _a.getBoundingClientRectAsync());\n                    const textRect = yield ((_b = textRef.value) === null || _b === void 0 ? null : _b.getBoundingClientRectAsync());\n                    const width = props.showInfo ? Math.max(percent.value, (_c = Math.max((rect === null || rect === void 0 ? null : rect.height) / (rect === null || rect === void 0 ? null : rect.width), ((textRect === null || textRect === void 0 ? null : textRect.width) / (rect === null || rect === void 0 ? null : rect.width))) * 100) !== null && _c !== void 0 ? _c : 10) : percent.value;\n                    (_d = progressBgRef.value) === null || _d === void 0 ? null : _d.style.setProperty('width', `${width}%`);\n                }\n                else {\n                    (_e = progressBgRef.value) === null || _e === void 0 ? null : _e.style.setProperty('width', `${percent.value}%`);\n                }\n            }\n        }); });\n        const __returned__ = { props, percent, classes, textRef, progressBgRef, styles, textStyle, innerStyle, progressInnerRef };\n        Object.defineProperty(__returned__, '__isScriptSetup', { enumerable: false, value: true });\n        return __returned__;\n    }\n});\n//# sourceMappingURL=/Users/xyhc/Documents/veepai_uniappx/uni_modules/lime-progress/components/l-progress/l-progress.uvue?vue&type=script&setup=true&lang.uts.js.map","references":["/Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli-vite/node_modules/@vue/runtime-core/dist/runtime-core.d.ts","/Users/xyhc/Documents/veepai_uniappx/uni_modules/lime-shared/unitConvert/index.ts","/Users/xyhc/Documents/veepai_uniappx/uni_modules/lime-progress/components/l-progress/types.ts","/Users/xyhc/Documents/veepai_uniappx/uni_modules/lime-shared/addUnit/index.ts"],"uniExtApis":[],"map":"{\"version\":3,\"file\":\"l-progress.uvue?vue&type=script&setup=true&lang.uts.js\",\"sourceRoot\":\"\",\"sources\":[\"l-progress.uvue?vue&type=script&setup=true&lang.uts\"],\"names\":[],\"mappings\":\"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\"}"}
