{"version":3,"sources":["uni_modules/uni-wifi/utssdk/app-android/index.uts","uni_modules/uni-wifi/utssdk/interface.uts","uni_modules/uni-wifi/utssdk/unierror.uts"],"sourcesContent":["import Context from \"android.content.Context\";\nimport WifiManager from \"android.net.wifi.WifiManager\";\nimport WifiInfo from \"android.net.wifi.WifiInfo\";\nimport Manifest from \"android.Manifest\";\nimport PackageManager from \"android.content.pm.PackageManager\";\nimport ScanResult from \"android.net.wifi.ScanResult\";\nimport BroadcastReceiver from \"android.content.BroadcastReceiver\";\nimport ActivityCompat from \"androidx.core.app.ActivityCompat\";\nimport IntentFilter from \"android.content.IntentFilter\";\nimport Intent from \"android.content.Intent\";\n\nimport WifiConfiguration from 'android.net.wifi.WifiConfiguration';\nimport AuthAlgorithm from 'android.net.wifi.WifiConfiguration.AuthAlgorithm';\nimport KeyMgmt from 'android.net.wifi.WifiConfiguration.KeyMgmt';\nimport TextUtils from 'android.text.TextUtils';\nimport Build from 'android.os.Build';\n\nimport { UniWifiResult, UniWifiInfoWithPartialInfo,GetConnectedWifiOptions, WifiConnectOption, WifiOption, UniWifiInfo,UniWifiCallback ,UniWifiResultCallback,UniWifiResultCallbackWithPartialInfo,UniGetWifiListCallback} from \"../interface.uts\"\nimport { WifiFailImpl, getErrcode,UniErrorSubject } from '../unierror';\n\n\n/**\n\t* 全局数据储存\n\t*/\nclass Global {\n\tstatic mReceiver : CustomBroadcastReceiver | null = null;\n\tstatic WIFI_AUTH_OPEN : string = \"\";\n\tstatic WIFI_AUTH_ROAM : String = \"[ESS]\";\n\t// 扫描wifi结果\n\tstatic scanList : AndroidUniWifiInfo[] = []\n\t// 获取wifi列表监听\n\tstatic onGetWifiListCallback : UniGetWifiListCallback|null = null\n\tstatic supendGetWifiSuccess : UniWifiResultCallback|null = null\n\tstatic supendGetWifiComplete :UniWifiResultCallback|null = null\n\t// wifi链接监听\n\tstatic onWifiConnectCallbackList : UniWifiResultCallback[] = []\n\tstatic onWifiConnectWithPartialInfoCallbackList : UniWifiResultCallbackWithPartialInfo[] = []\n}\n\n\n/**\n\t* 是否是标准的16进制字符\n\t*/\nfunction isHex(key : string) : boolean {\n\tfor (var i = key.length - 1; i >= 0; i--) {\n\t\tlet c = key.charAt(i);\n\t\tif (!(c >= '0' && c <= '9' || c >= 'A' && c <= 'F' || c >= 'a'\n\t\t\t&& c <= 'f')) {\n\t\t\treturn false;\n\t\t}\n\t}\n\n\treturn true;\n}\n\n/**\n\t* 判断是否是wep格式的key\n\t*/\nfunction isHexWepKey(wepKey : string) : boolean {\n\tlet len = wepKey.length;\n\n\t// WEP-40, WEP-104, and some vendors using 256-bit WEP (WEP-232?)\n\tif (len != 10 && len != 26 && len != 58) {\n\t\treturn false;\n\t}\n\n\treturn isHex(wepKey);\n}\n/**\n * android 平台特有的Wifi信息对象，主要是加了加密信息这个字段\n */\nexport type AndroidUniWifiInfo = {\n\tSSID : string;\n\tBSSID ?: string;\n\tsecure : boolean;\n\tsignalStrength : number;\n\tfrequency : number;\n\tsecurityType : string;\n}\n\nfunction wrapUniWifiInfoFromAndroid(androidInfo : AndroidUniWifiInfo) : UniWifiInfo {\n\tlet ret : UniWifiInfo = {\n\t\tSSID: androidInfo.SSID,\n\t\tBSSID: androidInfo.BSSID,\n\t\tsecure: androidInfo.secure,\n\t\tsignalStrength: androidInfo.signalStrength,\n\t\tfrequency: androidInfo.frequency,\n\t}\n\treturn ret\n}\n/**\n * 从扫描结果中提取统一的wifi数据结构\n */\nfunction wrapUniWifiInfoFromScan(scanResult : ScanResult) : AndroidUniWifiInfo {\n\n\tlet ret : AndroidUniWifiInfo = {\n\t\tSSID: \"\",\n\t\tsecure: false,\n\t\tsignalStrength: 0,\n\t\tfrequency: 0,\n\t\tsecurityType: \"NONE\"\n\t}\n\tif (scanResult != null) {\n\t\t// 如果是通过扫描列表得到的数据，进行封装\n\t\tret.BSSID = scanResult.BSSID;\n\t\tret.SSID = scanResult.SSID;\n\n\t\tret.signalStrength = scanResult.level;\n\t\tret.frequency = scanResult.frequency;\n\n\t\t// 是否安全，微信的标准是是否需要密码。 来源:https://developers.weixin.qq.com/community/develop/doc/00064cf1790458db19cddf9925ac00?highLine=WifiInfo\n\t\tret.secure = false;\n\t\tlet capabilities = scanResult.capabilities.trim();\n\t\tif ((capabilities.equals(Global.WIFI_AUTH_OPEN) || capabilities.equals(Global.WIFI_AUTH_ROAM))) {\n\t\t\tret.secure = false;\n\t\t} else {\n\t\t\tret.secure = true;\n\t\t}\n\n\t\t/*扩展字段*/\n\t\tret.securityType = getSecurityType(scanResult);\n\t}\n\n\treturn ret\n}\n/**\n * 从链接信息中提取统一的wifi数据结构\n */\nfunction wrapUniWifiInfoFromConnectInfo(connectInfo : WifiInfo) : UniWifiInfo {\n\tlet ret : UniWifiInfo = {\n\t\tSSID: \"\",\n\t\tsecure: false,\n\t\tsignalStrength: 0,\n\t\tfrequency: 0,\n\t}\n\n\n\tif (connectInfo.getSSID() != null) {\n\t\tlet s = connectInfo.getSSID();\n\t\t// 微信不带，这里需要去掉引号\n\t\tif (s.length > 2 && s.charAt(0) == '\"' && s.charAt(s.length - 1) == '\"') {\n\t\t\ts = s.substring(1, s.length - 1);\n\t\t}\n\t\tret.SSID = s;\n\t}\n\n\tret.BSSID = connectInfo.getBSSID();\n\t//Android返回的值是-100~0，而微信API规范是0~100，值越大信号越好，需要+100拉齐\n\tret.signalStrength = connectInfo.getRssi() + 100;\n\tret.frequency = connectInfo.getFrequency();\n\n\n\treturn ret\n}\n\n\n/**\n * 连接wifi时使用，根据用户输入内容包装为系统需要的wifi配置对象\n **/\n@Suppress(\"DEPRECATION\")\nfunction wrapWifiConfiguration(SSID : string, password ?: string, passwordType : string) : WifiConfiguration {\n\n\tlet config = new WifiConfiguration();\n\tconfig.status = WifiConfiguration.Status.ENABLED;\n\tconfig.allowedAuthAlgorithms.clear();\n\tconfig.allowedGroupCiphers.clear();\n\tconfig.allowedKeyManagement.clear();\n\tconfig.allowedPairwiseCiphers.clear();\n\tconfig.allowedProtocols.clear();\n\tconfig.SSID = \"\\\"\".concat(SSID).concat(\"\\\"\");\n\n\n\t// nopass\n\tif (\"NONE\".equals(passwordType) || password == null) {\n\t\tconfig.allowedKeyManagement.set(WifiConfiguration.KeyMgmt.NONE);\n\t}\n\t// wep\n\telse if (\"WEP\".equals(passwordType)) {\n\t\tif (password != null && !TextUtils.isEmpty(password)) {\n\t\t\tif (isHexWepKey(password)) {\n\t\t\t\tconfig.wepKeys[0] = password;\n\t\t\t} else {\n\t\t\t\tconfig.wepKeys[0] = \"\\\"\".concat(password).concat(\"\\\"\");\n\t\t\t}\n\t\t}\n\t\tconfig.allowedAuthAlgorithms.set(AuthAlgorithm.OPEN);\n\t\tconfig.allowedAuthAlgorithms.set(AuthAlgorithm.SHARED);\n\t\tconfig.allowedKeyManagement.set(KeyMgmt.NONE);\n\t\tconfig.wepTxKeyIndex = 0;\n\t}\n\t// wpa\n\telse if (\"WPA\".equals(passwordType)) {\n\t\tconfig.allowedProtocols.set(WifiConfiguration.Protocol.RSN);\n\t\tconfig.allowedProtocols.set(WifiConfiguration.Protocol.WPA);\n\t\tconfig.allowedKeyManagement.set(WifiConfiguration.KeyMgmt.WPA_PSK);\n\t\tconfig.allowedPairwiseCiphers.set(WifiConfiguration.PairwiseCipher.CCMP);\n\t\tconfig.allowedPairwiseCiphers.set(WifiConfiguration.PairwiseCipher.TKIP);\n\t\tconfig.allowedGroupCiphers.set(WifiConfiguration.GroupCipher.WEP40);\n\t\tconfig.allowedGroupCiphers.set(WifiConfiguration.GroupCipher.WEP104);\n\t\tconfig.allowedGroupCiphers.set(WifiConfiguration.GroupCipher.CCMP);\n\t\tconfig.allowedGroupCiphers.set(WifiConfiguration.GroupCipher.TKIP);\n\t\tconfig.preSharedKey = \"\\\"\".concat(password).concat(\"\\\"\");\n\t}\n\n\treturn config;\n}\n\n\n/**\n * 判断当前wifi的加密类型\n */\nfunction getSecurityType(result : ScanResult) : string {\n\tif (result.capabilities.contains(\"WEP\")) {\n\t\treturn \"WEP\";\n\t} else if (result.capabilities.contains(\"PSK\")) {\n\t\treturn \"WPA\";\n\t} else if (result.capabilities.contains(\"EAP\")) {\n\t\treturn \"EAP\";\n\t}\n\treturn \"NONE\";\n}\n\n\nfunction zeroCountNum(source ?: string) : number {\n\tif (source == null) {\n\t\treturn 0\n\t}\n\tvar splitted = source.split(\":\")\n\tvar countNum = 0;\n\tfor (perItem in splitted) {\n\t\tif (perItem == \"00\") {\n\t\t\tcountNum += 1\n\t\t}\n\t}\n\treturn countNum\n}\n\n\n/**\n\t* 自定义wifi变化广播监听器\n\t*/\n@Suppress(\"UNUSED_PARAMETER\", \"DEPRECATION\")\nclass CustomBroadcastReceiver extends BroadcastReceiver {\n\n\tmWifiManager : WifiManager | null = null;\n\n\tconstructor(wifiManager : WifiManager) {\n\t\tsuper();\n\t\tthis.mWifiManager = wifiManager;\n\t}\n\n\toverride onReceive(_context : Context, intent : Intent) : void {\n\n\n\t\tif (intent.action == WifiManager.WIFI_STATE_CHANGED_ACTION) {\n\n\t\t\tlet state =\n\t\t\t\tintent.getIntExtra(WifiManager.EXTRA_WIFI_STATE, WifiManager.WIFI_STATE_UNKNOWN)\n\n\t\t\tif (state == WifiManager.WIFI_STATE_ENABLED) {\n\t\t\t\t// 获取当前的connectInfo 并且进行数据封装\n\t\t\t\tlet uniWifiInfo = new UniWifiInfo(\"\",\"\",false,0,0)\n\t\t\t\t//做一些异步操作\n\t\t\t\tsetTimeout(function () {\n\t\t\t\t\t// BroadcastReceiver 中不能执行耗时任务，需要使用setTimeout\n\t\t\t\t\t// @ts-ignore\n\t\t\t\t\tlet winfo = this.mWifiManager!.getConnectionInfo();\n\n          if(winfo != null && winfo.bssid != null && zeroCountNum(winfo.bssid) < 3){\n              //  当前设备链接到了某个具体的wifi.封装成数据对象\n              uniWifiInfo = wrapUniWifiInfoFromConnectInfo(winfo)\n              let res = new UniWifiResult(0,UniErrorSubject,'onWifiConnected:ok',uniWifiInfo)\n\n              // wifi状态可用了，分发当前的链接状态给已注册的监听集合\n              for (let perCallback in Global.onWifiConnectCallbackList) {\n                perCallback(res);\n              }\n              // 封装仅SSID 数据对象\n              let connectedWithPartialInfo = new UniWifiInfoWithPartialInfo(uniWifiInfo.SSID)\n\n              for (let perCallback in Global.onWifiConnectWithPartialInfoCallbackList) {\n                perCallback(connectedWithPartialInfo);\n              }\n          } else {\n            // 开启了wifi 开关，但是尚未链接到某个具体的wifi\n          }\n\n\t\t\t\t}, 100);\n\t\t\t}\n\n\t\t}\n\n\n\t\tif (intent.action == WifiManager.SCAN_RESULTS_AVAILABLE_ACTION) {\n\t\t\tstartWifiScaning = false;\n\t\t\t// wifi 扫描结果回调\n\t\t\tlet results = this.mWifiManager!.scanResults;\n\n\t\t\tif (results != null) {\n\t\t\t\tGlobal.scanList = []\n\t\t\t\tfor (let scanResult in results) {\n\t\t\t\t\tif (scanResult.SSID == null) {\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\t\t\t\t\tGlobal.scanList.push(wrapUniWifiInfoFromScan(scanResult));\n\t\t\t\t}\n\n\t\t\t\t// 挨个通知，所有的监听器\n\t\t\t\tif(Global.onGetWifiListCallback != null){\n\t\t\t\t\tconst data = new UTSJSONObject();\n\t\t\t\t\tdata[\"wifiList\"] = Global.scanList\n\t\t\t\t\tGlobal.onGetWifiListCallback?.(data);\n\t\t\t\t\t/**\n\t\t\t\t\t * 确保onGetWifiList 只会被执行一次\n\t\t\t\t\t */\n\t\t\t\t\tGlobal.onGetWifiListCallback = null\n\t\t\t\t}\n\n\t\t\t}\n\n      let ret = new UniWifiResult(0,UniErrorSubject,\"getWifiList:ok\",null)\n\t\t\tif(Global.supendGetWifiSuccess != null){\n\t\t\t\tGlobal.supendGetWifiSuccess?.(ret)\n\t\t\t\tGlobal.supendGetWifiSuccess = null\n\t\t\t}\n\t\t\tif(Global.supendGetWifiComplete != null){\n\t\t\t\tGlobal.supendGetWifiComplete?.(ret)\n\t\t\t\tGlobal.supendGetWifiComplete = null\n\t\t\t}\n\t\t}\n\t}\n\n}\n\n\n\n/************************* 下面是对外提供的函数 *************************/\n/**\n * start wifi是否正在扫描\n */\nvar startWifiScaning = false\n\n/**\n * 开启wifi\n */\n@Suppress(\"DEPRECATION\")\nexport function startWifiImpl(option : WifiOption) {\n\n\n  // 具备了权限，继续前进\n  let wifiManager : WifiManager =\n  \tUTSAndroid.getAppContext()!.getSystemService(Context.WIFI_SERVICE) as WifiManager\n  // 用户没有开启wifi 总开关\n  if (!wifiManager.isWifiEnabled()) {\n  \t// wifi 没开启\n    let failResult = new WifiFailImpl(getErrcode(12005));\n  \toption.fail?.(failResult);\n  \toption.complete?.(failResult);\n  \treturn;\n  }\n  // 初始化wifi 状态广播监听，后续所有的api，均基于此\n  if(Global.mReceiver != null){\n  \t// 说明已经注册过了\n    let result = UniWifiResult(0,UniErrorSubject,\"startWifi:ok\",null)\n\n  \toption.success?.(result)\n  \toption.complete?.(result)\n  \treturn\n  }\n\n\n  Global.mReceiver = new CustomBroadcastReceiver(wifiManager)\n\n  let filter = new IntentFilter()\n  filter.addAction(WifiManager.SCAN_RESULTS_AVAILABLE_ACTION)\n  // @ts-ignore\n  filter.addAction(WifiManager.WIFI_STATE_CHANGED_ACTION)\n  // @ts-ignore\n  filter.addAction(WifiManager.SUPPLICANT_STATE_CHANGED_ACTION);\n\n  UTSAndroid.getUniActivity()!.registerReceiver(Global.mReceiver, filter)\n\n  /**\n  \t* activity 被销毁时，取消注册\n  \t*/\n  UTSAndroid.onAppActivityDestroy(function () {\n\n  \tif (Global.mReceiver != null) {\n  \t\tUTSAndroid.getUniActivity()!.unregisterReceiver(Global.mReceiver)\n  \t\tGlobal.mReceiver = null\n\n  \t\tGlobal.scanList = []\n  \t\tGlobal.onGetWifiListCallback = null\n  \t\tGlobal.onWifiConnectCallbackList = []\n  \t\tGlobal.onWifiConnectWithPartialInfoCallbackList = []\n  \t}\n\n  });\n  startWifiScaning = true\n  // 开始扫描\n  wifiManager.startScan()\n\n  let result = UniWifiResult(0,UniErrorSubject,\"startWifi:ok\",null)\n  option.success?.(result)\n  option.complete?.(result)\n\n}\n\n@Suppress(\"DEPRECATION\")\nexport function startWifi(option : WifiOption) {\n\n  /**\n   * 准备权限\n   */\n  let permissionNeed = [\"android.permission.ACCESS_FINE_LOCATION\"];\n  UTSAndroid.requestSystemPermission(UTSAndroid.getUniActivity()!, permissionNeed, function (allRight:boolean,_grantedList:string[]) {\n  \tif (allRight) {\n  \t\t// 交给目前的location 引擎，真实执行\n  \t\tstartWifiImpl(option)\n  \t}\n  }, function (_doNotAskAgain:boolean,_grantedList:string[]) {\n  \tlet err = new WifiFailImpl(getErrcode(12001));\n  \toption.fail?.(err)\n  \toption.complete?.(err)\n  })\n\n}\n\n/**\n\t* 获取wifi列表\n\t*/\n@Suppress(\"DEPRECATION\")\nexport function getWifiList(option : WifiOption) {\n\n\n\tif (Global.mReceiver == null) {\n\t\t// 还没调用startWifi 提示报错\n    let err = new WifiFailImpl(getErrcode(12000));\n\t\toption.fail?.(err)\n\t\toption.complete?.(err)\n\n\t\treturn\n\t}\n\n\tlet wifiManager : WifiManager =\n\t\tUTSAndroid.getAppContext()!.getSystemService(Context.WIFI_SERVICE) as WifiManager\n\n  if(option.success != null){\n    Global.supendGetWifiSuccess = option.success\n  }\n\tif(option.complete != null){\n    Global.supendGetWifiComplete = option.complete\n  }\n\n\twifiManager.startScan()\n\n}\n\n\n\n/**\n\t* wifi 链接成功的回调注册\n\t*/\nexport function onWifiConnected(callback : UniWifiResultCallback) {\n\tGlobal.onWifiConnectCallbackList.push(callback)\n}\n\n\nexport function onWifiConnectedWithPartialInfo(callback : UniWifiResultCallbackWithPartialInfo) {\n\tGlobal.onWifiConnectWithPartialInfoCallbackList.push(callback)\n}\n\n\n/**\n * wifi 链接成功的回调取消注册\n */\nexport function offWifiConnected(callback? : UniWifiResultCallback) {\n\n\tif(callback == null){\n\t\tGlobal.onWifiConnectCallbackList = []\n\t\treturn\n\t}\n\n\tlet callbackIndex = Global.onWifiConnectCallbackList.indexOf(callback)\n\tif (callbackIndex >= 0) {\n\t\tGlobal.onWifiConnectCallbackList.splice(callbackIndex, 1);\n\t}\n}\n\n/**\n * 不具备详细信息的wifi 反注册\n */\nexport function offWifiConnectedWithPartialInfo(callback? : UniWifiResultCallbackWithPartialInfo) {\n\n\tif(callback == null){\n\t\tGlobal.onWifiConnectWithPartialInfoCallbackList = []\n\t\treturn\n\t}\n\n\tlet callbackIndex = Global.onWifiConnectWithPartialInfoCallbackList.indexOf(callback)\n\tif (callbackIndex >= 0) {\n\t\tGlobal.onWifiConnectWithPartialInfoCallbackList.splice(callbackIndex, 1);\n\t}\n}\n\n/**\n\t* 注册Wifi列表的监听事件\n\t*/\nexport function onGetWifiList(callback : UniGetWifiListCallback) {\n\tGlobal.onGetWifiListCallback = callback\n}\n\n/**\n * 取消注册Wifi列表的监听事件\n */\nexport function offGetWifiList(callback? : UniWifiCallback) {\n\tGlobal.onGetWifiListCallback = null\n\tGlobal.supendGetWifiComplete = null\n\tGlobal.supendGetWifiSuccess = null\n}\n\n\n/**\n * 真正执行wifi链接逻辑\n */\nfunction realWifiConnect(option : WifiConnectOption){\n\n\tif (Global.mReceiver == null || Global.scanList.length < 1) {\n\n    let err = new WifiFailImpl(getErrcode(12000));\n\t\toption.fail?.(err)\n\t\toption.complete?.(err)\n\n\t\treturn\n\t}\n\n\t// 执行后续的逻辑\n\tlet scanWifiInfo : AndroidUniWifiInfo | null = null\n\tfor (let scanResult in Global.scanList) {\n\t\tif (scanResult.SSID.equals(option.SSID)) {\n\t\t\tscanWifiInfo = scanResult\n\t\t}\n\t}\n\n\tif (scanWifiInfo == null) {\n\t\t// 不在扫描列表中返回错误\n    let err = new WifiFailImpl(getErrcode(12000));\n\t\toption.fail?.(err)\n\t\toption.complete?.(err)\n\t\treturn\n\t}\n\n\tlet wifiConfigration = wrapWifiConfiguration(scanWifiInfo.SSID, option.password, scanWifiInfo.securityType);\n\twifiConfigration.BSSID = scanWifiInfo.BSSID\n\tlet wifiManager : WifiManager =\n\t\tUTSAndroid.getAppContext()!.getSystemService(Context.WIFI_SERVICE) as WifiManager\n\n\t// 如果已经存在了指定wifi 配置，移除之\n\tlet targetExistConfig : WifiConfiguration | null = null\n\tlet existingConfigs = wifiManager.getConfiguredNetworks();\n\tfor (let existingConfig in existingConfigs) {\n\t\tif (existingConfig.SSID.equals(\"\\\"\" + option.SSID + \"\\\"\")) {\n\t\t\ttargetExistConfig = existingConfig\n\t\t}\n\t}\n\t// 如果wifi已经保存了当前ssid的配置，可能是别的应用添加的。android系统要求，需要删除掉重新添加\n\tif (targetExistConfig != null) {\n\t\tlet removeRet = wifiManager.removeNetwork(targetExistConfig.networkId);\n\n\t\tif (!removeRet) {\n\n\t\t\t// add since 2023-03-28，如果当前系统大于等于android10， 则明确当前系统不支持\n\t\t\tif(Build.VERSION.SDK_INT > 28){\n\t\t\t\t// 系统大于android 9\n        let err = new WifiFailImpl(getErrcode(12001));\n\t\t\t\toption.fail?.(err)\n\t\t\t\toption.complete?.(err)\n\t\t\t}else{\n\t\t\t\t// 移除之前的配置失败了，返回错误，需要用户手动取消保存一下\n        let err = new WifiFailImpl(getErrcode(12013));\n\t\t\t\toption.fail?.(err)\n\t\t\t\toption.complete?.(err)\n\t\t\t}\n\n\n\t\t\treturn\n\t\t}\n\n\t}\n\n\tlet currentConnect = wifiManager.getConnectionInfo()\n\tif (currentConnect.networkId >= 0) {\n\t\twifiManager.disableNetwork(currentConnect.networkId)\n\t} else {\n\t\twifiManager.removeNetwork(currentConnect.networkId)\n\t}\n\twifiManager.disconnect()\n\n\tlet connected = false;\n\ttry {\n\n\t\tlet netID = wifiManager.addNetwork(wifiConfigration);\n\t\t// 如果-1 说明没添加上，报错即可\n\t\tif (netID < 0) {\n      let err = new WifiFailImpl(getErrcode(12002));\n\t\t\toption.fail?.(err)\n\t\t\toption.complete?.(err)\n\n\t\t\treturn\n\t\t}\n\n\n\t\tlet enabled = wifiManager.enableNetwork(netID, true);\n\t\tif (!enabled) {\n      let err = new WifiFailImpl(getErrcode(12007));\n\t\t\toption.fail?.(err)\n\t\t\toption.complete?.(err)\n\n\t\t\treturn\n\t\t}\n\t\tconnected = wifiManager.reconnect();\n\n\t} catch (e) {\n\t\tconnected = false;\n\t\t__f__('log','at uni_modules/uni-wifi/utssdk/app-android/index.uts:625',e);\n\t}\n\n\tif (!connected) {\n\t\t// 出错了，返回错误\n\t\t// 兜底的报错\n    let err = new WifiFailImpl(getErrcode(12010));\n\t\toption.fail?.(err)\n\t\toption.complete?.(err)\n\t\treturn\n\t}\n\n  let result = new UniWifiResult(0,UniErrorSubject,\"getWifiList:ok\",null)\n\n\twifiManager.saveConfiguration()\n\t//scanWifiInfo 根据 partialInfo 填充给返回字段\n\tif (option.partialInfo != null && option.partialInfo == true) {\n\t\tlet wifiPartialInfo : UniWifiInfo = {\n\t\t\tSSID: scanWifiInfo.SSID\n\t\t}\n\t\tresult.wifi = wifiPartialInfo\n\t} else {\n\t\tresult.wifi = wrapUniWifiInfoFromAndroid(scanWifiInfo)\n\t}\n\n\n\toption.success?.(result)\n\toption.complete?.(result)\n}\n\n/**\n * 链接指定wifi\n */\n@Suppress(\"UNUSED_PARAMETER\", \"DEPRECATION\")\nexport function connectWifi(option : WifiConnectOption) {\n\n\tif (option.maunal == true) {\n\t\t// 指定了手动模式\n\t\tlet manunalIntent = new Intent(android.provider.Settings.ACTION_WIFI_SETTINGS);\n\t\tUTSAndroid.getUniActivity()!.startActivity(manunalIntent);\n\n    \n     let result = new UniWifiResult(0,UniErrorSubject,\"connectWifi:ok\",null)\n\n\t\toption.success?.(result)\n\t\toption.complete?.(result)\n\t\treturn\n\t}\n\n\n\n\t// add since 2022-03-28 ，增加逻辑，如果正在扫描中，则可以等待5s\n\tif(startWifiScaning){\n\t\tlet taskCount = 0\n\t\tlet taskId:number  = 0\n\t\ttaskId = setInterval(function(){\n\n\t\t\ttaskCount += 1;\n\t\t\tif(taskCount >= 5 || startWifiScaning == false){\n\t\t\t\t// 超过10s了。或者扫描过程结束了\n\t\t\t\tclearInterval(taskId)\n\t\t\t\trealWifiConnect(option)\n\t\t\t}\n\t\t},2000)\n\n\t\tUTSAndroid.onAppActivityDestroy(function () {\n\t\t\tclearInterval(taskId)\n\t\t});\n\t}else{\n\t\trealWifiConnect(option)\n\t}\n\n\n\n}\n\n\n/**\n\t* 关闭wifi\n\t*/\nexport function stopWifi(option : WifiOption) {\n\t// 需要先开启wifi,才能使用后续的功能\n\tif (Global.mReceiver == null) {\n    let err = new WifiFailImpl(getErrcode(12000));\n\t\toption.fail?.(err)\n\t\toption.complete?.(err)\n\n\t\treturn\n\t}\n\ttry {\n\t\tUTSAndroid.getUniActivity()!.unregisterReceiver(Global.mReceiver)\n\t} catch (e) {\n\t\t// 多次调用\n\t\t//TODO handle the exception\n\t}\n\n\tGlobal.onGetWifiListCallback = null\n\tGlobal.onWifiConnectWithPartialInfoCallbackList = []\n\tGlobal.onWifiConnectCallbackList = []\n\tGlobal.mReceiver = null\n\n  let ret = new UniWifiResult(0,UniErrorSubject,\"stopWifi:ok\",null)\n\toption.success?.(ret)\n\toption.complete?.(ret)\n\n}\n\n/**\n * 获取当前连接中的wifi信息\n */\n@Suppress(\"DEPRECATION\")\nexport function getConnectedWifi(option : GetConnectedWifiOptions) {\n\n\tlet wifiInfo : UniWifiInfo = {\n\t\tSSID: \"\"\n\t}\n\n\n\tif (Global.mReceiver == null) {\n\t\t// 还没调用startWifi 提示报错\n    let err = new WifiFailImpl(getErrcode(12000));\n\t\toption.fail?.(err)\n\t\toption.complete?.(err)\n\n\t\treturn\n\t}\n\n\t// 需要先校验权限，没有位置权限无法获取wifi\n\tif (ActivityCompat.checkSelfPermission(UTSAndroid.getUniActivity()!, Manifest.permission.ACCESS_FINE_LOCATION) != PackageManager.PERMISSION_GRANTED) {\n\t\t// 尚不具备权限，返回错误\n    let err = new WifiFailImpl(getErrcode(12001));\n\t\toption.fail?.(err)\n\t\toption.complete?.(err)\n\t\treturn;\n\t}\n\n\n\n\tconst context = UTSAndroid.getAppContext();\n\tif (context != null) {\n\t\tconst wm = context.getSystemService(\n\t\t\tContext.WIFI_SERVICE\n\t\t) as WifiManager;\n\t\t// 测试android 12上可以使用\n\t\t//@ts-ignore\n\t\tconst winfo = wm.getConnectionInfo();\n\n\t\twifiInfo = wrapUniWifiInfoFromConnectInfo(winfo);\n\n    let res = new UniWifiResult(0,UniErrorSubject,\"getConnectedWifi:ok\",null)\n\n\t\t// 判断一下是否wifi 关闭了\n\t\tif (option.partialInfo!= null) {\n\t\t\tlet ret : UniWifiInfo = {\n\t\t\t\tSSID: wifiInfo.SSID\n\t\t\t}\n\t\t\tres.wifi = ret;\n\t\t} else {\n\t\t\tif (wifiInfo.BSSID == null || zeroCountNum(wifiInfo.BSSID) > 3) {\n         let err = new WifiFailImpl(getErrcode(12005));\n\t\t\t\toption.fail?.(err)\n\t\t\t\toption.complete?.(err)\n\t\t\t\treturn\n\t\t\t}\n\t\t\tres.wifi = wifiInfo;\n\t\t}\n\n\n\t\toption.success?.(res)\n\t\toption.complete?.(res)\n\t\treturn\n\t}\n\n  let err = new WifiFailImpl(getErrcode(12000));\n\toption.fail?.(err)\n\toption.complete?.(err)\n}\n\n","/**\r\n * Wifi 函数通用入参封装\r\n */\r\nexport type WifiOption = {\r\n\tsuccess ?: (res : UniWifiResult) => void;\r\n\tfail ?: (res : UniError) => void;\r\n\tcomplete ?: (res : any) => void;\r\n};\r\n\r\n/**\r\n * Wifi 链接参数封装\r\n */\r\nexport type WifiConnectOption = {\r\n\tSSID ?: string;\r\n\tBSSID ?: string;\r\n\tpassword ?: string;\r\n\tmaunal ?: boolean;\r\n\tpartialInfo ?: boolean; //ios不生效\r\n\tsuccess ?: (res : UniWifiResult) => void;\r\n\tfail ?: (res : UniError) => void;\r\n\tcomplete ?: (res : any) => void;\r\n}\r\n\r\n/**\r\n * 获取当前链接的wifi信息\r\n */\r\nexport type GetConnectedWifiOptions = {\r\n\tpartialInfo ?: boolean\r\n\tsuccess ?: (res : UniWifiResult) => void\r\n\tfail ?: (res : UniError) => void\r\n\tcomplete ?: (res : any) => void\r\n}\r\n\r\n/*\r\n * 对外暴露的wifi信息\r\n */\r\nexport type UniWifiInfo = {\r\n\tSSID : string;\r\n\tBSSID ?: string;\r\n\tsecure ?: boolean;\r\n\tsignalStrength ?: number;\r\n\tfrequency ?: number;\r\n}\r\n\r\nexport type UniWifiInfoWithPartialInfo = {\r\n\tSSID : string;\r\n}\r\n\r\n\r\nexport type UniWifiResult = {\r\n\terrCode : number,\r\n\terrSubject : string,\r\n\terrMsg : string,\r\n\twifi : UniWifiInfo | null\r\n}\r\n\r\nexport type UniWifiCallback = () => void\r\n\r\nexport type UniGetWifiListCallback = (wifiInfo:UTSJSONObject) => void\r\n\r\nexport type UniWifiResultCallback = (wifiInfo:UniWifiResult) => void\r\n\r\nexport type UniWifiResultCallbackWithPartialInfo = (wifiInfo:UniWifiInfoWithPartialInfo) => void\r\n\r\n\r\nexport type StartWifi = (option : WifiOption) => void\r\n\r\nexport type StopWifi = (option : WifiOption) => void\r\n\r\nexport type GetWifiList = (option : WifiOption) => void\r\n\r\nexport type OnGetWifiList = (callback : UniGetWifiListCallback) => void\r\n\r\nexport type OffGetWifiList = (callback : UniWifiCallback) => void\r\n\r\nexport type GetConnectedWifi = (option : GetConnectedWifiOptions) => void\r\n\r\nexport type ConnectWifi = (option : WifiConnectOption) => void\r\n\r\nexport type OnWifiConnected = (callback : UniWifiResultCallback) => void\r\n\r\nexport type OnWifiConnectedWithPartialInfo = (callback : UniWifiResultCallbackWithPartialInfo) => void\r\n\r\nexport type OffWifiConnected = (callback : UniWifiCallback | null) => void\r\n\r\nexport type OffWifiConnectedWithPartialInfo = (callback : UniWifiResultCallbackWithPartialInfo | null) => void\r\n\r\nexport type SetWifiList = (option : WifiOption) => void\r\n\r\n\r\n/**\r\n * 错误码\r\n * - 12000 尚未初始化\r\n * - 12001 当前系统不支持相关能力\r\n * - 12002 密码错误\r\n * - 12005 Android 特有，未打开 Wi-Fi 开关\r\n * - 12007 用户拒绝授权链接 Wi-Fi\r\n * - 12010 系统其他错误\r\n * - 12013 系统保存的 Wi-Fi 配置过期，建议忘记 Wi-Fi 后重试，仅 Android 支持\r\n */\r\nexport type WifiErrorCode = 12000 |12001 | 12002 |  12005 | 12007 | 12010 | 12013;\r\n\r\nexport interface WifiFail extends IUniError{\r\n\terrCode: WifiErrorCode\r\n};\r\n\r\n\r\n\r\ninterface Uni {\r\n\t/**\r\n\t * 初始化Wi-Fi模块\r\n\t *\r\n\t * @param {WifiOption} option\r\n\t * @tutorial https://uniapp.dcloud.net.cn/api/system/wifi.html#startwifi\r\n\t * @uniPlatform {\r\n\t *    \"app\": {\r\n\t *        \"android\": {\r\n\t *            \"osVer\": \"4.4.4\",\r\n\t *            \"uniVer\": \"3.7.0\",\r\n\t *            \"unixVer\": \"3.9.0\"\r\n\t *        },\r\n\t *        \"ios\": {\r\n\t *            \"osVer\": \"9.0\",\r\n\t *            \"uniVer\": \"3.7.7\",\r\n\t *            \"unixVer\": \"3.9.0\"\r\n\t *   \t  }\r\n\t *    }\r\n\t * }\r\n\t * @uniVersion 3.7.7\r\n\t * @uniVueVersion 2,3  //支持的vue版本\r\n\t * @autotest { after: 'stopWifi' }\r\n\t */\r\n\tstartWifi(option : WifiOption): void,\r\n\t/**\r\n\t * 关闭 Wi-Fi 模块\r\n\t *\r\n\t * @param {WifiOption} option\r\n\t * @tutorial https://uniapp.dcloud.net.cn/api/system/wifi.html#stopwifi\r\n\t * @uniPlatform {\r\n\t *    \"app\": {\r\n\t *        \"android\": {\r\n\t *            \"osVer\": \"4.4.4\",\r\n\t *            \"uniVer\": \"3.7.0\",\r\n\t *            \"unixVer\": \"3.9.0\"\r\n\t *        },\r\n\t *        \"ios\": {\r\n\t *            \"osVer\": \"9.0\",\r\n\t *            \"uniVer\": \"3.7.7\",\r\n\t *            \"unixVer\": \"3.9.0\"\r\n\t *   \t  }\r\n\t *    }\r\n\t * }\r\n\t * @uniVersion 3.7.7\r\n\t * @uniVueVersion 2,3  //支持的vue版本\r\n\t * @autotest { before: 'startWifi' }\r\n\t */\r\n\tstopWifi(option : WifiOption) : void,\r\n\t/**\r\n\t * @param {WifiConnectOption} option\r\n\t * @tutorial https://uniapp.dcloud.net.cn/api/system/wifi.html#connectWifi\r\n\t * @uniPlatform {\r\n\t *    \"app\": {\r\n\t *        \"android\": {\r\n\t *            \"osVer\": \">=4.4 && <10.0\",\r\n\t *            \"uniVer\": \"3.7.0\",\r\n\t *            \"unixVer\": \"3.9.0\"\r\n\t *        },\r\n\t *        \"ios\": {\r\n\t *            \"osVer\": \"9.0\",\r\n\t *            \"uniVer\": \"3.7.7\",\r\n\t *            \"unixVer\": \"3.9.0\"\r\n\t *   \t  }\r\n\t *    }\r\n\t * }\r\n\t * @uniVersion 3.7.7\r\n\t * @uniVueVersion 2,3  //支持的vue版本\r\n\t * @autotest {\r\n\t\tgenerated: false,\r\n\t\tpollution: false,\r\n\t\tcases:[\r\n\t\t\t{\r\n\t\t\t\tbefore: 'startWifi',\r\n\t\t\t\tafter: 'stopWifi',\r\n\t\t\t\tinput: [{\r\n\t\t\t\t\tmaunal:false,\r\n\t\t\t\t\tSSID:\"Xiaomi_20D0\",\r\n\t\t\t\t\tpassword:\"streamApp!2016\",\r\n\t\t\t\t}],\r\n\t\t\t\toutput:{\r\n\t\t\t\t\t\tcallbackType: 'success',\r\n\t\t\t\t\t\tvalue: { errCode: 12013 ,errMsg: \"connectWifi:wifi config may be expired\",errSubject: \"uni-connectWifi\"}\r\n\t\t\t\t\t}\r\n\t\t\t}\r\n\t\t]\r\n\t}\r\n\t*/\r\n\tconnectWifi(option : WifiConnectOption) : void,\r\n\t/**\r\n\t * 请求获取 Wi-Fi 列表。wifiList 数据会在 onGetWifiList 注册的回调中返回。\r\n\t * @param {WifiOption} option\r\n\t * @tutorial https://uniapp.dcloud.net.cn/api/system/wifi.html#getWifiList\r\n\t * @uniPlatform {\r\n\t *    \"app\": {\r\n\t *        \"android\": {\r\n\t *            \"osVer\": \"4.4.4\",\r\n\t *            \"uniVer\": \"3.7.0\",\r\n\t *            \"unixVer\": \"3.9.0\"\r\n\t *        },\r\n\t *        \"ios\": {\r\n\t *            \"osVer\": \"9.0\",\r\n\t *            \"uniVer\": \"3.7.7\",\r\n\t *            \"unixVer\": \"3.9.0\"\r\n\t *   \t  }\r\n\t *    }\r\n\t * }\r\n\t * @uniVersion 3.7.7\r\n\t * @uniVueVersion 2,3  //支持的vue版本\r\n\t * @autotest { before: 'startWifi', after: 'stopWifi' }\r\n\t*/\r\n\tgetWifiList(option : WifiOption) : void,\r\n\t/**\r\n\t * 监听获取到 Wi-Fi 列表数据事件。\r\n\t *\r\n\t * @param {UniWifiCallback} callback\r\n\t * @tutorial https://uniapp.dcloud.net.cn/api/system/wifi.html#onGetWifiList\r\n\t * @uniPlatform {\r\n\t *    \"app\": {\r\n\t *        \"android\": {\r\n\t *            \"osVer\": \"4.4.4\",\r\n\t *            \"uniVer\": \"3.7.0\",\r\n\t *            \"unixVer\": \"3.9.0\"\r\n\t *        },\r\n\t *        \"ios\": {\r\n\t *            \"osVer\": \"9.0\",\r\n\t *            \"uniVer\": \"3.7.7\",\r\n\t *            \"unixVer\": \"3.9.0\"\r\n\t *   \t  }\r\n\t *    }\r\n\t * }\r\n\t * @uniVersion 3.7.7\r\n\t * @uniVueVersion 2,3  //支持的vue版本\r\n\t * @autotest  { expectCallback: true }\r\n\t * @autotest {\r\n\t\t generated: false,\r\n\t\t pollution: false,\r\n\t\t expectCallback: true,\r\n\t\t before: 'startWifi',\r\n\t\t after: 'onGetWifiListAfter',\r\n\t\t cases: [\r\n\t\t\t {\r\n\t\t\t\t output: {\r\n\t\t\t\t\t value: 0,\r\n\t\t\t\t\t returnKey: '.wifiList.length',\r\n\t\t\t\t\t jestExpectSyntax: 'toBeGreaterThan'\r\n\t\t\t\t },\r\n\t\t\t }\r\n\t\t ]\r\n\t}\r\n\t */\r\n\tonGetWifiList(callback : UniGetWifiListCallback) : void,\r\n\t/**\r\n\t * 移除获取到 Wi-Fi 列表数据事件的监听函数。\r\n\t *\r\n\t * @param {UniWifiCallback} callback\r\n\t * @tutorial https://uniapp.dcloud.net.cn/api/system/wifi.html#offGetWifiList\r\n\t * @uniPlatform {\r\n\t *    \"app\": {\r\n\t *        \"android\": {\r\n\t *            \"osVer\": \"4.4.4\",\r\n\t *            \"uniVer\": \"3.7.0\",\r\n\t *            \"unixVer\": \"3.9.0\"\r\n\t *        },\r\n\t *        \"ios\": {\r\n\t *            \"osVer\": \"9.0\",\r\n\t *            \"uniVer\": \"3.7.7\",\r\n\t *            \"unixVer\": \"3.9.0\"\r\n\t *   \t  }\r\n\t *    }\r\n\t * }\r\n\t * @uniVersion 3.7.7\r\n\t * @uniVueVersion 2,3  //支持的vue版本\r\n\t * @autotest { expectCallback: true }\r\n\t */\r\n\toffGetWifiList(callback : UniWifiCallback) : void,\r\n\t/**\r\n\t * 获取已连接的 Wi-Fi 信息\r\n\t *\r\n\t * @param {GetConnectedWifiOptions} option\r\n\t * @tutorial https://uniapp.dcloud.net.cn/api/system/wifi.html#getConnectedWifi\r\n\t * @uniPlatform {\r\n\t *    \"app\": {\r\n\t *        \"android\": {\r\n\t *            \"osVer\": \"4.4.4\",\r\n\t *            \"uniVer\": \"3.7.0\",\r\n\t *            \"unixVer\": \"3.9.0\"\r\n\t *        },\r\n\t *        \"ios\": {\r\n\t *            \"osVer\": \"9.0\",\r\n\t *            \"uniVer\": \"3.7.7\",\r\n\t *            \"unixVer\": \"3.9.0\"\r\n\t *   \t  }\r\n\t *    }\r\n\t * }\r\n\t * @uniVersion 3.7.7\r\n\t * @uniVueVersion 2,3  //支持的vue版本\r\n\t * @autotest { before: 'startWifi', after: 'stopWifi' }\r\n\t */\r\n\tgetConnectedWifi(option : GetConnectedWifiOptions) : void,\r\n\t/**\r\n\t * 监听连接上 Wi-Fi 的事件\r\n\t *\r\n\t * @param {UniWifiCallback} callback\r\n\t * @tutorial https://uniapp.dcloud.net.cn/api/system/wifi.html#onWifiConnected\r\n\t * @uniPlatform {\r\n\t *    \"app\": {\r\n\t *        \"android\": {\r\n\t *            \"osVer\": \"4.4.4\",\r\n\t *            \"uniVer\": \"3.7.0\",\r\n\t *            \"unixVer\": \"3.9.0\"\r\n\t *        },\r\n\t *        \"ios\": {\r\n\t *            \"osVer\": \"9.0\",\r\n\t *            \"uniVer\": \"3.7.7\",\r\n\t *            \"unixVer\": \"3.9.0\"\r\n\t *   \t  }\r\n\t *    }\r\n\t * }\r\n\t * @uniVersion 3.7.7\r\n\t * @uniVueVersion 2,3  //支持的vue版本\r\n\t * @autotest { expectCallback: true }\r\n\t */\r\n\tonWifiConnected(callback : UniWifiResultCallback) : void,\r\n\t/**\r\n\t * 监听连接上 Wi-Fi 的事件。\r\n\t *\r\n\t * @param {UniWifiCallback} callback\r\n\t * @tutorial https://uniapp.dcloud.net.cn/api/system/wifi.html#onWifiConnectedWithPartialInfo\r\n\t * @uniPlatform {\r\n\t *    \"app\": {\r\n\t *        \"android\": {\r\n\t *            \"osVer\": \"4.4.4\",\r\n\t *            \"uniVer\": \"3.7.0\",\r\n\t *            \"unixVer\": \"3.9.0\"\r\n\t *        },\r\n\t *        \"ios\": {\r\n\t *            \"osVer\": \"9.0\",\r\n\t *            \"uniVer\": \"3.7.7\",\r\n\t *            \"unixVer\": \"3.9.0\"\r\n\t *   \t  }\r\n\t *    }\r\n\t * }\r\n\t * @uniVersion 3.7.7\r\n\t * @uniVueVersion 2,3  //支持的vue版本\r\n\t * @autotest { expectCallback: true }\r\n\t */\r\n\tonWifiConnectedWithPartialInfo(callback : UniWifiResultCallbackWithPartialInfo) : void,\r\n\t/**\r\n\t * 移除连接上 Wi-Fi 的事件的监听函数。\r\n\t *\r\n\t * @param {UniWifiCallback} callback\r\n\t * @tutorial https://uniapp.dcloud.net.cn/api/system/wifi.html#offWifiConnected\r\n\t * @uniPlatform {\r\n\t *    \"app\": {\r\n\t *        \"android\": {\r\n\t *            \"osVer\": \"4.4.4\",\r\n\t *            \"uniVer\": \"3.7.0\",\r\n\t *            \"unixVer\": \"3.9.0\"\r\n\t *        },\r\n\t *        \"ios\": {\r\n\t *            \"osVer\": \"9.0\",\r\n\t *            \"uniVer\": \"3.7.7\",\r\n\t *            \"unixVer\": \"3.9.0\"\r\n\t *   \t  }\r\n\t *    }\r\n\t * }\r\n\t * @uniVersion 3.7.7\r\n\t * @uniVueVersion 2,3  //支持的vue版本\r\n\t * @autotest { expectCallback: true }\r\n\t */\r\n\toffWifiConnected(callback : UniWifiCallback | null) : void,\r\n\t/**\r\n\t * 移除连接上 Wi-Fi 的事件的监听函数。\r\n\t *\r\n\t * @param {UniWifiCallback} callback\r\n\t * @tutorial https://uniapp.dcloud.net.cn/api/system/wifi.html#offWifiConnectedWithPartialInfo\r\n\t * @uniPlatform {\r\n\t *    \"app\": {\r\n\t *        \"android\": {\r\n\t *            \"osVer\": \"x\",\r\n\t *            \"uniVer\": \"x\",\r\n\t *            \"unixVer\": \"x\"\r\n\t *        },\r\n\t *        \"ios\": {\r\n\t *            \"osVer\": \"x\",\r\n\t *            \"uniVer\": \"x\",\r\n\t *            \"unixVer\": \"x\"\r\n\t *   \t  }\r\n\t *    }\r\n\t * }\r\n\t * @uniVersion 3.7.7\r\n\t * @uniVueVersion 2,3  //支持的vue版本\r\n\t * @autotest { expectCallback: true }\r\n\t */\r\n\toffWifiConnectedWithPartialInfo(callback : UniWifiResultCallbackWithPartialInfo | null) : void,\r\n\t/**\r\n\t * SetWifiList  暂未实现\r\n\t *\r\n\t * @uniPlatform {\r\n\t *    \"app\": {\r\n\t *        \"android\": {\r\n\t *            \"osVer\": \"x\",\r\n\t *            \"uniVer\": \"x\",\r\n\t *            \"unixVer\": \"x\"\r\n\t *        },\r\n\t *        \"ios\": {\r\n\t *            \"osVer\": \"x\",\r\n\t *            \"uniVer\": \"x\",\r\n\t *            \"unixVer\": \"x\"\r\n\t *   \t  }\r\n\t *    }\r\n\t * }\r\n\t */\r\n\tsetWifiList(option : WifiOption) : void,\r\n}\r\n","import { WifiErrorCode, WifiFail} from \"./interface.uts\"\n\n/**\n * 错误主题\n */\nexport const UniErrorSubject = 'uni-wifi';\n/**\n * 错误码\n * @UniError\n */\nexport const WifiUniErrors : Map<WifiErrorCode, string> = new Map([\n\n\t/**\n\t * 未先调用 startWifi 接口\n\t */\n\t[12000, 'not init.'],\n\t/**\n\t * 当前系统不支持相关能力\n\t */\n\t[12001, 'system not support'],\n  /**\n   * 密码错误\n   */\n  [12002, 'password error Wi-Fi'],\n\t/**\n\t * Android 特有，未打开 Wi-Fi 开关\n\t */\n\t[12005, 'wifi not turned on'],\n\t/**\n\t * 用户拒绝授权链接 Wi-Fi\n\t */\n\t[12007, 'user denied'],\n\t/**\n\t * 系统其他错误，需要在 errmsg 打印具体的错误原因\n\t */\n\t[12010, 'unknown error'],\n  /**\n   * 系统保存的 Wi-Fi 配置过期，建议忘记 Wi-Fi 后重试，仅 Android 支持\n   */\n  [12013, 'wifi config may be expired'],\n\n]);\n\n\nexport function getErrcode(errCode : number) : WifiErrorCode {\n\tconst res = WifiUniErrors[errCode];\n\treturn res == null ? 12000 : errCode;\n}\n\n\nexport class WifiFailImpl extends UniError implements WifiFail {\n\tconstructor(errCode : WifiErrorCode) {\n\t\tsuper();\n\t\tthis.errSubject = UniErrorSubject;\n\t\tthis.errCode = errCode;\n\t\tthis.errMsg = WifiUniErrors[errCode] ?? \"\";\n\t}\n}\n\n"],"names":[],"mappings":"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"}